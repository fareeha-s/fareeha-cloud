{"version":3,"file":"index-6Gjnwc5w.js","sources":["../../node_modules/react-dom/client.js","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/at-sign.js","../../node_modules/lucide-react/dist/esm/icons/chevron-left.js","../../node_modules/lucide-react/dist/esm/icons/chevron-right.js","../../node_modules/lucide-react/dist/esm/icons/lock.js","../../node_modules/lucide-react/dist/esm/icons/party-popper.js","../../node_modules/lucide-react/dist/esm/icons/send.js","../../node_modules/lucide-react/dist/esm/icons/shirt.js","../../node_modules/lucide-react/dist/esm/icons/sticky-note.js","../../node_modules/lucide-react/dist/esm/icons/utensils.js","../../node_modules/lucide-react/dist/esm/icons/x.js","../../src/components/AppIcon.tsx","../../src/data/notes.ts","../../src/screens/NotesScreen.tsx","../../src/screens/SocialsScreen.tsx","../../src/components/PartifulEvent.tsx","../../src/data/events.ts","../../src/screens/EventScreen.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase().trim();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({\n      color = \"currentColor\",\n      size = 24,\n      strokeWidth = 2,\n      absoluteStrokeWidth,\n      className = \"\",\n      children,\n      ...rest\n    }, ref) => {\n      return createElement(\n        \"svg\",\n        {\n          ref,\n          ...defaultAttributes,\n          width: size,\n          height: size,\n          stroke: color,\n          strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n          className: [\"lucide\", `lucide-${toKebabCase(iconName)}`, className].join(\" \"),\n          ...rest\n        },\n        [\n          ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n          ...Array.isArray(children) ? children : [children]\n        ]\n      );\n    }\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AtSign = createLucideIcon(\"AtSign\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"4\", key: \"4exip2\" }],\n  [\"path\", { d: \"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8\", key: \"7n84p3\" }]\n]);\n\nexport { AtSign as default };\n//# sourceMappingURL=at-sign.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronLeft = createLucideIcon(\"ChevronLeft\", [\n  [\"path\", { d: \"m15 18-6-6 6-6\", key: \"1wnfg3\" }]\n]);\n\nexport { ChevronLeft as default };\n//# sourceMappingURL=chevron-left.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronRight = createLucideIcon(\"ChevronRight\", [\n  [\"path\", { d: \"m9 18 6-6-6-6\", key: \"mthhwq\" }]\n]);\n\nexport { ChevronRight as default };\n//# sourceMappingURL=chevron-right.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Lock = createLucideIcon(\"Lock\", [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n]);\n\nexport { Lock as default };\n//# sourceMappingURL=lock.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst PartyPopper = createLucideIcon(\"PartyPopper\", [\n  [\"path\", { d: \"M5.8 11.3 2 22l10.7-3.79\", key: \"gwxi1d\" }],\n  [\"path\", { d: \"M4 3h.01\", key: \"1vcuye\" }],\n  [\"path\", { d: \"M22 8h.01\", key: \"1mrtc2\" }],\n  [\"path\", { d: \"M15 2h.01\", key: \"1cjtqr\" }],\n  [\"path\", { d: \"M22 20h.01\", key: \"1mrys2\" }],\n  [\n    \"path\",\n    {\n      d: \"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10\",\n      key: \"bpx1uq\"\n    }\n  ],\n  [\n    \"path\",\n    { d: \"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17\", key: \"1pd0s7\" }\n  ],\n  [\n    \"path\",\n    { d: \"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7\", key: \"zq5xbz\" }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z\",\n      key: \"4kbmks\"\n    }\n  ]\n]);\n\nexport { PartyPopper as default };\n//# sourceMappingURL=party-popper.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"Send\", [\n  [\"path\", { d: \"m22 2-7 20-4-9-9-4Z\", key: \"1q3vgg\" }],\n  [\"path\", { d: \"M22 2 11 13\", key: \"nzbqef\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shirt = createLucideIcon(\"Shirt\", [\n  [\n    \"path\",\n    {\n      d: \"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z\",\n      key: \"1wgbhj\"\n    }\n  ]\n]);\n\nexport { Shirt as default };\n//# sourceMappingURL=shirt.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst StickyNote = createLucideIcon(\"StickyNote\", [\n  [\"path\", { d: \"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z\", key: \"qazsjp\" }],\n  [\"path\", { d: \"M15 3v4a2 2 0 0 0 2 2h4\", key: \"40519r\" }]\n]);\n\nexport { StickyNote as default };\n//# sourceMappingURL=sticky-note.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Utensils = createLucideIcon(\"Utensils\", [\n  [\"path\", { d: \"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2\", key: \"cjf0a3\" }],\n  [\"path\", { d: \"M7 2v20\", key: \"1473qp\" }],\n  [\"path\", { d: \"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7\", key: \"1ogz0v\" }]\n]);\n\nexport { Utensils as default };\n//# sourceMappingURL=utensils.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","import { motion, useReducedMotion } from 'framer-motion';\r\nimport React, { forwardRef } from 'react';\r\nimport { StickyNote, AtSign, PartyPopper } from 'lucide-react';\r\nimport { createTactileEffect } from '../App';\r\n\r\ninterface AppIconProps {\r\n  icon: string;\r\n  name: string;\r\n  color: string;\r\n  onClick: () => void;\r\n  className?: string;\r\n  showLabel?: boolean;\r\n}\r\n\r\nexport const AppIcon = forwardRef<HTMLDivElement, AppIconProps>(({ \r\n  icon, \r\n  name, \r\n  color, \r\n  onClick, \r\n  className = '',\r\n  showLabel = true\r\n}, ref) => {\r\n  const prefersReducedMotion = useReducedMotion();\r\n  \r\n  // Create a mapping of icon strings to components with soft accent colors\r\n  const iconColors = {\r\n    'StickyNote': 'text-white',\r\n    'AtSign': 'text-white',\r\n    'PartyPopper': 'text-white',\r\n    'Partiful': 'text-white',\r\n  };\r\n\r\n  const iconMap: Record<string, React.ReactElement> = {\r\n    'StickyNote': <StickyNote className={`w-7 h-7 ${iconColors['StickyNote']}`} strokeWidth={1.5} />,\r\n    'AtSign': <AtSign className={`w-7 h-7 ${iconColors['AtSign']}`} strokeWidth={1.5} />,\r\n    'PartyPopper': <PartyPopper className={`w-7 h-7 ${iconColors['PartyPopper']}`} strokeWidth={1.5} />,\r\n    'Partiful': <img src=\"./icons/apps/partiful.png\" alt=\"Partiful\" className=\"w-7 h-7\" />,\r\n  };\r\n\r\n  // Apple-like spring animation\r\n  const springTransition = {\r\n    type: \"spring\",\r\n    damping: 30,\r\n    stiffness: 400,\r\n    mass: 0.8,\r\n    duration: prefersReducedMotion ? 0 : undefined\r\n  };\r\n\r\n  // Keep all names on one line\r\n  const displayName = name;\r\n\r\n  const handleClick = (e: React.MouseEvent) => {\r\n    // For animation purposes, sometimes we need to prevent clicks\r\n    if (className.includes('invisible')) return;\r\n    \r\n    // Create a quick pulse effect before launching\r\n    createTactileEffect();\r\n    \r\n    // Allow the pulse effect to complete before launching the app\r\n    setTimeout(() => {\r\n      onClick();\r\n    }, 10);\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      ref={ref}\r\n      whileHover={{ scale: 1.05 }}\r\n      whileTap={{ scale: 0.95 }}\r\n      transition={springTransition}\r\n      onClick={handleClick}\r\n      className={`flex flex-col items-center will-change-transform hardware-accelerated ${className}`}\r\n      style={{ \r\n        willChange: 'transform, opacity'\r\n      }}\r\n    >\r\n      <motion.div \r\n        className={`w-[60px] h-[60px] rounded-[14px] flex items-center justify-center shadow-sm will-change-transform relative overflow-hidden`}\r\n        whileHover={{ boxShadow: \"0 0 10px 0 rgba(255, 255, 255, 0.12)\" }}\r\n        transition={springTransition}\r\n        style={{\r\n          background: \"linear-gradient(135deg, rgba(255, 255, 255, 0.06) 0%, rgba(255, 255, 255, 0.03) 100%)\",\r\n          border: \"1px solid rgba(255, 255, 255, 0.2)\",\r\n          borderTopColor: \"rgba(255, 255, 255, 0.25)\",\r\n          borderLeftColor: \"rgba(255, 255, 255, 0.2)\",\r\n          borderBottomColor: \"rgba(255, 255, 255, 0.08)\",\r\n          borderRightColor: \"rgba(255, 255, 255, 0.08)\",\r\n          boxShadow: \"0 3px 10px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(255, 255, 255, 0.08) inset\"\r\n        }}\r\n      >\r\n        {/* Bottom highlight */}\r\n        <div \r\n          className=\"absolute bottom-0 left-0 right-0 h-[40%] pointer-events-none\" \r\n          style={{\r\n            background: \"linear-gradient(to top, rgba(255, 255, 255, 0.07) 0%, rgba(255, 255, 255, 0.02) 50%, rgba(255, 255, 255, 0) 100%)\"\r\n          }}\r\n        />\r\n        {iconMap[icon] || <div className=\"w-7 h-7 text-white\">?</div>}\r\n      </motion.div>\r\n      {showLabel && (\r\n        <span \r\n          className=\"text-[11px] text-white mt-[5px] text-center\" \r\n          style={{\r\n            fontFamily: \"var(--font-sans)\",\r\n            fontWeight: 500,\r\n            letterSpacing: '0.01em',\r\n            WebkitFontSmoothing: 'antialiased',\r\n            textRendering: 'optimizeLegibility'\r\n          }}\r\n        >\r\n          {displayName}\r\n        </span>\r\n      )}\r\n    </motion.div>\r\n  );\r\n});","export type NoteItem = {\n  id: number;\n  title: string;\n  content: string;\n  date: string;\n  timeframe: 'recent' | 'older';\n  pinned?: boolean;\n  style?: { \n    color?: string;\n    pointerEvents?: 'none' | 'auto';\n  };\n  locked?: boolean;\n};\n\nexport const notes: NoteItem[] = [\n  { \n    id: 1, \n    title: \"hello world ðŸ§­\", \n    content: `Hi, I'm Fareeha! \n    I think a wonderful part of life is watching people light up around each other. My compass always seems to point that way :)\n   \nRight now I'm building [Kineship](note:2)<span style=\"color: rgba(255, 255, 255, 0.65); font-size: 0.85em;\"> (<a href=\"https://loi.ac/labs\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: rgba(255, 255, 255, 0.65); text-decoration: underline; text-decoration-color: rgba(255,255,255,0.65);\">loi labs</a>)</span> - a social layer for workouts, guided by a north star of designing tech that centres human longevity. <span style=\"color: rgba(255, 255, 255, 0.65); font-size: 0.85em;\">(publishing on this soon!)</span>\n\n<span style=\"font-weight: bold;\">alignment:</span>\nâ–¹ early community architect at <span style=\"color: rgba(255, 255, 255, 0.65);\">stealth</span> <span style=\"font-size: 0.85em;\"><a href=\"https://www.hf0.com\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: rgba(255, 255, 255, 0.65); text-decoration: underline; text-decoration-color: rgba(255,255,255,0.65);\">($1M pre-seed, HF0)</a></span>\nâ–¹ experience-led social design - [h&s gala](video:https://youtu.be/VMxSzVREUgY), [dc fashion show](video:https://youtu.be/vXCGUXAQfOs?si=JUGWTpF-NB_2DE3a), [vfc](https://impact.ventureforcanada.ca/2023/programs/fellowship-alumni)\nâ–¹ winning team, healthcare innovation [<span style=\"color: rgba(255, 255, 255, 0.65); font-size: 0.85em;\">(mit bc x harvard med)</span>](video:https://youtu.be/u6_jdJ7YRXM?si=svadyVmXGiPOjPVR)\n\n<span style=\"font-weight: bold;\">things i love:</span>  \nâ–¹ taking forever to [set a table](app:partiful)\nâ–¹ giving people [apples](note:3) they didn't ask for \nâ–¹ chasing sunsets on two wheels ðŸ«¶\n\nIf any of this resonates with you, [please say hi!](app:socials)\n `,\n    date: \"15/04/25\",\n    timeframe: 'recent',\n    pinned: true\n  },\n  { \n    id: 2, \n    title: \"kineship\", \n    content: `\n<div style=\"display: flex; align-items: center;\">\n  <img src=\"/icons/apps/kineship.png\" alt=\"Kineship\" style=\"width:60px; height:60px; border-radius: 12px; border: 2px solid #fff; cursor: pointer; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3); background: linear-gradient(to bottom, #f8f9fa, #e2e6ea); transition: transform 0.3s ease, background 0.3s ease, box-shadow 0.3s ease; margin-top: -10px;\" onmouseover=\"this.style.transform='scale(1.1)'; this.style.background='linear-gradient(to bottom, #e2e6ea, #f8f9fa)'; this.style.boxShadow='0 12px 24px rgba(0, 0, 0, 0.4)';\" onmouseout=\"this.style.transform='scale(1)'; this.style.background='linear-gradient(to bottom, #f8f9fa, #e2e6ea)'; this.style.boxShadow='0 10px 20px rgba(0, 0, 0, 0.3)';\" onclick=\"window.open('https://kineship.com', '_blank')\" />\n  <span style=\"font-size: 12px; font-style: italic; margin-left: 15px;\">pre-launch</span>\n</div> \nMuch of how we connect today involves adding more: more invites, more plans, more coordination.\n\nLately, Iâ€™ve been wondering if there might be a kind of closeness that fits into the day as it is.\n\nLike when you swap your usual 6pm class for the 5, because your friendâ€™s going to that one. Or wandering to the farmersâ€™ market the same time as your neighbours... your day suddenly feels a touch warmer.\n\nIt might seem small, but psychologists call it <a href='https://pmc.ncbi.nlm.nih.gov/articles/PMC5137339/' target='_blank' rel='noopener noreferrer' style='text-decoration: underline;'>intentional synchrony</a>, a natural human principle rooted in our nervous systems. These overlaps are tied to lower loneliness, better regulation, and long-term wellbeing - core to how we rebuild connection at scale.\n\nSurprisingly, almost none of the social platforms we use today are designed to support this. Instead, they often keep us observing each otherâ€™s lives from a distance.\n\nKineship is built around a gentler kind of togetherness. It doesnâ€™t ask you to schedule anything or make a plan. It simply shows you when your paths could alignâ€”spin, pilates, Barryâ€™s, whatever your thing is. Some soft cues toward shared presence, and a bit more everyday serendipity.\n\nI'm hoping it makes it just a little easier to say hi, share laughs, linger a bit longer. Even with people you often see around, but don't quite know (yet!) As simple as a smoothie after class ðŸ«¶\n    `,\n    date: \"12/04/25\",\n    timeframe: 'recent',\n    pinned: false\n  },\n  { \n    id: 3,\n    title: 'apples',\n    content: `sugarbee - 10/10\n    pink lady - 9/10\n    pinata - 9/10\n    ambrosia - 8.5/10\n    fuji - 7.5/10\n    honeycrisp - 7/10\n    gala - 6.5/10\n    red delicious - 2/10\n    \n    to try:\n    black diamond\n    gravenstein\n    calville blanc d'hiver`,\n    date: '28/03/25',\n    timeframe: 'recent',\n    pinned: false\n  },\n  { \n    id: 5, \n    title: \"dinner tables\", \n    content: \"\", \n    date: \"\", \n    timeframe: 'older',\n    pinned: false,\n    locked: true,\n    style: { color: 'rgba(128, 128, 128, 0.5)', pointerEvents: 'none' }\n  },\n  { \n    id: 6, \n    title: \"layering a social stack\", \n    content: \"\", \n    date: \"\", \n    timeframe: 'older',\n    locked: true\n  }\n]; ","import React, { useState, useEffect, useRef } from 'react';\nimport type { AppScreenProps } from '../types';\nimport { motion, useAnimation, useReducedMotion, AnimatePresence } from 'framer-motion';\nimport { ChevronRight, ChevronDown, X, Lock } from 'lucide-react';\nimport { createTactileEffect } from '../App';\nimport { notes, NoteItem } from '../data/notes';\nimport ReactDOM from 'react-dom';\n\n// Declare the global window property for TypeScript\ndeclare global {\n  interface Window {\n    noteScreenBackHandler?: () => boolean;\n    initialNoteId?: number;\n    isViewingNoteDetail?: boolean;\n    openNoteWithId?: (noteId: number) => void;\n    openEventWithId?: (eventId: number) => void;\n    handleAppClick?: (appId: string) => void;\n    initialEventId?: number;\n    handleVideoLink?: (url: string) => void;\n    openNoteDirectly?: boolean;\n  }\n}\n\n// Custom Pin icon component\nconst PinIcon = () => (\n  <svg \n    width=\"10\" \n    height=\"10\" \n    viewBox=\"0 0 24 24\" \n    className=\"text-white/50 mr-1.5\"\n    style={{ marginTop: \"-1px\" }}\n  >\n    <path \n      d=\"M9 4v6l-2 4v2h10v-2l-2-4V4\" \n      fill=\"none\" \n      stroke=\"currentColor\" \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n    />\n    <path \n      d=\"M12 16v5\" \n      fill=\"none\" \n      stroke=\"currentColor\" \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n    />\n    <path \n      d=\"M8 4h8\" \n      fill=\"none\" \n      stroke=\"currentColor\" \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n    />\n  </svg>\n);\n\n// Add a Video Player component with Portal\nconst VideoPlayerOverlay = ({ videoUrl, onClose }: { videoUrl: string; onClose: () => void }) => {\n  // Extract YouTube video ID from URL\n  const getYouTubeVideoId = (url: string) => {\n    const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\n    const match = url.match(regExp);\n    return (match && match[2].length === 11) ? match[2] : null;\n  };\n\n  const videoId = getYouTubeVideoId(videoUrl);\n\n  if (!videoId) return null;\n\n  // Calculate embedUrl\n  const embedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&controls=1&showinfo=1&playsinline=1`;\n\n  // Create a portal to render directly to body\n  return ReactDOM.createPortal(\n    <motion.div \n      className=\"fixed inset-0 z-[9999] flex items-center justify-center bg-black\"\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        width: '100vw',\n        height: '100vh'\n      }}\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      onClick={onClose}\n    >\n      <motion.div \n        className=\"w-full h-full flex items-center justify-center\"\n        initial={{ scale: 0.95, opacity: 0 }}\n        animate={{ scale: 1, opacity: 1 }}\n        exit={{ scale: 0.95, opacity: 0 }}\n        transition={{ type: \"spring\", damping: 25, stiffness: 300 }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        <button \n          className=\"absolute top-8 right-8 z-10 p-3 bg-black/70 hover:bg-black/90 rounded-full text-white/80 hover:text-white transition-colors\"\n          onClick={onClose}\n        >\n          <X size={28} />\n        </button>\n        <iframe\n          className=\"w-full h-full max-h-screen\"\n          src={embedUrl}\n          title=\"YouTube video player\"\n          frameBorder=\"0\"\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n          allowFullScreen\n        ></iframe>\n      </motion.div>\n    </motion.div>,\n    document.body\n  );\n};\n\nexport const NotesScreen: React.FC<AppScreenProps> = () => {\n  const prefersReducedMotion = useReducedMotion();\n  const [hasInteracted, setHasInteracted] = useState(false);\n  const chevronControls = useAnimation();\n  const [selectedNote, setSelectedNote] = useState<NoteItem | null>(null);\n  const [widgetNoteId, setWidgetNoteId] = useState<number | null>(null);\n  // Add state for tracking current note index and swipe\n  const [currentNoteIndex, setCurrentNoteIndex] = useState<number>(-1);\n  const [swipeDirection, setSwipeDirection] = useState<'left' | 'right' | null>(null);\n  const [swipeStartX, setSwipeStartX] = useState<number | null>(null);\n  \n  // Add state for video player\n  const [videoUrl, setVideoUrl] = useState<string | null>(null);\n  \n  // Add state to track if Kineship note was opened from Hello World note\n  const [openedFromHelloWorld, setOpenedFromHelloWorld] = useState<boolean>(false);\n  \n  // Track if this is the first time viewing hello world note directly\n  const [isFirstViewOfHelloWorld, setIsFirstViewOfHelloWorld] = useState<boolean>(false);\n  \n  // Create a ref to use for directly setting the window property\n  const isViewingDetailRef = useRef(false);\n  \n  // Replace isAtBottom with showDots for pagination timing\n  const [showDots, setShowDots] = useState(false);\n  \n  // Add state to detect if user is on a mobile device\n  const [isMobileDevice, setIsMobileDevice] = useState(false);\n  \n  // Create a ref for the note content container\n  const noteContentRef = useRef<HTMLDivElement>(null);\n  \n  // Check for the openNoteDirectly flag to open note in detail view directly\n  useEffect(() => {\n    // If the openNoteDirectly flag is set, and we have an initialNoteId\n    if (typeof window !== 'undefined' && window.openNoteDirectly && window.initialNoteId) {\n      // Find the note with the specified ID\n      const noteToOpen = notes.find(note => note.id === window.initialNoteId);\n      if (noteToOpen) {\n        // Open the note directly in detail view\n        console.log('Opening note directly in detail view:', noteToOpen.id);\n        setSelectedNote(noteToOpen);\n        setIsViewingDetail(true);\n        // Set the current note index for navigation\n        const noteIndex = notes.findIndex(note => note.id === noteToOpen.id);\n        setCurrentNoteIndex(noteIndex);\n        \n        // Reset the openNoteDirectly flag to avoid reopening on component re-renders\n        window.openNoteDirectly = false;\n      }\n    }\n  }, []);\n  \n  // Detect if user is on a mobile device\n  useEffect(() => {\n    const checkIfMobile = () => {\n      const userAgent = navigator.userAgent || navigator.vendor;\n      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);\n      setIsMobileDevice(isMobile);\n    };\n    \n    checkIfMobile();\n    \n    // Also check on resize in case of device orientation changes\n    window.addEventListener('resize', checkIfMobile);\n    return () => window.removeEventListener('resize', checkIfMobile);\n  }, []);\n  \n  // Add effect to check if user has already used swipe\n  useEffect(() => {\n    // Only check localStorage for mobile devices\n    if (isMobileDevice) {\n      // Check localStorage for previous swipe interactions\n      const hasUsedSwipe = localStorage.getItem('hasUsedNoteSwipe') === 'true';\n      if (hasUsedSwipe) {\n        // If user has already swiped before, don't show dots\n        setShowDots(false);\n      }\n    } else {\n      // Never show dots for non-mobile devices\n      setShowDots(false);\n    }\n  }, [isMobileDevice]);\n\n  // Add effect to show dots when note is opened, if user hasn't swiped before\n  useEffect(() => {\n    if (selectedNote && isMobileDevice) {\n      const hasUsedSwipe = localStorage.getItem('hasUsedNoteSwipe') === 'true';\n      \n      // Only show dots if user hasn't swiped before and is on mobile\n      if (!hasUsedSwipe) {\n        setShowDots(true);\n      }\n    }\n  }, [selectedNote, isMobileDevice]);\n\n  // Function to update both the ref and window property\n  const setIsViewingDetail = (value: boolean) => {\n    isViewingDetailRef.current = value;\n    window.isViewingNoteDetail = value;\n    console.log('Setting isViewingNoteDetail via function:', value);\n    \n    // Directly apply the class to the DOM as a fallback mechanism\n    try {\n      const mainContainer = document.querySelector('.main-container');\n      if (mainContainer) {\n        if (value) {\n          mainContainer.classList.add('portrait-container');\n          mainContainer.classList.add('expanded');\n          console.log('Directly added portrait-container expanded classes to DOM');\n        } else {\n          // Force a DOM reflow before removing classes to ensure animation happens\n          void (mainContainer as HTMLElement).offsetWidth;\n          mainContainer.classList.remove('portrait-container');\n          mainContainer.classList.remove('expanded');\n          // Add a transient class to control the collapse animation specifically\n          mainContainer.classList.add('collapsing');\n          // Remove the transient class after animation completes\n          setTimeout(() => {\n            mainContainer.classList.remove('collapsing');\n          }, 500);\n          console.log('Directly removed portrait-container expanded classes from DOM');\n        }\n      }\n    } catch (e) {\n      console.error('Error directly manipulating DOM:', e);\n    }\n  };\n\n  // Run a subtle animation sequence on first render\n  useEffect(() => {\n    if (!hasInteracted && !prefersReducedMotion) {\n      // Subtle chevron pulse animation for the first note\n      const pulseAnimation = async () => {\n        await chevronControls.start({\n          x: [0, 3, 0],\n          opacity: [0.5, 0.8, 0.5],\n          transition: { duration: 1.4, ease: \"easeInOut\", times: [0, 0.5, 1] }\n        });\n        \n        // Wait a bit then do it again, more subtly\n        setTimeout(async () => {\n          await chevronControls.start({\n            x: [0, 2, 0],\n            opacity: [0.5, 0.7, 0.5],\n            transition: { duration: 1, ease: \"easeInOut\", times: [0, 0.5, 1] }\n          });\n        }, 3000);\n      };\n      \n      pulseAnimation();\n    }\n  }, [chevronControls, prefersReducedMotion, hasInteracted]);\n\n  // Set up back handler - MOVED OUTSIDE the conditional rendering\n  useEffect(() => {\n    // If we have a selected note and the App's back button is clicked,\n    // we should close the note view first instead of closing the app\n    const handleAppBackClick = () => {\n      if (selectedNote) {\n        // Set flag to false BEFORE state changes for immediate effect\n        setIsViewingDetail(false);\n        \n        // Check if this is the hello world note and it's the first time viewing it\n        const isHelloWorldNote = selectedNote.id === 1;\n        const shouldGoToHome = isHelloWorldNote && isFirstViewOfHelloWorld;\n        \n        // Add longer delay before changing React state to ensure animation completes\n        setTimeout(() => {\n          // Special case: If we're viewing Kineship note (id: 2) that was opened from Hello World note (id: 1),\n          // then go back to Hello World note instead of closing\n          if (selectedNote.id === 2 && openedFromHelloWorld) {\n            const helloWorldNote = notes.find(note => note.id === 1);\n            if (helloWorldNote) {\n              setSelectedNote(helloWorldNote);\n              // Reset the flag since we're no longer in Kineship opened from Hello World\n              setOpenedFromHelloWorld(false);\n              localStorage.removeItem('openedKineshipFromHelloWorld');\n            } else {\n              // Fallback if Hello World note not found\n              setSelectedNote(null);\n            }\n          } else {\n            // Normal behavior for other notes\n            setSelectedNote(null);\n            \n            // If this is the first view of hello world, signal to go to home\n            if (shouldGoToHome) {\n              // Reset the first view flag\n              setIsFirstViewOfHelloWorld(false);\n              // Tell the App component to go to home\n              // Small delay to ensure the note is closed first\n              setTimeout(() => {\n                // Go back to home screen by setting activeApp to null\n                // We need to access the parent App component's state\n                // Use the window object to communicate with the parent\n                if (typeof window !== 'undefined' && window.handleAppClick) {\n                  window.handleAppClick(null as any); // This will go to home screen\n                }\n              }, 50);\n            }\n          }\n          createTactileEffect();\n        }, 150); // Increased from 50ms to 150ms\n        return true; // Event was handled\n      }\n      return false; // Let App handle the default behavior\n    };\n    \n    // Add this handler to window to be accessible by the App component\n    window.noteScreenBackHandler = handleAppBackClick;\n    \n    // Clean up\n    return () => {\n      // @ts-ignore\n      delete window.noteScreenBackHandler;\n      // @ts-ignore\n      delete window.isViewingNoteDetail;\n    };\n  }, [selectedNote]);\n\n  // Add effect to ensure the portrait mode is properly maintained\n  useEffect(() => {\n    // Set the flag to control the container shape\n    setIsViewingDetail(selectedNote !== null);\n    console.log('Setting isViewingNoteDetail:', selectedNote !== null);\n    \n    // If a note is selected, ensure the content is scrolled to the top\n    if (selectedNote !== null && noteContentRef.current) {\n      // Scroll to top immediately\n      noteContentRef.current.scrollTop = 0;\n      \n      // Also add a small delay to ensure scroll happens after rendering\n      setTimeout(() => {\n        if (noteContentRef.current) {\n          noteContentRef.current.scrollTop = 0;\n        }\n      }, 50);\n    }\n    \n    return () => {\n      // Clean up when component unmounts\n      setIsViewingDetail(false);\n      console.log('Cleanup: Setting isViewingNoteDetail to false');\n    };\n  }, [selectedNote]);\n\n  // Add effect to check for initialNoteId and also check if we're coming from Hello World\n  useEffect(() => {\n    // Check if we have an initial note ID to highlight from the widget\n    if (window.initialNoteId) {\n      setWidgetNoteId(window.initialNoteId);\n      \n      // Check if this is the hello world note (id: 1) and it's being opened directly\n      if (window.initialNoteId === 1 && window.openNoteDirectly) {\n        // Check if we've seen the hello world note before\n        const hasSeenHelloWorld = localStorage.getItem('hasSeenHelloWorld') === 'true';\n        if (!hasSeenHelloWorld) {\n          // Mark that this is the first view of hello world\n          setIsFirstViewOfHelloWorld(true);\n          // Store that we've seen hello world now\n          localStorage.setItem('hasSeenHelloWorld', 'true');\n        }\n      }\n      \n      // Clear the initialNoteId after using it\n      window.initialNoteId = undefined;\n    }\n    \n    // Check if we need to track Kineship being opened from Hello World\n    const openedKineshipFromHelloWorld = localStorage.getItem('openedKineshipFromHelloWorld') === 'true';\n    if (openedKineshipFromHelloWorld) {\n      setOpenedFromHelloWorld(true);\n    }\n    \n    // Set up the openNoteWithId function in the window object\n    window.openNoteWithId = (noteId: number) => {\n      // Find the note with this ID\n      const noteToOpen = notes.find(note => note.id === noteId);\n      if (noteToOpen) {\n        // Check if this is the Kineship note (id: 2) being opened from Hello World note (id: 1)\n        if (noteId === 2 && selectedNote?.id === 1) {\n          // Set flag to track that Kineship was opened from Hello World\n          setOpenedFromHelloWorld(true);\n          localStorage.setItem('openedKineshipFromHelloWorld', 'true');\n        }\n        \n        // Close current note first if one is open\n        setIsViewingDetail(false);\n        \n        // Small delay before opening the new note\n        setTimeout(() => {\n          setIsViewingDetail(true);\n          setSelectedNote(noteToOpen);\n          markNoteAsViewed(noteId);\n          createTactileEffect();\n        }, 150);\n      }\n    };\n    \n    // Set up the handleVideoLink function in the window object\n    window.handleVideoLink = (url: string) => {\n      handleVideoLink(url);\n    };\n    \n    // Clean up\n    return () => {\n      // @ts-ignore\n      delete window.openNoteWithId;\n      // @ts-ignore\n      delete window.handleVideoLink;\n    };\n  }, []);\n\n  // Use the shared notes data instead of local state\n  \n  // Enhanced helper function for more natural date formatting\n  const getRelativeDate = (dateStr: string) => {\n    // Get current date\n    const now = new Date();\n    const today = `${String(now.getDate()).padStart(2, '0')}/${String(now.getMonth() + 1).padStart(2, '0')}/${String(now.getFullYear()).slice(-2)}`;\n    \n    // Get yesterday's date\n    const yesterdayDate = new Date(now);\n    yesterdayDate.setDate(now.getDate() - 1);\n    const yesterday = `${String(yesterdayDate.getDate()).padStart(2, '0')}/${String(yesterdayDate.getMonth() + 1).padStart(2, '0')}/${String(yesterdayDate.getFullYear()).slice(-2)}`;\n    \n    // Parse the provided date to get the month\n    const [day, month, year] = dateStr.split('/').map(Number);\n    \n    // Special cases for very recent dates\n    if (dateStr === today) return 'Today';\n    if (dateStr === yesterday) return 'Yesterday';\n    \n    // For all other dates, just show the month\n    const monthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n    const monthName = monthNames[month - 1];\n    \n    return monthName;\n  };\n\n  // Filter out locked notes for the widget\n  const widgetNotes = notes.filter(note => !note.locked);\n  \n  // New filters for pinned notes and all notes\n  const pinnedNotes = notes.filter(note => note.pinned);\n  \n  // All notes sorted by date (newest first), excluding pinned notes\n  const allNotes = notes\n    .filter(note => !note.pinned) // Exclude pinned notes\n    .sort((a, b) => {\n      // Parse dates (assuming DD/MM/YY format)\n      const [dayA, monthA, yearA] = a.date.split('/').map(Number);\n      const [dayB, monthB, yearB] = b.date.split('/').map(Number);\n      \n      // Compare dates in reverse order (newest first)\n      if (yearB !== yearA) return yearB - yearA;\n      if (monthB !== monthA) return monthB - monthA;\n      return dayB - dayA;\n    });\n\n  const closeNote = () => {\n    // Set flag to false BEFORE state changes for immediate effect\n    setIsViewingDetail(false);\n    \n    // Check if this is the hello world note\n    const isHelloWorldNote = selectedNote?.id === 1;\n    \n    // Reset widgetNoteId when closing a note\n    // This ensures that if the user goes back to home and clicks the same note\n    // from the widget again, the orb will reappear\n    if (selectedNote && widgetNoteId === selectedNote.id) {\n      setWidgetNoteId(null);\n    }\n    \n    // Add longer delay before changing React state to ensure animation completes\n    setTimeout(() => {\n      // Special case: If we're viewing Kineship note (id: 2) that was opened from Hello World note (id: 1),\n      // then go back to Hello World note instead of closing\n      if (selectedNote?.id === 2 && openedFromHelloWorld) {\n        const helloWorldNote = notes.find(note => note.id === 1);\n        if (helloWorldNote) {\n          setSelectedNote(helloWorldNote);\n          // Reset the flag since we're no longer in Kineship opened from Hello World\n          setOpenedFromHelloWorld(false);\n          localStorage.removeItem('openedKineshipFromHelloWorld');\n        } else {\n          // Fallback if Hello World note not found\n          setSelectedNote(null);\n        }\n      } else {\n        // Normal behavior for other notes\n        setSelectedNote(null);\n        \n        // If this is the hello world note, go to home page\n        if (isHelloWorldNote && typeof window !== 'undefined') {\n          // Small delay to ensure the note is closed first\n          setTimeout(() => {\n            // This will close the notes app and go to home\n            if (window.handleAppClick) {\n              window.handleAppClick('home');\n            }\n          }, 50);\n        }\n      }\n      createTactileEffect();\n    }, 150); // Increased from 50ms to 150ms\n  };\n\n  // Animation variants\n  const chevronVariants = {\n    initial: { x: 0 },\n    hover: { x: 2, transition: { repeat: 0, duration: 0.3 } }\n  };\n\n  const handleInteraction = () => {\n    if (!hasInteracted) {\n      setHasInteracted(true);\n    }\n  };\n\n  // Helper function to determine if a note should have a pulsing dot\n  const shouldShowPulsingDot = (noteId: number) => {\n    // If user came from widget, highlight that specific note\n    // but hide it only while actually viewing the note\n    if (widgetNoteId !== null && widgetNoteId === noteId) {\n      // Only hide the dot if this note is currently being viewed\n      // This ensures the dot appears again after going back to home screen\n      // and clicking on the same note from the widget\n      if (selectedNote && selectedNote.id === noteId) {\n        return false;\n      }\n      return true;\n    }\n\n    // For notes not accessed through widget, check if viewed before\n    const viewedNotes = JSON.parse(localStorage.getItem('viewedNotes') || '[]');\n    if (viewedNotes.includes(noteId)) {\n      return false;\n    }\n    \n    // Otherwise, highlight the first note in the list\n    return notes.length > 0 && notes[0].id === noteId;\n  };\n\n  // Add function to mark note as viewed\n  const markNoteAsViewed = (noteId: number) => {\n    const viewedNotes = JSON.parse(localStorage.getItem('viewedNotes') || '[]');\n    if (!viewedNotes.includes(noteId)) {\n      viewedNotes.push(noteId);\n      localStorage.setItem('viewedNotes', JSON.stringify(viewedNotes));\n    }\n  };\n\n  // Animation variants for staggered entrance\n  const containerVariants = {\n    hidden: { opacity: 0 },\n    show: {\n      opacity: 1,\n      transition: {\n        staggerChildren: 0.05,\n        delayChildren: 0.02\n      }\n    }\n  };\n\n  const itemVariants = {\n    hidden: { opacity: 0, y: 15, scale: 0.95 },\n    show: { \n      opacity: 1, \n      y: 0, \n      scale: 1,\n      transition: {\n        type: \"spring\",\n        stiffness: 300, \n        damping: 30,\n        duration: 0.3\n      }\n    }\n  };\n\n  // Debug effect to monitor isViewingDetailRef changes\r\n  useEffect(() => {\r\n    console.log('selectedNote changed to:', selectedNote !== null);\r\n    console.log('isViewingDetailRef is now:', isViewingDetailRef.current);\r\n    console.log('window.isViewingNoteDetail is now:', window.isViewingNoteDetail);\r\n  }, [selectedNote]);\r\n\r\n  const handleNoteClick = (note: NoteItem) => {\r\n    if (note.locked) return; // Prevent opening locked notes\r\n    // Mark the note as viewed immediately\r\n    markNoteAsViewed(note.id);\r\n    \r\n    // Set flag to true BEFORE state changes for immediate effect\r\n    setIsViewingDetail(true);\r\n    console.log('Click handler: Setting isViewingNoteDetail to true');\r\n    setSelectedNote(note);\r\n    \r\n    // Find the index of the note in the combined array\r\n    const allNotesArray = [...pinnedNotes, ...allNotes];\r\n    const noteIndex = allNotesArray.findIndex(n => n.id === note.id);\r\n    setCurrentNoteIndex(noteIndex);\r\n    \r\n    createTactileEffect();\r\n    \r\n    // If this was the note highlighted from widget, clear the widget ID\r\n    // This will ensure the pulsing orb disappears when returning to the list\r\n    if (widgetNoteId === note.id) {\r\n      setWidgetNoteId(null);\r\n    }\r\n  };\r\n\r\n  // Add function to handle video links\r\n  const handleVideoLink = (url: string) => {\r\n    setVideoUrl(url);\r\n  };\r\n\r\n  // Function to close video player\r\n  const closeVideoPlayer = () => {\r\n    setVideoUrl(null);\r\n  };\r\n\r\n  // Function to handle note navigation by swiping\r\n  const navigateToNextNote = () => {\r\n    // Get all notes (both pinned and regular)\r\n    const allNotesArray = [...pinnedNotes, ...allNotes];\r\n    \r\n    // No navigation if we're at the end of the list\r\n    if (currentNoteIndex >= allNotesArray.length - 1) return;\r\n    \r\n    const nextNote = allNotesArray[currentNoteIndex + 1];\r\n    // Don't navigate to locked notes\r\n    if (nextNote.locked) return;\r\n    \r\n    setSelectedNote(nextNote);\r\n    setCurrentNoteIndex(currentNoteIndex + 1);\r\n    markNoteAsViewed(nextNote.id);\r\n    createTactileEffect();\r\n    \r\n    // Hide dots permanently after first swipe\r\n    setShowDots(false);\r\n    localStorage.setItem('hasUsedNoteSwipe', 'true');\r\n  };\r\n  \r\n  const navigateToPrevNote = () => {\r\n    // Get all notes (both pinned and regular)\r\n    const allNotesArray = [...pinnedNotes, ...allNotes];\r\n    \r\n    // No navigation if we're at the beginning of the list\r\n    if (currentNoteIndex <= 0) return;\r\n    \r\n    const prevNote = allNotesArray[currentNoteIndex - 1];\r\n    // Don't navigate to locked notes\r\n    if (prevNote.locked) return;\r\n    \r\n    setSelectedNote(prevNote);\r\n    setCurrentNoteIndex(currentNoteIndex - 1);\r\n    markNoteAsViewed(prevNote.id);\r\n    createTactileEffect();\r\n    \r\n    // Hide dots permanently after first swipe\r\n    setShowDots(false);\r\n    localStorage.setItem('hasUsedNoteSwipe', 'true');\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className=\"h-full w-full\" \r\n      onClick={(e) => {\r\n        e.stopPropagation();\r\n        if (selectedNote) {\r\n          closeNote();\r\n        }\r\n        handleInteraction();\r\n      }}\r\n      onTouchStart={handleInteraction}\r\n    >\r\n      <AnimatePresence mode=\"wait\">\r\n        {selectedNote ? (\r\n          <motion.div \r\n            key=\"note-detail\"\r\n            className=\"h-full w-full\" \r\n            onClick={(e) => e.stopPropagation()} // Prevent closing when clicking inside the note\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            transition={{ duration: 0.2 }}\r\n            // Only add swipe handlers for mobile devices\r\n            onTouchStart={isMobileDevice ? (e) => {\r\n              // Don't initialize swipe if user is interacting with text (potential copy operation)\r\n              if (window.getSelection()?.toString()) {\r\n                return;\r\n              }\r\n              setSwipeStartX(e.touches[0].clientX);\r\n              setSwipeDirection(null);\r\n            } : undefined}\r\n            onTouchMove={isMobileDevice ? (e) => {\r\n              if (swipeStartX === null) return;\r\n              \r\n              // Don't process swipe if user is selecting text\r\n              if (window.getSelection()?.toString()) {\r\n                setSwipeStartX(null);\r\n                return;\r\n              }\r\n              \r\n              const currentX = e.touches[0].clientX;\r\n              const diff = currentX - swipeStartX;\r\n              \r\n              // Check if the note is locked before allowing swipe\r\n              const allNotesArray = [...pinnedNotes, ...allNotes];\r\n              const nextNote = diff < 0 ? allNotesArray[currentNoteIndex + 1] : allNotesArray[currentNoteIndex - 1];\r\n              if (nextNote?.locked) {\r\n                setSwipeStartX(null);\r\n                return;\r\n              }\r\n              \r\n              // Increased threshold for swipe detection to avoid accidental swipes\r\n              if (Math.abs(diff) > 20) {\r\n                const newDirection = diff > 0 ? 'right' : 'left';\r\n                if (swipeDirection !== newDirection) {\r\n                  setSwipeDirection(newDirection);\r\n                }\r\n              }\r\n            } : undefined}\r\n            onTouchEnd={isMobileDevice ? (e) => {\r\n              if (swipeStartX === null || swipeDirection === null) return;\r\n              \r\n              // Don't complete swipe if user has selected text (copy operation)\r\n              if (window.getSelection()?.toString()) {\r\n                setSwipeStartX(null);\r\n                setSwipeDirection(null);\r\n                return;\r\n              }\r\n              \r\n              const endX = e.changedTouches[0].clientX;\r\n              const diff = endX - swipeStartX;\r\n              \r\n              // Check if the note is locked before allowing swipe\r\n              const allNotesArray = [...pinnedNotes, ...allNotes];\r\n              const nextNote = diff > 0 ? allNotesArray[currentNoteIndex - 1] : allNotesArray[currentNoteIndex + 1];\r\n              if (nextNote?.locked) {\r\n                setSwipeStartX(null);\r\n                setSwipeDirection(null);\r\n                return;\r\n              }\r\n              \r\n              // Increased minimum swipe distance for better differentiation\r\n              if (Math.abs(diff) > 80) { // Increased from 50 to 80\r\n                if (swipeDirection === 'right') {\r\n                  navigateToPrevNote(); // Right swipe navigates to previous note\r\n                } else {\r\n                  navigateToNextNote(); // Left swipe navigates to next note\r\n                }\r\n              }\r\n              \r\n              setSwipeStartX(null);\r\n              setSwipeDirection(null);\r\n            } : undefined}\r\n            // Remove mouse-based swipes for desktop completely\r\n            onMouseDown={undefined}\r\n            onMouseMove={undefined}\r\n            onMouseUp={undefined}\r\n            style={{\r\n              cursor: 'auto' // Always use default cursor for web users\r\n            }}\r\n          >\r\n            <div \r\n              className=\"h-full w-full rounded-lg backdrop-blur-sm bg-black/10 relative\"\r\n              style={{ \r\n                touchAction: 'pan-y',\r\n                boxShadow: '0 8px 32px rgba(0, 0, 0, 0.2), inset 0 0 0 1px rgba(255, 255, 255, 0.1)',\r\n                border: '1px solid rgba(255, 255, 255, 0.05)',\r\n                backdropFilter: 'blur(8px)',\r\n                WebkitBackdropFilter: 'blur(8px)',\r\n                overflow: 'hidden',\r\n                userSelect: 'text' // Explicitly allow text selection\r\n              }}\r\n            >\r\n              {/* Remove left and right edge indicators */}\r\n              \r\n              <motion.div \r\n                ref={noteContentRef}\r\n                className=\"h-full w-full overflow-auto scrollbar-subtle relative p-6\"\r\n                style={{ \r\n                  overscrollBehavior: 'contain', // Prevent pull-to-refresh and bounce effects\r\n                  maxHeight: '100%',  // Make sure content stays within the container height\r\n                  touchAction: 'pan-y', // Allow vertical scrolling only\r\n                  pointerEvents: 'auto', // Ensure the component captures all pointer events\r\n                  userSelect: 'text' // Explicitly allow text selection\r\n                }}\r\n              >\r\n                {/* Remove swipe hint animation */}\r\n                \r\n                <motion.div \r\n                  className=\"flex flex-col\"\r\n                  variants={containerVariants}\r\n                  initial=\"hidden\"\r\n                  animate=\"show\"\r\n                >\r\n                  <motion.div \r\n                    className=\"flex flex-col\"\r\n                    variants={itemVariants}\r\n                  >\r\n                    <div className=\"flex justify-between items-start mb-2\">\r\n                      <h2 className=\"text-white text-lg font-medium\">\r\n                        {selectedNote?.title}\r\n                      </h2>\r\n                      <span className=\"text-[14px] text-white/60 ml-2 mt-1\">\r\n                        {getRelativeDate(selectedNote?.date || new Date().toLocaleDateString('en-US', { month: '2-digit', day: '2-digit', year: '2-digit' }))}\r\n                      </span>\r\n                    </div>\r\n                    \r\n                    {/* Show full content without preview/expand */}\r\n                    <motion.div \r\n                      className=\"text-white/90 text-base leading-relaxed whitespace-pre-line\"\r\n                      variants={itemVariants}\r\n                      style={{ \r\n                        whiteSpace: 'pre-line'\r\n                      }}\r\n                      dangerouslySetInnerHTML={{\r\n                        __html: selectedNote?.content\r\n                          .replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, (_, text, url) => {\r\n                            // Check if this is an internal note link\r\n                            if (url.startsWith('note:')) {\r\n                              const noteId = parseInt(url.substring(5));\r\n                              // Special case for Kineship note (id: 2) when opened from Hello World note (id: 1)\r\n                              if (noteId === 2 && selectedNote?.id === 1) {\r\n                                return `<a href=\"javascript:void(0)\" class=\"text-white underline decoration-white/50 hover:decoration-white/90 transition-all\" onclick=\"(function(e) { \r\n                                  e.stopPropagation(); \r\n                                  localStorage.setItem('openedKineshipFromHelloWorld', 'true');\r\n                                  window.openNoteWithId(${noteId});\r\n                                })(event)\">${text}</a>`;\r\n                              } else {\r\n                                return `<a href=\"javascript:void(0)\" class=\"text-white underline decoration-white/50 hover:decoration-white/90 transition-all\" onclick=\"(function(e) { \r\n                                  e.stopPropagation(); \r\n                                  window.openNoteWithId(${noteId});\r\n                                })(event)\">${text}</a>`;\r\n                              }\r\n                            }\r\n                            \r\n                            // Check if this is a video link\r\n                            if (url.startsWith('video:')) {\r\n                              const videoUrl = url.substring(6);\r\n                              return `<a href=\"javascript:void(0)\" class=\"text-white underline decoration-white/50 hover:decoration-white/90 transition-all\" onclick=\"(function(e) { \r\n                                e.stopPropagation(); \r\n                                window.handleVideoLink('${videoUrl}');\r\n                              })(event)\">${text}</a>`;\r\n                            }\r\n                            \r\n                            // Check if this is an app link\r\n                            if (url.startsWith('app:')) {\r\n                              const appId = url.substring(4);\r\n                              return `<a href=\"javascript:void(0)\" class=\"text-white underline decoration-white/50 hover:decoration-white/90 transition-all\" onclick=\"(function(e) { \r\n                                e.stopPropagation(); \r\n                                window.handleAppClick('${appId}');\r\n                              })(event)\">${text}</a>`;\r\n                            }\r\n                            \r\n                            // External link\r\n                            return `<a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"text-white underline decoration-white/50 hover:decoration-white/90 transition-all\" onclick=\"event.stopPropagation()\">${text}</a>`;\r\n                          })\r\n                          .replace(/(__[^_]+__)/g, (_, part) => {\r\n                            // Process underlined sections\r\n                            return `<span class=\"underline decoration-white/90\">${part.slice(2, -2)}</span>`;\r\n                          })\r\n                      }}\r\n                    />\r\n                  </motion.div>\r\n                </motion.div>\r\n                \r\n                {/* Pagination dots - with smooth fade in/out */}\r\n                <AnimatePresence>\r\n                  {showDots && (\r\n                    <motion.div \r\n                      className=\"flex items-center justify-center mt-4 mb-2 py-2 space-x-2\"\r\n                      initial={{ opacity: 0 }}\r\n                      animate={{ opacity: 1 }}\r\n                      exit={{ opacity: 0 }}\r\n                      transition={{ duration: 0.5, ease: \"easeInOut\" }}\r\n                    >\r\n                      <div\r\n                        className=\"h-[6px] w-[6px] rounded-full bg-white/40 transition-all duration-200 cursor-pointer hover:bg-white/60\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          navigateToPrevNote();\r\n                        }}\r\n                      />\r\n                      <div className=\"h-[6px] w-[6px] rounded-full bg-white transition-all duration-200\" />\r\n                      <div\r\n                        className=\"h-[6px] w-[6px] rounded-full bg-white/40 transition-all duration-200 cursor-pointer hover:bg-white/60\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          navigateToNextNote();\r\n                        }}\r\n                      />\r\n                    </motion.div>\r\n                  )}\r\n                </AnimatePresence>\r\n              </motion.div>\r\n            </div>\r\n          </motion.div>\r\n        ) : (\r\n          <motion.div \r\n            key=\"note-list\"\r\n            className=\"h-full w-full\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            transition={{ duration: 0.2 }}\r\n          >\r\n            <div className=\"h-full overflow-y-auto scrollbar-subtle\">\r\n              <div className=\"space-y-3 p-6\">\r\n                {/* Pinned notes section */}\r\n                {pinnedNotes.length > 0 && (\r\n                  <div>\r\n                    <h2 className=\"text-white/60 text-[14px] font-medium uppercase tracking-wider mb-2 px-2 flex items-center\">\r\n                      <PinIcon />\r\n                      Pinned\r\n                    </h2>\r\n                    <div className=\"space-y-0.5\">\r\n                      {pinnedNotes.map((note, index) => (\r\n                        <motion.div \r\n                          key={`pinned-${note.id}`}\r\n                          className=\"flex group px-1 py-0.5 rounded-md hover:bg-white/5 active:bg-white/10 relative\"\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            createTactileEffect();\r\n                            handleNoteClick(note);\r\n                          }}\r\n                          whileHover={{ scale: 1.01 }}\r\n                          whileTap={{ scale: 0.98 }}\r\n                          transition={{ duration: 0.2 }}\r\n                        >\r\n                          <div className=\"w-5 h-5 flex-shrink-0 flex items-center justify-center text-white/50\">\r\n                            <motion.div\r\n                              variants={chevronVariants}\r\n                              initial=\"initial\"\r\n                              whileHover=\"hover\"\r\n                              animate={index === 0 && note.title.includes(\"hello world\") && !hasInteracted ? chevronControls : undefined}\r\n                            >\r\n                              <ChevronRight size={16} className=\"group-hover:text-white/70 transition-colors duration-200\" />\r\n                            </motion.div>\r\n                          </div>\r\n                          <div className=\"ml-1 flex-1 flex justify-between items-center\">\r\n                            <div className=\"flex-1 pr-3\">\r\n                              <h3 className=\"text-base font-normal text-white/90 break-words group-hover:text-white transition-colors duration-200\">\r\n                                {note.title}\r\n                              </h3>\r\n                            </div>\r\n                            <div className=\"flex-shrink-0 flex items-center\">\r\n                              <span className={`text-[14px] ${note.locked ? 'text-white/50' : 'text-white/50'} whitespace-nowrap`}>\r\n                                {note.locked ? <Lock size={16} className=\"text-white/50\" /> : getRelativeDate(note.date)}\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                          {shouldShowPulsingDot(note.id) && (\r\n                            <div \r\n                              className=\"absolute -right-1 top-1/3 -translate-y-1/2\" \r\n                            >\r\n                              <motion.div \r\n                                className=\"w-2 h-2 rounded-full bg-white/70\" \r\n                                initial={{ opacity: 0.7 }}\r\n                                animate={{ \r\n                                  opacity: [0.5, 0.9, 0.5],\r\n                                  scale: [1, 1.2, 1]\r\n                                }}\r\n                                transition={{ \r\n                                  repeat: Infinity, \r\n                                  repeatType: \"reverse\", \r\n                                  duration: 1.5,\r\n                                  repeatDelay: 1\r\n                                }}\r\n                              />\r\n                            </div>\r\n                          )}\r\n                        </motion.div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* All notes section */}\r\n                {allNotes.length > 0 && (\r\n                  <div>\r\n                    <h2 className=\"text-white/60 text-[14px] font-medium uppercase tracking-wider mb-2 px-2\">\r\n                      All\r\n                    </h2>\r\n                    <div className=\"space-y-0.5\">\r\n                      {allNotes.map((note) => (\r\n                        <motion.div \r\n                          key={`all-${note.id}`}\r\n                          className=\"flex group px-1 py-0.5 rounded-md relative\"\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            if (!note.locked) {\r\n                              createTactileEffect();\r\n                              handleNoteClick(note);\r\n                            }\r\n                          }}\r\n                          whileHover={{ scale: note.locked ? 1 : 1.01 }}\r\n                          whileTap={{ scale: note.locked ? 1 : 0.98 }}\r\n                          transition={{ duration: 0.2 }}\r\n                        >\r\n                          <div className=\"w-5 h-5 flex-shrink-0 flex items-center justify-center text-white/50\">\r\n                            <motion.div\r\n                              variants={chevronVariants}\r\n                              initial=\"initial\"\r\n                              whileHover=\"hover\"\r\n                            >\r\n                              <ChevronRight size={16} className=\"group-hover:text-white/70 transition-colors duration-200\" />\r\n                            </motion.div>\r\n                          </div>\r\n                          <div className=\"ml-1 flex-1 flex justify-between items-center\">\r\n                            <div className=\"flex-1 pr-3\">\r\n                              <h3 className={`text-base font-normal ${note.locked ? 'text-white/60' : 'text-white/90'} break-words transition-colors duration-200`}>\r\n                                {note.title}\r\n                              </h3>\r\n                            </div>\r\n                            <div className=\"flex-shrink-0 flex items-center\">\r\n                              <span className={`text-[14px] ${note.locked ? 'text-white/50' : 'text-white/50'} whitespace-nowrap`}>\r\n                                {note.locked ? <Lock size={16} className=\"text-white/50\" /> : getRelativeDate(note.date)}\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                          {shouldShowPulsingDot(note.id) && (\r\n                            <div \r\n                              className=\"absolute -right-1 top-1/3 -translate-y-1/2\" \r\n                            >\r\n                              <motion.div \r\n                                className=\"w-2 h-2 rounded-full bg-white/70\" \r\n                                initial={{ opacity: 0.7 }}\r\n                                animate={{ \r\n                                  opacity: [0.5, 0.9, 0.5],\r\n                                  scale: [1, 1.2, 1]\r\n                                }}\r\n                                transition={{ \r\n                                  repeat: Infinity, \r\n                                  repeatType: \"reverse\", \r\n                                  duration: 1.5,\r\n                                  repeatDelay: 1\r\n                                }}\r\n                              />\r\n                            </div>\r\n                          )}\r\n                        </motion.div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Video player overlay */}\r\n      <AnimatePresence>\r\n        {videoUrl && (\r\n          <VideoPlayerOverlay \r\n            videoUrl={videoUrl} \r\n            onClose={closeVideoPlayer} \r\n          />\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n};","import React, { useState, useEffect } from 'react';\nimport type { AppScreenProps } from '../types';\nimport { motion, useReducedMotion } from 'framer-motion';\nimport { Send } from 'lucide-react';\nimport { createTactileEffect } from '../App';\n\ntype SocialApp = {\n  name: string;\n  icon: React.ReactNode | string;\n  url: string;\n  position: number;\n  isCustomIcon?: boolean;\n  customStyles?: string;\n};\n\nexport const SocialsScreen: React.FC<AppScreenProps> = () => {\n  const prefersReducedMotion = useReducedMotion();\n  const [randomizedSocials, setRandomizedSocials] = useState<SocialApp[]>([]);\n  \n  const socials: SocialApp[] = [\n    {\n      name: \"strava\",\n      icon: \"./icons/apps/strava.png\",\n      url: \"https://strava.app.link/PzFPfOvKpSb\",\n      position: 1,\n      isCustomIcon: true\n    },\n    {\n      name: \"instagram\",\n      icon: \"./icons/apps/instagram.png\",\n      url: \"https://instagram.com/fareehasala\",\n      position: 2,\n      isCustomIcon: true\n    },\n    {\n      name: \"email\",\n      icon: <Send className=\"w-7 h-7 text-white/90\" strokeWidth={1.5} />,\n      url: \"mailto:fareeha_s@icloud.com\",\n      position: 3,\n      customStyles: \"bg-white/15 backdrop-blur-lg border border-white/20\"\n    },\n    {\n      name: \"empty1\",\n      icon: null,\n      url: \"#\",\n      position: 4\n    },\n    {\n      name: \"empty2\",\n      icon: null,\n      url: \"#\",\n      position: 5\n    },\n    {\n      name: \"kineship\",\n      icon: \"./icons/apps/kineship.png\",\n      url: \"https://kineship.com\",\n      position: 6,\n      isCustomIcon: true\n    },\n    {\n      name: \"retro\",\n      icon: \"./icons/apps/retro.jpg\",\n      url: \"https://retro.app/@fareeha\",\n      position: 7,\n      isCustomIcon: true\n    },\n    {\n      name: \"airbuds\",\n      icon: \"./icons/apps/airbuds.png\",\n      url: \"https://i.airbuds.fm/fareehas/pC4Nm0VR4i\",\n      position: 8,\n      isCustomIcon: true\n    },\n    {\n      name: \"corner\",\n      icon: \"./icons/apps/corner.jpg\",\n      url: \"https://www.corner.inc/fareeha\",\n      position: 9,\n      isCustomIcon: true\n    }\n  ];\n\n  // Track whether this is the first render\n  const [isFirstRender, setIsFirstRender] = useState(true);\n\n  // Randomize social app positions after the first render\n  useEffect(() => {\n    // Skip randomization on first render to show aesthetic default layout\n    if (isFirstRender) {\n      setIsFirstRender(false);\n      setRandomizedSocials([...socials]);\n      return;\n    }\n\n    // Create a copy of the socials array\n    let socialsCopy = [...socials];\n    \n    // Find and remove the fixed position apps (email and corner)\n    const emailApp = socialsCopy.find(app => app.name === \"email\");\n    const cornerApp = socialsCopy.find(app => app.name === \"corner\");\n    socialsCopy = socialsCopy.filter(app => app.name !== \"email\" && app.name !== \"corner\");\n    \n    // Determine corner position for Corner app\n    const cornerPositions = [1, 3, 7, 9];\n    let availableCorners = cornerPositions.filter(pos => pos !== 3); // Remove position 3 as it's reserved for email\n    const randomCornerPosition = availableCorners[Math.floor(Math.random() * availableCorners.length)];\n    \n    // Create an array of available positions (excluding the chosen corner position and email position)\n    const availablePositions = [1, 2, 4, 5, 6, 7, 8, 9].filter(\n      pos => pos !== 3 && pos !== randomCornerPosition\n    );\n    \n    // Shuffle the available positions\n    const shuffledPositions = [...availablePositions].sort(() => Math.random() - 0.5);\n    \n    // Assign new random positions to each app\n    socialsCopy.forEach((app, index) => {\n      app.position = shuffledPositions[index];\n    });\n    \n    // Add back the fixed position apps\n    if (emailApp) socialsCopy.push(emailApp);\n    if (cornerApp) {\n      cornerApp.position = randomCornerPosition;\n      socialsCopy.push(cornerApp);\n    }\n    \n    // Sort by position to ensure correct rendering order\n    socialsCopy.sort((a, b) => a.position - b.position);\n    \n    // Update state with randomized socials\n    setRandomizedSocials(socialsCopy);\n  }, [isFirstRender]); // Only depend on isFirstRender\n\n  // Apple-like spring animation\n  const springTransition = {\n    type: \"spring\",\n    damping: 30,\n    stiffness: 400,\n    mass: 0.8,\n  };\n\n  // Animation variants for staggered entrance\n  const containerVariants = {\n    hidden: { opacity: 0 },\n    show: {\n      opacity: 1,\n      transition: {\n        staggerChildren: 0,\n        delayChildren: 0.05\n      }\n    }\n  };\n\n  const itemVariants = {\n    hidden: { opacity: 0, y: 10, scale: 0.8 },\n    show: { \n      opacity: 1, \n      y: 0, \n      scale: 1,\n      transition: {\n        type: \"spring\",\n        stiffness: 350,\n        damping: 25,\n        duration: 0.25\n      }\n    }\n  };\n\n  // Common shadow style for all icons\n  const iconShadowStyle = \"shadow-lg hover:shadow-xl transition-shadow\";\n  \n  // Common 3D effect style for all icons\n  const icon3DStyle = \"transform transition-transform will-change-transform\";\n\n  return (\n    <motion.div \n      className=\"flex flex-col justify-center items-center h-full w-full\"\n      variants={containerVariants}\n      initial=\"hidden\"\n      animate=\"show\"\n      onClick={(e) => e.stopPropagation()}\n    >\n      <div className=\"grid grid-cols-3 grid-rows-3 gap-6 mx-auto\">\n        {(randomizedSocials.length > 0 ? randomizedSocials : socials).map((social, index) => {\n          // If there's no icon, render a placeholder div instead of a link\n          if (!social.icon) {\n            return (\n              <motion.div\n                key={index}\n                className=\"w-[60px] h-[60px]\" // Just takes space but not interactive\n                variants={itemVariants}\n              />\n            );\n          }\n          \n          // For items with icons, render the clickable links\n          return (\n            <motion.a\n              key={index}\n              href={social.url}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              whileHover={{ scale: 1.05, y: -2 }}\n              whileTap={{ scale: 0.95, y: 2 }}\n              transition={{\n                ...springTransition,\n                duration: prefersReducedMotion ? 0 : undefined\n              }}\n              className=\"flex items-center justify-center will-change-transform\"\n              onClick={(e) => {\n                e.stopPropagation();\n                createTactileEffect();\n              }}\n              variants={itemVariants}\n              style={{ \n                willChange: 'transform, opacity'\n              }}\n            >\n              {social.customStyles ? (\n                <motion.div\n                  className={`w-[60px] h-[60px] rounded-[14px] flex items-center justify-center ${social.customStyles} ${iconShadowStyle} ${icon3DStyle}`}\n                  whileHover={{ \n                    boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(255, 255, 255, 0.1) inset\" \n                  }}\n                  transition={springTransition}\n                >\n                  {social.icon}\n                </motion.div>\n              ) : social.isCustomIcon ? (\n                <motion.div\n                  className={`w-[60px] h-[60px] rounded-[14px] overflow-hidden border border-white/20 ${iconShadowStyle} ${icon3DStyle}`}\n                  whileHover={{ \n                    boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(255, 255, 255, 0.1) inset\" \n                  }}\n                  transition={springTransition}\n                >\n                  <img \n                    src={social.icon as string} \n                    alt={social.name} \n                    className=\"w-full h-full object-cover\" \n                  />\n                </motion.div>\n              ) : (\n                <motion.div\n                  className={`w-[60px] h-[60px] rounded-[14px] bg-white/15 backdrop-blur-md border border-white/20 flex items-center justify-center ${iconShadowStyle} ${icon3DStyle}`}\n                  whileHover={{ \n                    boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(255, 255, 255, 0.1) inset\" \n                  }}\n                  transition={springTransition}\n                >\n                  {social.icon}\n                </motion.div>\n              )}\n            </motion.a>\n          );\n        })}\n      </div>\n    </motion.div>\n  );\n};","import React, { useState, useEffect, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Shirt, Utensils } from 'lucide-react';\nimport { EventItem } from '../data/events';\n\ntype PartifulEventProps = {\n  onBack: () => void;\n  eventData?: EventItem;\n  onScrollToBottom?: () => void;\n};\n\nexport const PartifulEvent: React.FC<PartifulEventProps> = ({ onBack, eventData, onScrollToBottom }) => {\n  // State to track if user has scrolled\n  const [hasScrolled, setHasScrolled] = useState(false);\n  // State to track if additional content is expanded\n  const [isExpanded, setIsExpanded] = useState(false);\n  const containerRef = useRef<HTMLDivElement>(null);\n  \n  // Default event data if none provided\n  const eventTitle = eventData?.title || \"mental static\";\n  const attendeeCount = eventData?.attendees || 35;\n  const eventDate = eventData?.date || \"31/03/25\";\n  const eventTime = eventData?.time || \"7:30pm\";\n  const descriptionText = eventData?.description || `quick hits of obscure knowledge ðŸ’š\n\nbring that random wikipedia rabbithole only you seem to know about. weird nature stuff, unsolved mysteries, watershed moments, conspiracy theories, crazy undercover govt ops, cool people etc etc ðŸŒ€ðŸŒ€ðŸŒ€\n\nwiki page will go up on a projector. exactly two mins for you to brief us. +1 question from the rest of us\n\nlimited capacity! tell us what you'd share ðŸ«¶ðŸ¼`;\n  const spotifyLink = eventData?.spotifyLink || \"https://open.spotify.com/track/0LSLM0zuWRkEYemF7JcfEE?si=EhnHw1mWS1OOC9joykQgOA\";\n  const spotifyLyrics = eventData?.spotifyLyrics || \"surf it scroll it pause it click it cross it crack it ssswitch update it\";\n  \n  // Parse the date string (format: DD/MM/YY)\n  const parseDateString = (dateStr: string) => {\n    const [day, month, year] = dateStr.split('/').map(Number);\n    return new Date(2000 + year, month - 1, day);\n  };\n  \n  const eventDateTime = parseDateString(eventDate);\n  \n  // Format date for display\n  const formattedDate = new Intl.DateTimeFormat('en-US', {\n    weekday: 'long',\n    month: 'short',\n    day: 'numeric'\n  }).format(eventDateTime);\n  \n  // Add useEffect to handle sidebar visibility and scroll tracking\n  useEffect(() => {\n    // Add a class to the body to handle sidebar visibility\n    document.body.classList.add('partiful-event-active');\n    \n    // Add scroll event listener\n    const handleScroll = () => {\n      if (containerRef.current) {\n        const { scrollTop, scrollHeight, clientHeight } = containerRef.current;\n        \n        // Track if user has scrolled more than 50px\n        if (scrollTop > 50) {\n          setHasScrolled(true);\n        }\n        \n        // Check if user has scrolled near the bottom (within 30px)\n        const isAtBottom = scrollHeight - scrollTop - clientHeight < 30;\n        if (isAtBottom && onScrollToBottom) {\n          onScrollToBottom();\n        }\n      }\n    };\n    \n    // Add event listener to the container\n    const currentContainer = containerRef.current;\n    if (currentContainer) {\n      currentContainer.addEventListener('scroll', handleScroll);\n    }\n    \n    // Also listen for window scroll (fallback)\n    window.addEventListener('scroll', handleScroll);\n    \n    // Clean up function to remove the class when component unmounts\n    return () => {\n      document.body.classList.remove('partiful-event-active');\n      if (currentContainer) {\n        currentContainer.removeEventListener('scroll', handleScroll);\n      }\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [onScrollToBottom]);\n\n  // Toggle expanded state\n  const toggleExpanded = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    setIsExpanded(prev => !prev);\n  };\n\n  // Handle back button click\n  const handleBackClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    onBack();\n  };\n\n  // Function to prevent any clicks from bubbling up but allow links to work\n  const preventBubbling = (e: React.MouseEvent) => {\n    // Skip if the target is an anchor tag or inside an anchor tag\n    if ((e.target as HTMLElement).tagName === 'A' || \n        (e.target as HTMLElement).closest('a')) {\n      return;\n    }\n    e.stopPropagation();\n  };\n\n  // Function to prevent touch events from bubbling up\n  const preventTouchBubbling = (e: React.TouchEvent) => {\n    e.stopPropagation();\n  };\n\n  // Host profile photos with smaller size to match screenshot\n  const hostPhotos = eventData?.hosts || [\n    { id: 1, image: '/icons/hosts/fareeha.jpg' },\n    { id: 2, image: '/icons/hosts/1-b975ea56.jpg' },\n    { id: 3, image: '/icons/hosts/2-b975ea56.jpg' },\n  ];\n  \n  // Use the actual attendee count from the event data\n  const approvedCount = eventData?.attendees || 12;\n  const attendeePhotos = [\n    { id: 1, image: 'https://i.pravatar.cc/100?img=1' },\n    { id: 2, image: 'https://i.pravatar.cc/100?img=2' },\n    { id: 3, image: 'https://i.pravatar.cc/100?img=3' },\n    { id: 4, image: 'https://i.pravatar.cc/100?img=4' },\n  ];\n  \n  // Function to handle external link clicks, prevents event propagation\n  const handleExternalLinkClick = (e: React.MouseEvent) => {\n    e.stopPropagation(); // Stop event from bubbling up\n    // Do not prevent default behavior so the link will work\n  };\n  \n  // Animation variants for staggered text\n  const textContainerVariants = {\n    hidden: { opacity: 0 },\n    visible: {\n      opacity: 1,\n      transition: {\n        delayChildren: 0.2,\n        staggerChildren: 0.02\n      }\n    }\n  };\n\n  const wordVariants = {\n    hidden: { opacity: 0, y: 10 },\n    visible: {\n      opacity: 1,\n      y: 0,\n      transition: {\n        type: \"spring\",\n        stiffness: 350,\n        damping: 30\n      }\n    }\n  };\n\n  // Variants for the expanded content animation\n  const expandedContentVariants = {\n    hidden: { \n      height: 0, \n      opacity: 0 \n    },\n    visible: { \n      height: 'auto', \n      opacity: 1,\n      transition: {\n        height: {\n          type: \"spring\",\n          stiffness: 300,\n          damping: 30,\n          duration: 0.3\n        },\n        opacity: {\n          duration: 0.2,\n          delay: 0.1\n        }\n      }\n    }\n  };\n\n  // Variants for the arrow animation\n  const arrowVariants = {\n    initial: { \n      rotate: 0,\n      y: [0, 3, 0],\n      transition: {\n        y: {\n          repeat: Infinity,\n          repeatType: \"reverse\",\n          duration: 1.5,\n          ease: \"easeInOut\"\n        }\n      }\n    },\n    expanded: { \n      rotate: 180,\n      y: 0,\n      transition: {\n        rotate: {\n          type: \"spring\",\n          stiffness: 300,\n          damping: 25\n        }\n      }\n    }\n  };\n\n  // First split by newlines to preserve them, then split each line by spaces\n  const descriptionLines = descriptionText.split('\\n').map(line => line.split(' '));\n  \n  // Flatten the array but keep track of line breaks\n  const descriptionWords = descriptionLines.reduce((acc, line, lineIndex) => {\n    if (lineIndex > 0) {\n      acc.push('\\n'); // Add line break between lines\n    }\n    return acc.concat(line);\n  }, [] as string[]);\n  \n  // Function to render icon with text\n  const renderIconWithText = (text: string) => {\n    if (text.startsWith('ðŸ‘•')) {\n      return (\n        <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\n          <Shirt size={16} color=\"white\" />\n          <span>{text.replace('ðŸ‘•', '').trim()}</span>\n        </div>\n      );\n    } else if (text.startsWith('ðŸ½ï¸')) {\n      return (\n        <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\n          <Utensils size={16} color=\"white\" />\n          <span>{text.replace('ðŸ½ï¸', '').trim()}</span>\n        </div>\n      );\n    }\n    return text;\n  };\n\n  return (\n    // Root container with height and width - capture and stop all events\n    <div \n      className=\"h-full w-full flex flex-col\" \n      onClick={preventBubbling}\n      onMouseDown={preventBubbling}\n      onTouchStart={preventTouchBubbling}\n      onTouchMove={preventTouchBubbling}\n      onTouchEnd={preventTouchBubbling}\n      style={{ \n        touchAction: 'pan-y',\n        backgroundColor: eventTitle === \"strawberry hour\" ? 'rgba(0, 32, 63, 0.5)' : \n                         eventTitle === \"consumer social\" ? 'rgba(10, 20, 40, 0.5)' : \n                         eventTitle === \"Watercolour\" ? 'rgba(147, 112, 142, 0.7)' :\n                         eventTitle === \"threading in\" ? 'rgba(35, 25, 15, 0.5)' :\n                         eventTitle === \"out of office\" ? 'rgba(144, 190, 109, 0.5)' :\n                         eventTitle === \"blood moon rising.\" ? 'rgba(20, 20, 20, 0.5)' :\n                         eventTitle === \"Scrumptious\" ? 'rgba(77, 166, 255, 0.5)' :\n                         'rgba(14, 43, 23, 0.5)', // Default color for mental static\n        boxShadow: '0 8px 32px rgba(0, 0, 0, 0.2), inset 0 0 0 1px rgba(255, 255, 255, 0.1)',\n        border: '1px solid rgba(255, 255, 255, 0.05)',\n        borderRadius: '8px',\n        backdropFilter: 'blur(8px)',\n        WebkitBackdropFilter: 'blur(8px)',\n        overflow: 'hidden'\n      }}\n    >\n      {/* Main content container - no drag or swipe functionality */}\n      <motion.div \n        ref={containerRef}\n        className=\"h-full w-full overflow-auto scrollbar-subtle relative\"\n        style={{ \n          fontFamily: 'var(--font-sans)',\n          overscrollBehavior: 'contain', // Prevent pull-to-refresh and bounce effects\n          maxHeight: '100%',  // Make sure content stays within the container height\n          touchAction: 'pan-y', // Allow vertical scrolling only\n          pointerEvents: 'auto', // Ensure the component captures all pointer events\n          padding: '24px'\n        }}\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ duration: 0.3 }}\n        drag={false} // Explicitly disable drag on this component\n      >\n        {/* Header title without extra margin */}\n        {eventTitle === \"blood moon rising.\" || eventTitle === \"consumer social\" ? (\n          <motion.div \n            initial={{ opacity: 0, y: -10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.4, ease: [0.22, 1, 0.36, 1] }}\n            style={{ \n              width: '100%',\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              marginBottom: '12px'\n            }}\n            data-event-type={eventTitle === \"blood moon rising.\" ? \"blood-moon-rising\" : \"consumer-social\"}\n          >\n            <h1 className={eventTitle === \"blood moon rising.\" ? \"blood-moon-title\" : \"blood-moon-title consumer-social-title\"} id={eventTitle === \"blood moon rising.\" ? \"blood-moon-title\" : \"consumer-social-title\"}>\n              {eventTitle === \"blood moon rising.\" ? \"blood moon rising.\" : \"consumer social.\"}\n            </h1>\n          </motion.div>\n        ) : (\n        <motion.h1 \n          className=\"ptf-l-PKzNy ptf-l-kz-X6 cGVq-y\" \n          initial={{ opacity: 0, y: -10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.4, ease: [0.22, 1, 0.36, 1] }}\n          style={{ \n            fontSize: '28px', \n            fontFamily: eventTitle === \"strawberry hour\" || eventTitle === \"threading in\" || eventTitle === \"Watercolour\" || eventTitle === \"Scrumptious\" ? 'Freight Display Pro, Didot, \"Bodoni MT\", \"Times New Roman\", serif' : 'Grotesk, -apple-system, BlinkMacSystemFont, Arial, sans-serif',\n            lineHeight: 1.1, \n            marginBottom: '12px', \n            color: 'white', \n            textAlign: 'center', \n            fontWeight: eventTitle === \"strawberry hour\" || eventTitle === \"threading in\" || eventTitle === \"Watercolour\" || eventTitle === \"Scrumptious\" ? 500 : 600,\n            letterSpacing: eventTitle === \"strawberry hour\" || eventTitle === \"threading in\" || eventTitle === \"Watercolour\" || eventTitle === \"Scrumptious\" ? '-0.03em' : '0.12em',\n            paddingTop: '0px',\n            textTransform: eventTitle === \"strawberry hour\" || eventTitle === \"out of office\" || eventTitle === \"threading in\" || eventTitle === \"Watercolour\" || eventTitle === \"Scrumptious\" ? 'none' : 'lowercase',\n            fontStretch: '150%',\n            fontStyle: 'normal',\n            whiteSpace: 'nowrap',\n            overflow: 'hidden'\n          }}\n        >\n          <span className=\"summary\" style={{ \n            fontStretch: 'expanded', \n            letterSpacing: eventTitle === \"strawberry hour\" || eventTitle === \"threading in\" || eventTitle === \"Watercolour\" || eventTitle === \"Scrumptious\" ? '-0.04em' : '0.08em' \n          }}>\n            {eventTitle === \"strawberry hour\" ? \"Strawberry hour.\" : \n             eventTitle === \"threading in\" ? \"threading in\" : \n             eventTitle === \"consumer social\" ? \"consumer social.\" : \n             eventTitle === \"Watercolour\" ? \"Watercolour.\" :\n             eventTitle === \"Scrumptious\" ? \"Scrumptious\" : eventTitle}\n          </span>\n        </motion.h1>\n        )}\n        \n        {/* Event image with square corners - expanded to match text width */}\n        <motion.div \n          className=\"w-full flex justify-center mb-3\"\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          transition={{ duration: 0.5, delay: 0.1, ease: [0.22, 1, 0.36, 1] }}\n        >\n          <div className=\"w-full overflow-hidden\">\n            <picture>\n              <source srcSet={eventData?.image?.webp || \"./images/partiful/ms-giphy.webp\"} type=\"image/webp\" />\n              <img \n                src={eventData?.image?.fallback || \"./images/partiful/ms-fallback.jpg\"} \n                alt={`${eventTitle} Event`} \n                className=\"w-full\" \n                style={{ objectFit: 'cover', maxHeight: '280px' }}\n              />\n            </picture>\n          </div>\n        </motion.div>\n        \n        {/* Date info moved back outside the card container */}\n        <motion.time \n          className=\"ptf-l-V4zs2 dtstart ptf-l-mXUGi\" \n          dateTime=\"2025-03-31T07:30:00.000-07:00\"\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.4, delay: 0.2, ease: [0.22, 1, 0.36, 1] }}\n        >\n          <div className=\"ptf-l-daxsj\">\n            <div>\n              <div className=\"ptf-l-EDGV-\" style={{ color: 'white', fontSize: '24px', fontWeight: 500, letterSpacing: '-0.01em' }}>{formattedDate}</div>\n              <div className=\"ptf-l-y64FO\" style={{ color: 'rgba(255,255,255,0.7)', fontSize: '18px', fontWeight: 425 }}>{eventTime}</div>\n            </div>\n          </div>\n        </motion.time>\n        \n        {/* Host profiles section - even smaller sizes */}\n        <motion.div \n          className=\"ptf-l-gFMtG\" \n          style={{ marginBottom: '18px', marginTop: '2px', overflow: 'hidden' }}\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.4, delay: 0.3, ease: [0.22, 1, 0.36, 1] }}\n        >\n          <div className=\"ptf-l-V5l2c ptf-l-42Hmr ptf-l-vmns4\" style={{ display: 'flex', alignItems: 'center', marginTop: '14px' }}>\n            <span className=\"ptf--7nAv ptf-l-02UEs\" style={{ marginRight: '6px', display: 'flex', alignItems: 'center' }}>\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M5 16L3 5L8.5 10L12 4L15.5 10L21 5L19 16H5Z\" stroke=\"white\" strokeWidth=\"1.5\" fill=\"none\"/>\n                <path d=\"M19 19H5M19 22H5M19 19V22M5 19V22\" stroke=\"white\" strokeWidth=\"1.5\"/>\n              </svg>\n            </span>\n            <span className=\"ptf-6n-N4 ptf-NNO7K ptf-l-tpQlB\" style={{ color: 'white', fontSize: '14px', fontWeight: 400 }}>Hosted by</span>\n            \n            <div className=\"ptf-l-STiwz ptf-l-cXv5O\" style={{ marginLeft: '6px', display: 'flex', overflow: 'hidden' }}>\n              {hostPhotos.map((host, index) => (\n                <div key={host.id} className=\"ptf-l-UZPE- ptf-l-QJYpB ptf-l-gEM83\" style={{ marginRight: index === hostPhotos.length - 1 ? '0' : '0px' }}>\n                  <div className=\"ptf-l-sb2bo\">\n                    <div className=\"ptf-l-gt1XK\" style={{ width: '26px', height: '26px', borderRadius: '50%', overflow: 'hidden', position: 'relative', pointerEvents: host.image.includes('fareeha') ? 'auto' : 'none' }}>\n                      {host.image.includes('fareeha') ? (\n                        <a \n                          href=\"https://partiful.com/u/AuiLl2hkaLeL1T2mjMyMomWhe092\"\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          onClick={handleExternalLinkClick}\n                          style={{ \n                            display: 'block', \n                            width: '100%', \n                            height: '100%',\n                            cursor: 'pointer',\n                            position: 'relative',\n                            zIndex: 10\n                          }}\n                        >\n                          <img \n                            className=\"ptf-l-YHgvF\" \n                            src={host.image} \n                            alt=\"Host\" \n                            width=\"26\" \n                            height=\"26\"\n                            style={{ objectFit: 'cover', width: '100%', height: '100%' }}\n                          />\n                          <span className=\"ptf-l--7nAv ptf-l-WCCTT ptf-l-Wcrf2\" style={{ position: 'absolute', bottom: '-1px', right: '-1px', color: '#5938e8', height: '10px', width: '10px' }}>\n                            <svg width=\"10\" height=\"10\" viewBox=\"0 0 24 24\" fill=\"#5938e8\" xmlns=\"http://www.w3.org/2000/svg\">\n                              <path d=\"M5 16L3 5L8.5 10L12 4L15.5 10L21 5L19 16H5Z\" />\n                            </svg>\n                          </span>\n                        </a>\n                      ) : (\n                        <>\n                          <img \n                            className=\"ptf-l-YHgvF\" \n                            src={host.image} \n                            alt=\"Host\" \n                            width=\"26\" \n                            height=\"26\"\n                            style={{ objectFit: 'cover', width: '100%', height: '100%' }}\n                          />\n                        </>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n          \n          {/* Music lyrics with Spotify link - smaller font */}\n          {spotifyLyrics && (eventTitle !== \"threading in\" && eventTitle !== \"Watercolour\" && eventTitle !== \"Scrumptious\" && eventTitle !== \"consumer social\") && (\n          <div className=\"ptf-l-V5l2c ptf-l-42Hmr\" style={{ display: 'flex', alignItems: 'flex-start', marginTop: '8px', marginBottom: '14px' }}>\n            <span className=\"ptf--7nAv ptf-l-02UEs ptf-l-Y-q9d\" style={{ marginRight: '6px', display: 'flex', alignItems: 'center' }}>\n              {eventTitle === \"blood moon rising.\" ? (\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M10.4545 13.5455C10.0455 13.9545 10.0455 14.5909 10.4545 15C10.8636 15.4091 11.5 15.4091 11.9091 15L14.5455 12.3636C15.3636 11.5455 15.3636 10.2273 14.5455 9.40909C13.7273 8.59091 12.4091 8.59091 11.5909 9.40909L8.59091 12.4091C7.36364 13.6364 7.36364 15.5909 8.59091 16.8182C9.81818 18.0455 11.7727 18.0455 13 16.8182L16 13.8182\" stroke=\"white\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                  <path d=\"M13.5455 10.4545C13.9545 10.0455 14.5909 10.0455 15 10.4545C15.4091 10.8636 15.4091 11.5 15 11.9091L12.3636 14.5455C11.5455 15.3636 10.2273 15.3636 9.40909 14.5455C8.59091 13.7273 8.59091 12.4091 9.40909 11.5909L12.4091 8.59091C13.6364 7.36364 15.5909 7.36364 16.8182 8.59091C18.0455 9.81818 18.0455 11.7727 16.8182 13L13.8182 16\" stroke=\"white\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                </svg>\n              ) : eventTitle === \"out of office\" ? (\n                <Utensils size={16} color=\"white\" />\n              ) : (\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M9 18V5L21 3V16\" stroke=\"white\" strokeWidth=\"1.5\" fill=\"none\"/>\n                  <circle cx=\"6\" cy=\"18\" r=\"3\" stroke=\"white\" strokeWidth=\"1.5\" fill=\"none\"/>\n                  <circle cx=\"18\" cy=\"16\" r=\"3\" stroke=\"white\" strokeWidth=\"1.5\" fill=\"none\"/>\n                </svg>\n              )}\n            </span>\n            <a \n              href={spotifyLink}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"ptf-l-5a8R- ptf-l-4Jj6a\"\n              style={{ color: '#E6F8C1', fontSize: '14px', fontWeight: 600 }}\n              onClick={handleExternalLinkClick}\n            >\n              {spotifyLyrics}\n            </a>\n          </div>\n          )}\n          \n          {/* Description text with staggered word animation */}\n          <motion.div\n            className=\"description-container\"\n            variants={textContainerVariants}\n            initial=\"hidden\"\n            animate=\"visible\"\n            style={{ \n              marginTop: spotifyLyrics && (eventTitle !== \"threading in\" && eventTitle !== \"Watercolour\" && eventTitle !== \"Scrumptious\" && eventTitle !== \"consumer social\") ? '0' : '20px', \n              marginBottom: '0' \n            }}\n          >\n            <div style={{ \n              fontSize: '14px',\n              lineHeight: '22.4px',\n              color: 'rgb(255, 255, 255)',\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '16px',\n              fontFamily: 'Lausanne, \"Helvetica Neue\", Helvetica, sans-serif',\n              textRendering: 'optimizeSpeed',\n              WebkitFontSmoothing: 'antialiased',\n              isolation: 'isolate'\n            }}>\n              {descriptionText.split('\\n').map((paragraph, index) => (\n                <p key={index} style={{ margin: 0, display: 'block', marginTop: index > 0 ? '-8px' : '0' }}>\n                  {renderIconWithText(paragraph)}\n                </p>\n              ))}\n            </div>\n        \n            {/* Approved attendees section with profile circles and centered badge - moved inside description container */}\n        <motion.div \n              className=\"ptf-l-gQnpk\" \n          style={{ \n                margin: '0',\n                marginTop: '12px',\n            position: 'relative',\n            display: 'flex',\n            alignItems: 'center',\n                minHeight: '65px',  // Increased from 50px to give more space\n                paddingBottom: '15px'  // Added padding at the bottom to ensure content doesn't cut off\n          }}\n          onClick={preventBubbling}\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.4, delay: 0.4, ease: [0.22, 1, 0.36, 1] }}\n        >\n          {/* Profile circles row */}\n          <div style={{ \n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'flex-start',\n            position: 'relative',\n            width: '100%',\n            paddingLeft: '0px',\n            paddingRight: '12px'\n          }}>\n            {[...Array(8)].map((_, index) => {\n              // Generate a colorScheme based on event ID for consistent but varied colors per event\n              const colorSchemes = [\n                // Blue-greens\n                [\n                  { bg: 'linear-gradient(135deg, #2C9292, #2196F3)', pattern: 'radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #41B3A3, #85CDCA)', pattern: 'radial-gradient(circle at 70% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #5CDB95, #379683)', pattern: 'radial-gradient(circle at 30% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #8EE4AF, #379683)', pattern: 'radial-gradient(circle at 70% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #05386B, #379683)', pattern: 'radial-gradient(circle at 50% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #3AAFA9, #2B7A78)', pattern: 'radial-gradient(circle at 30% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #5CDB95, #05386B)', pattern: 'radial-gradient(circle at 70% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #41B3A3, #2B7A78)', pattern: 'radial-gradient(circle at 50% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' }\n                ],\n                // Yellow-browns\n                [\n                  { bg: 'linear-gradient(135deg, #F9A826, #E76F51)', pattern: 'radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #E9C46A, #F4A261)', pattern: 'radial-gradient(circle at 70% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #E76F51, #D4A373)', pattern: 'radial-gradient(circle at 30% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FAEDCD, #D4A373)', pattern: 'radial-gradient(circle at 70% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #CCD5AE, #E9EDC9)', pattern: 'radial-gradient(circle at 50% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #F9A826, #CCD5AE)', pattern: 'radial-gradient(circle at 30% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #E9C46A, #D4A373)', pattern: 'radial-gradient(circle at 70% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #F4A261, #E76F51)', pattern: 'radial-gradient(circle at 50% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' }\n                ],\n                // Purples-pinks\n                [\n                    { bg: 'linear-gradient(135deg, #5871FF, #8257E5)', pattern: 'radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                    { bg: 'linear-gradient(135deg, #8257E5, #FF7EB3)', pattern: 'radial-gradient(circle at 70% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                    { bg: 'linear-gradient(135deg, #FF7EB3, #5CB6FF)', pattern: 'radial-gradient(circle at 30% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                    { bg: 'linear-gradient(135deg, #5CB6FF, #9F7AEA)', pattern: 'radial-gradient(circle at 70% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                    { bg: 'linear-gradient(135deg, #9F7AEA, #65D2FF)', pattern: 'radial-gradient(circle at 50% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                    { bg: 'linear-gradient(135deg, #65D2FF, #8257E5)', pattern: 'radial-gradient(circle at 30% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                    { bg: 'linear-gradient(135deg, #8257E5, #5871FF)', pattern: 'radial-gradient(circle at 70% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                    { bg: 'linear-gradient(135deg, #5871FF, #FF7EB3)', pattern: 'radial-gradient(circle at 50% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' }\n                ],\n                // Reds-oranges\n                [\n                  { bg: 'linear-gradient(135deg, #FF6B6B, #FFB347)', pattern: 'radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FF8E71, #FF5E5B)', pattern: 'radial-gradient(circle at 70% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FF5E5B, #FFB347)', pattern: 'radial-gradient(circle at 30% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FFB347, #FF8E71)', pattern: 'radial-gradient(circle at 70% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FF6B6B, #FF9770)', pattern: 'radial-gradient(circle at 50% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FF9770, #FFB347)', pattern: 'radial-gradient(circle at 30% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FFB347, #FF5E5B)', pattern: 'radial-gradient(circle at 70% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FF5E5B, #FF6B6B)', pattern: 'radial-gradient(circle at 50% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' }\n                ],\n                // Greens-yellows\n                [\n                  { bg: 'linear-gradient(135deg, #ADCF9F, #CED89E)', pattern: 'radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #CED89E, #FBEAAB)', pattern: 'radial-gradient(circle at 70% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FBEAAB, #76BA99)', pattern: 'radial-gradient(circle at 30% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #76BA99, #3C8DAD)', pattern: 'radial-gradient(circle at 70% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #3C8DAD, #ADCF9F)', pattern: 'radial-gradient(circle at 50% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #ADCF9F, #FBEAAB)', pattern: 'radial-gradient(circle at 30% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FBEAAB, #3C8DAD)', pattern: 'radial-gradient(circle at 70% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #3C8DAD, #76BA99)', pattern: 'radial-gradient(circle at 50% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' }\n                ]\n              ];\n              \n              // Collection of accent/wildcard colors that can be inserted into any scheme\n              const wildcardColors = [\n                { bg: 'linear-gradient(135deg, #FF4D6D, #FF9D8D)', pattern: 'radial-gradient(circle at 40% 40%, rgba(255,255,255,0.15) 0%, transparent 50%)' },\n                { bg: 'linear-gradient(135deg, #845EC2, #B39CD0)', pattern: 'radial-gradient(circle at 35% 35%, rgba(255,255,255,0.15) 0%, transparent 50%)' },\n                { bg: 'linear-gradient(135deg, #00C9A7, #1AC0C6)', pattern: 'radial-gradient(circle at 45% 45%, rgba(255,255,255,0.15) 0%, transparent 50%)' },\n                { bg: 'linear-gradient(135deg, #F39233, #FFBD69)', pattern: 'radial-gradient(circle at 30% 30%, rgba(255,255,255,0.15) 0%, transparent 50%)' },\n                { bg: 'linear-gradient(135deg, #4D8076, #84A9AC)', pattern: 'radial-gradient(circle at 50% 50%, rgba(255,255,255,0.15) 0%, transparent 50%)' },\n                { bg: 'linear-gradient(135deg, #3B429F, #3A8AC0)', pattern: 'radial-gradient(circle at 40% 40%, rgba(255,255,255,0.15) 0%, transparent 50%)' },\n                { bg: 'linear-gradient(135deg, #0D5C46, #329476)', pattern: 'radial-gradient(circle at 35% 35%, rgba(255,255,255,0.15) 0%, transparent 50%)' },\n                { bg: 'linear-gradient(135deg, #A12568, #FF7582)', pattern: 'radial-gradient(circle at 45% 45%, rgba(255,255,255,0.15) 0%, transparent 50%)' },\n              ];\n              \n              // Use the eventData.id to create a predictable but seemingly random scheme\n              // This ensures the same event always gets the same color scheme\n              const eventIdNum = eventData?.id ? parseInt(eventData.id.toString().slice(-1), 10) : 0;\n              const schemeIndex = eventIdNum % colorSchemes.length;\n              let colors = [...colorSchemes[schemeIndex]]; // Make a copy we can modify\n              \n              // Inject some randomness with wildcard circles\n              // Use the event id and index to create a deterministic but seemingly random selection\n              const shouldUseWildcard = (eventIdNum + index) % 3 === 0; // Every 3rd profile has a chance for a wildcard\n              \n              if (shouldUseWildcard) {\n                // Use a combination of eventId and index to select a consistent wildcard\n                const wildcardIndex = (eventIdNum + index) % wildcardColors.length;\n                // Replace the current color with a wildcard color\n                colors[index] = wildcardColors[wildcardIndex];\n              }\n              \n              // Add some variation in gradient direction for more diversity\n              const gradientDirections = ['135deg', '150deg', '120deg', '165deg', '105deg', '90deg'];\n              const directionIndex = (eventIdNum + index) % gradientDirections.length;\n              \n              // Extract color values from the gradient for manipulation\n              const bgGradient = colors[index].bg;\n              const colorMatches = bgGradient.match(/linear-gradient\\(\\d+deg,\\s*([^,]+),\\s*([^)]+)\\)/);\n              \n              if (colorMatches && colorMatches.length >= 3) {\n                const color1 = colorMatches[1].trim();\n                const color2 = colorMatches[2].trim();\n                \n                // Occasionally flip the gradient colors or adjust opacity for more variety\n                const shouldFlip = (eventIdNum + index) % 5 === 0;\n                const shouldAdjustOpacity = (eventIdNum + index + 1) % 4 === 0;\n                \n                if (shouldFlip) {\n                  colors[index].bg = `linear-gradient(${gradientDirections[directionIndex]}, ${color2}, ${color1})`;\n                } else if (shouldAdjustOpacity) {\n                  // Make one color slightly transparent for more subtle gradients\n                  const opacity = 0.8 + (index % 3) * 0.1; // Between 0.8 and 1.0\n                  colors[index].bg = `linear-gradient(${gradientDirections[directionIndex]}, ${color1}, ${color2.replace(')', `, ${opacity})`).replace('rgb', 'rgba')}`;\n                } else {\n                  // Just change the direction\n                  colors[index].bg = `linear-gradient(${gradientDirections[directionIndex]}, ${color1}, ${color2})`;\n                }\n              }\n                  \n                  // Add subtle animation delay based on index\n                  const animationDelay = `${index * 0.1}s`;\n                  \n              return (\n                    <motion.div \n                  key={index} \n                  style={{ \n                    width: '32px',\n                    height: '32px',\n                    borderRadius: '50%',\n                    position: 'relative',\n                    marginLeft: index === 0 ? '0' : '-8px',\n                    zIndex: 8 - index,\n                        border: '2px solid rgba(255, 255, 255, 0.3)',\n                        boxShadow: '0 2px 8px rgba(0,0,0,0.2), inset 0 0 0 1px rgba(255,255,255,0.1)',\n                        background: colors[index].bg,\n                        opacity: 0.85,\n                        overflow: 'hidden'\n                      }}\n                      initial={{ scale: 0.9, opacity: 0.7 }}\n                      animate={{ \n                        scale: [0.9, 1.05, 1],\n                        opacity: [0.7, 0.9, 0.85]\n                      }}\n                      transition={{ \n                        duration: 0.5, \n                        delay: parseFloat(animationDelay),\n                        ease: \"easeOut\"\n                      }}\n                    >\n                      {/* Pattern overlay - larger than the circle */}\n                      <div style={{\n                        position: 'absolute',\n                        top: '-50%',\n                        left: '-50%',\n                        width: '200%',\n                        height: '200%',\n                        background: colors[index].pattern,\n                        opacity: 0.7\n                      }} />\n                      \n                      {/* Shine effect - larger than the circle */}\n                      <div style={{\n                        position: 'absolute',\n                        top: '-150%',\n                        left: '-150%',\n                        width: '400%',\n                        height: '400%',\n                        background: 'linear-gradient(45deg, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%)',\n                        transform: 'rotate(45deg)',\n                        animation: `shine 3s infinite ${animationDelay}`\n                      }} />\n                    </motion.div>\n              );\n            })}\n          </div>\n\n          {/* Centered approved count badge */}\n          <div \n            style={{\n              position: 'absolute',\n              left: '50%',\n              top: '50%',\n              transform: 'translate(-50%, -50%)',\n              zIndex: 20,\n              backgroundColor: 'rgba(0, 0, 0, 0.75)',\n              color: 'white',\n              borderRadius: '999px',\n              fontSize: '15px',\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center',\n              padding: '8px 18px 7px',\n              minWidth: '46px',\n              boxShadow: '0 2px 8px rgba(0,0,0,0.15), 0 0 0 1px rgba(255, 255, 255, 0.1), 0 0 0 2px rgba(255, 255, 255, 0.05)',\n                  border: '1px solid rgba(255, 255, 255, 0.8)'\n            }}\n          >\n            <div style={{ fontWeight: 500, lineHeight: 1.2 }}>{approvedCount}</div>\n                <div style={{ fontSize: '11px', opacity: 1.0, marginTop: '0px', letterSpacing: '0.02em' }}>Approved</div>\n          </div>\n            </motion.div>\n          </motion.div>\n        </motion.div>\n        \n        {/* Indicator arrow for expanding content */}\n        <motion.div \n          className=\"flex justify-center\"\n          onClick={toggleExpanded}\n        >\n        </motion.div>\n      </motion.div>\n    </div>\n  );\n}; ","export type EventItem = {\n  id: number;\n  title: string;\n  date: string;\n  attendees: number;\n  clickable: boolean;\n  timeframe: 'upcoming' | 'past';\n  // Additional fields for event-specific content\n  time?: string;\n  description?: string;\n  spotifyLink?: string;\n  spotifyLyrics?: string;\n  image?: {\n    webp: string;\n    fallback: string;\n  };\n  hosts?: {\n    id: number;\n    image: string;\n  }[];\n};\n\nexport const events: EventItem[] = [\n  {\n    id: 1,\n    title: \"mental static\",\n    date: \"31/03/25\",\n    attendees: 35,\n    clickable: true,\n    timeframe: 'upcoming',\n    time: \"7:30pm\",\n    description: `quick hits of obscure knowledge ðŸ’š\n\nbring that random wikipedia rabbithole only you seem to know about. weird nature stuff, unsolved mysteries, watershed moments, conspiracy theories, crazy undercover govt ops, cool people etc etc ðŸŒ€ðŸŒ€ðŸŒ€\n\nwiki page will go up on a projector. exactly two mins for you to brief us. +1 question from the rest of us\n\nlimited capacity! tell us what you'd share ðŸ«¶ðŸ¼`,\n    spotifyLink: \"https://open.spotify.com/track/0LSLM0zuWRkEYemF7JcfEE?si=EhnHw1mWS1OOC9joykQgOA\",\n    spotifyLyrics: \"surf it scroll it pause it click it cross it crack it ssswitch update it\",\n    image: {\n      webp: \"./images/partiful/ms-giphy.webp\",\n      fallback: \"./images/partiful/ms-fallback.jpg\"\n    },\n    hosts: [\n      { id: 1, image: './icons/hosts/fareeha.jpg' },\n      { id: 2, image: './icons/hosts/1-b975ea56.jpg' },\n      { id: 3, image: './icons/hosts/2-b975ea56.jpg' }\n    ]\n  },\n  {\n    id: 2,\n    title: \"strawberry hour\",\n    date: \"26/03/25\",\n    attendees: 60,\n    clickable: true,\n    timeframe: 'upcoming',\n    time: \"7:00pm\",\n    description: `ðŸ‘• pinks reds whites\n\nðŸ½ï¸ literally just strawberries\n\none whole hour to celebrate strawberries being in season ðŸ˜Š ðŸ“ ðŸ“ ðŸ“`,\n    spotifyLink: \"https://open.spotify.com/track/3Am0IbOxmvlSXro7N5iSfZ\",\n    spotifyLyrics: \"nothing is real...\",\n    image: {\n      webp: \"./images/partiful/sh-giphy.webp\",\n      fallback: \"./images/partiful/sh-giphy.webp\"\n    },\n    hosts: [\n      { id: 1, image: './icons/hosts/fareeha.jpg' },\n      { id: 2, image: './icons/hosts/3-64896426.jpg' },\n      { id: 3, image: './icons/hosts/4-64896426.jpg' },\n      { id: 4, image: './icons/hosts/1-b975ea56.jpg' }\n    ]\n  },\n  {\n    id: 3,\n    title: \"blood moon rising.\",\n    date: \"13/03/25\",\n    attendees: 15,\n    clickable: true,\n    timeframe: 'upcoming',\n    time: \"8:00pm\",\n    description: `to witness the sky's transformation, marvel at cosmic rarity, and remember being small under something ancient.\n\n// layers recommended. the cold is merciless.\n\nmissing this will be cosmic treason; your absence will haunt you. ðŸŒ‘`,\n    spotifyLink: \"https://www.timeanddate.com/moon/usa/san-francisco\",\n    spotifyLyrics: \"Moon Info\",\n    image: {\n      webp: \"./images/partiful/bmr.jpeg\",\n      fallback: \"./images/partiful/bmr.jpeg\"\n    },\n    hosts: [\n      { id: 1, image: './icons/hosts/fareeha.jpg' },\n      { id: 2, image: './icons/hosts/5-64896426.jpg' },\n      { id: 3, image: './icons/hosts/6-64896426.jpg' }\n    ]\n  },\n  {\n    id: 4,\n    title: \"out of office\",\n    date: \"05/03/25\",\n    attendees: 40,\n    clickable: true,\n    timeframe: 'upcoming',\n    time: \"7:30pm\",\n    description: `light drinks & snacks\ncocktail party, russian hill, sunset views ðŸŒ‰\n\nwe know so many interesting people who should know each other! time to make that happen ðŸ©µ\n\nagenda\n7:45 meet your future collaborators, conspirators, accomplices\n8:30 forced connection ritual ðŸ«¶ðŸ¼ \n9:30 disappear (it's a school night)\n\ndress code: casual, shoes off :)\nparking: street, can be limited in the evening\n\nxoxo`,\n    spotifyLink: \"Russian Hill, San Francisco, CA\",\n    spotifyLyrics: \"light drinks & snacks\",\n    image: {\n      webp: \"./images/partiful/ooo.jpeg\",\n      fallback: \"./images/partiful/ooo.jpeg\"\n    },\n    hosts: [\n      { id: 1, image: './icons/hosts/7-dd1a51c0.jpg' },\n      { id: 2, image: './icons/hosts/fareeha.jpg' }\n    ]\n  },\n  {\n    id: 5,\n    title: \"threading in\",\n    date: \"20/02/25\",\n    attendees: 40,\n    clickable: true,\n    timeframe: 'upcoming',\n    time: \"7:00pm\",\n    description: `Another Thursday, another nosh sesh.\n\nCurated for the people in our lives whose eyes sparkle when they talk.\n\nFew things bring us more joy than cooking for others, so there will be lots of beautiful finger foodsðŸ¤`,\n    spotifyLink: \"Potrero Hill, San Francisco, CA\",\n    spotifyLyrics: \"Fareeha\",\n    image: {\n      webp: \"./images/partiful/ti-giphy.webp\",\n      fallback: \"./images/partiful/ti-giphy.webp\"\n    },\n    hosts: [\n      { id: 1, image: './icons/hosts/1-b975ea56.jpg' },\n      { id: 2, image: './icons/hosts/fareeha.jpg' }\n    ]\n  },\n  {\n    id: 6,\n    title: \"consumer social\",\n    date: \"09/02/25\",\n    attendees: 10,\n    clickable: true,\n    timeframe: 'upcoming',\n    time: \"6:45pm\",\n    description: `The plan:\n\nwe go bowling ðŸŽ³\nand talk about all our fave apps :)\n\nbring a consumer product hot take. hottest take gets a high five`,\n    spotifyLink: \"Presidio Bowl\",\n    spotifyLyrics: \"Presidio Bowl\",\n    image: {\n      webp: \"./images/partiful/cs-giphy.webp\",\n      fallback: \"./images/partiful/cs-giphy.webp\"\n    },\n    hosts: [\n      { id: 1, image: './icons/hosts/fareeha.jpg' },\n      { id: 2, image: './icons/hosts/4-64896426.jpg' }\n    ]\n  },\n  {\n    id: 7,\n    title: \"Watercolour\",\n    date: \"19/09/24\",\n    attendees: 20,\n    clickable: true,\n    timeframe: 'upcoming',\n    time: \"6:30pm\",\n    description: `Watercolour ðŸŽ¨\n\nWe wanted to bring some of our favorite people in the city together for an intimate seated dinner, to celebrate each other and to create space for creative community.\n\nYou are cordially invited.\n\ndress code: pastels, watercolor washes, artisan details ðŸª·`,\n    image: {\n      webp: \"./images/partiful/w-giphy.webp\",\n      fallback: \"./images/partiful/w-giphy.webp\"\n    },\n    hosts: [\n      { id: 1, image: './icons/hosts/8-dd1a51c0.jpg' },\n      { id: 2, image: './icons/hosts/fareeha.jpg' }\n    ]\n  },\n  {\n    id: 8,\n    title: \"Scrumptious\",\n    date: \"08/08/24\",\n    attendees: 20,\n    clickable: true,\n    timeframe: 'upcoming',\n    time: \"6:30pm\",\n    description: `honeycrisp. pink lady. sugarbee. ghost apple. áº Ì·Ì¼Ì­Ì»ÍPÌ¶Ì³Ì™Ì™Ì‰ÌÌ†PÌ¸Ì°ÌšLÌ¶Ì Ì¯Ì¯Ì®ÍŠÌŠÈ†Ì´Ì—Ì­ÌÌ‡Ì€. belle de boskoop. you name it. we (probably don't) have it.\n\njoin us for an evening of unmatched extravagance as we present the ultimate apple tasting experienceâ€¦\n\nthis is luxury at its juiciest. be there or be ðŸŒ\n\nAPARTMENT 206`,\n    spotifyLink: \"Outer Sunset, San Francisco\",\n    spotifyLyrics: \"Outer Sunset, San Francisco\",\n    image: {\n      webp: \"./images/partiful/s.jpg\",\n      fallback: \"./images/partiful/s.jpg\"\n    },\n    hosts: [\n      { id: 1, image: './icons/hosts/1-b975ea56.jpg' },\n      { id: 2, image: './icons/hosts/fareeha.jpg' },\n      { id: 3, image: './icons/hosts/9-dd1a51c0.jpg' }\n    ]\n  }\n]; ","import React, { useState, useEffect, useRef } from 'react';\r\nimport type { AppScreenProps } from '../types';\r\nimport { motion, useReducedMotion, useAnimation, PanInfo, AnimatePresence } from 'framer-motion';\r\nimport { createTactileEffect } from '../App';\r\nimport { PartifulEvent } from '../components/PartifulEvent';\r\nimport { ChevronRight, ArrowLeft, ArrowRight } from 'lucide-react';\r\nimport { events, EventItem } from '../data/events';\r\n\r\n// Declare the global window property for TypeScript\r\ndeclare global {\r\n  interface Window {\r\n    noteScreenBackHandler?: () => boolean;\r\n    eventScreenBackHandler?: () => boolean;\r\n    initialEventId?: number;\r\n    isViewingEventDetail?: boolean; // Add new property to control container shape\r\n  }\r\n}\r\n\r\nexport const EventScreen: React.FC<AppScreenProps> = () => {\r\n  const prefersReducedMotion = useReducedMotion();\r\n  const [showPartiful, setShowPartiful] = useState(false);\r\n  const [hasInteracted, setHasInteracted] = useState(false);\r\n  const [selectedEventId, setSelectedEventId] = useState<number | null>(null);\r\n  const [widgetEventId, setWidgetEventId] = useState<number | null>(null);\r\n  const [defaultHighlightEventId, setDefaultHighlightEventId] = useState<number | null>(null);\r\n  const [showSwipeIndicator, setShowSwipeIndicator] = useState(false);\r\n  const [hasScrolledToBottom, setHasScrolledToBottom] = useState(false);\r\n  \r\n  // Create a ref to use for directly setting the window property\r\n  const isViewingDetailRef = useRef(false);\r\n  \r\n  // Function to update both the ref and window property\r\n  const setIsViewingDetail = (value: boolean) => {\r\n    isViewingDetailRef.current = value;\r\n    window.isViewingEventDetail = value;\r\n    console.log('Setting isViewingEventDetail via function:', value);\r\n    \r\n    // Directly apply the class to the DOM as a fallback mechanism\r\n    try {\r\n      const mainContainer = document.querySelector('.main-container');\r\n      if (mainContainer) {\r\n        if (value) {\r\n          mainContainer.classList.add('portrait-container');\r\n          console.log('Directly added portrait-container class to DOM');\r\n        } else {\r\n          mainContainer.classList.remove('portrait-container');\r\n          console.log('Directly removed portrait-container class from DOM');\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.error('Error directly manipulating DOM:', e);\r\n    }\r\n  };\r\n\r\n  // Add a special handler for the main App's back button\r\n  useEffect(() => {\r\n    // If we are showing Partiful and the App's back button is clicked,\r\n    // we should go back to the event list first instead of closing the app\r\n    const handleAppBackClick = () => {\r\n      if (showPartiful) {\r\n        // Set flag to false BEFORE state changes for immediate effect\r\n        setIsViewingDetail(false);\r\n        setShowPartiful(false);\r\n        setSelectedEventId(null);\r\n        createTactileEffect();\r\n        return true; // Event was handled\r\n      }\r\n      return false; // Let App handle the default behavior\r\n    };\r\n    \r\n    // Add this handler to window to be accessible by the App component\r\n    window.eventScreenBackHandler = handleAppBackClick;\r\n    \r\n    // Clean up\r\n    return () => {\r\n      // @ts-ignore\r\n      delete window.eventScreenBackHandler;\r\n      // @ts-ignore\r\n      delete window.isViewingEventDetail;\r\n    };\r\n  }, [showPartiful]);\r\n\r\n  // Modified to show swipe indicator when user scrolls to bottom of first event\r\n  useEffect(() => {\r\n    if (showPartiful && hasScrolledToBottom) {\r\n      // Check localStorage to see if user has already used swipe\r\n      const hasUsedSwipe = localStorage.getItem('hasUsedEventSwipe') === 'true';\r\n      \r\n      if (!hasUsedSwipe) {\r\n        // Show the swipe indicator if user hasn't swiped before\r\n        setShowSwipeIndicator(true);\r\n      }\r\n    } else {\r\n      // Hide the indicator if not showing Partiful or not scrolled to bottom\r\n      setShowSwipeIndicator(false);\r\n    }\r\n  }, [showPartiful, hasScrolledToBottom]);\r\n\r\n  // Restore this useEffect to ensure the portrait mode is properly maintained\r\n  useEffect(() => {\r\n    // Set the flag to control the container shape\r\n    setIsViewingDetail(showPartiful);\r\n    console.log('Setting isViewingEventDetail:', showPartiful);\r\n    \r\n    return () => {\r\n      // Clean up when component unmounts\r\n      setIsViewingDetail(false);\r\n      console.log('Cleanup: Setting isViewingEventDetail to false');\r\n    };\r\n  }, [showPartiful]);\r\n\r\n  // Check for initial event ID (similar to what we did for notes)\r\n  useEffect(() => {\r\n    // Check if the user came from the widget\r\n    if (window.initialEventId) {\r\n      const eventToOpen = events.find(event => event.id === window.initialEventId);\r\n      if (eventToOpen) {\r\n        setWidgetEventId(eventToOpen.id); // Store the widget event ID\r\n        \r\n        // We no longer automatically open the event detail\r\n        // Just set the widget event ID so the pulsing dot shows up\r\n      }\r\n      // Clear the initialEventId after using it\r\n      window.initialEventId = undefined;\r\n    } else {\r\n      // User didn't come from the widget, so set up the default highlight\r\n      // Sort all events to get the most recent upcoming event as default to highlight\r\n      const sortedEvents = [...events].sort((a, b) => {\r\n        // First prioritize upcoming events\r\n        if (a.timeframe === 'upcoming' && b.timeframe !== 'upcoming') return -1;\r\n        if (a.timeframe !== 'upcoming' && b.timeframe === 'upcoming') return 1;\r\n        \r\n        // Then sort by date (most recent first)\r\n        const [dayA, monthA, yearA] = a.date.split('/').map(Number);\r\n        const [dayB, monthB, yearB] = b.date.split('/').map(Number);\r\n        \r\n        // Only for upcoming events, sort by date (soonest first)\r\n        if (a.timeframe === 'upcoming' && b.timeframe === 'upcoming') {\r\n          if (yearA !== yearB) return yearA - yearB;\r\n          if (monthA !== monthB) return monthA - monthB;\r\n          return dayA - dayB;\r\n        }\r\n        \r\n        // For past events, sort by date (most recent first)\r\n        if (yearB !== yearA) return yearB - yearA;\r\n        if (monthB !== monthA) return monthB - monthA;\r\n        return dayB - dayA;\r\n      });\r\n      \r\n      // Find the first clickable event to highlight\r\n      const firstClickableEvent = sortedEvents.find(event => event.clickable);\r\n      if (firstClickableEvent) {\r\n        setDefaultHighlightEventId(firstClickableEvent.id);\r\n      } else if (sortedEvents.length > 0) {\r\n        // If no clickable events, just highlight the first one\r\n        setDefaultHighlightEventId(sortedEvents[0].id);\r\n      }\r\n    }\r\n  }, []);\r\n  \r\n  // Simple helper function to format date\r\n  const getRelativeDate = (dateStr: string) => {\r\n    const today = \"08/04/25\"; // Assume today is 8th April 2025\r\n    if (dateStr === today) return \"Today\";\r\n    if (dateStr === \"07/04/25\") return \"Yesterday\";\r\n    \r\n    // Parse the date to get the month\r\n    const [day, month, year] = dateStr.split('/').map(Number);\r\n    \r\n    // Convert month number to month name\r\n    const monthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n    const monthName = monthNames[month - 1];\r\n    \r\n    return monthName;\r\n  };\r\n  \r\n  // Apple-like spring animation\r\n  const springTransition = {\r\n    type: \"spring\",\r\n    damping: 30,\r\n    stiffness: 400,\r\n    mass: 0.8,\r\n  };\r\n  \r\n  // Animation variants for staggered entrance\r\n  const containerVariants = {\r\n    hidden: { opacity: 0 },\r\n    show: {\r\n      opacity: 1,\r\n      transition: {\r\n        staggerChildren: 0.1,\r\n        delayChildren: 0.05\r\n      }\r\n    }\r\n  };\r\n\r\n  const itemVariants = {\r\n    hidden: { opacity: 0, y: 15, scale: 0.95 },\r\n    show: { \r\n      opacity: 1, \r\n      y: 0, \r\n      scale: 1,\r\n      transition: {\r\n        type: \"spring\",\r\n        stiffness: 300, \r\n        damping: 30,\r\n        duration: 0.3\r\n      }\r\n    }\r\n  };\r\n\r\n  // Subtle chevron animation variants\r\n  const chevronVariants = {\r\n    initial: { x: 0 },\r\n    hover: { x: 2, transition: { repeat: 0, duration: 0.3 } }\r\n  };\r\n\r\n  const handleInteraction = () => {\r\n    if (!hasInteracted) {\r\n      setHasInteracted(true);\r\n    }\r\n  };\r\n\r\n  // Helper function to determine if an event should have a pulsing dot\r\n  const shouldShowPulsingDot = (eventId: number) => {\r\n    // If user came from widget, highlight that specific event\r\n    // but hide it once they've viewed it\r\n    if (widgetEventId !== null && widgetEventId === eventId) {\r\n      if (selectedEventId === eventId) {\r\n        // The event is currently being viewed, so hide the dot\r\n        return false;\r\n      }\r\n      // The event was just clicked from widget but not yet viewed\r\n      return true;\r\n    }\r\n\r\n    // For non-widget clicks, check if this event has been viewed before\r\n    const viewedEvents = JSON.parse(localStorage.getItem('viewedEvents') || '[]');\r\n    if (viewedEvents.includes(eventId)) {\r\n      return false;\r\n    }\r\n    \r\n    // Check if this is first time use (no viewed events)\r\n    const isFirstTimeUse = viewedEvents.length === 0;\r\n    \r\n    // If this is first time use, show the orb on the top event (newest upcoming event)\r\n    if (isFirstTimeUse) {\r\n      // Get the top upcoming event or first event if none are upcoming\r\n      const firstTimeUpcomingEvents = events.filter(event => event.timeframe === 'upcoming');\r\n      if (firstTimeUpcomingEvents.length > 0) {\r\n        // Sort by date (closest first)\r\n        const sortedEvents = [...firstTimeUpcomingEvents].sort((a, b) => {\r\n          const [dayA, monthA, yearA] = a.date.split('/').map(Number);\r\n          const [dayB, monthB, yearB] = b.date.split('/').map(Number);\r\n          \r\n          if (yearA !== yearB) return yearA - yearB;\r\n          if (monthA !== monthB) return monthA - monthB;\r\n          return dayA - dayB;\r\n        });\r\n        \r\n        // Show orb on the first upcoming event\r\n        return sortedEvents[0].id === eventId;\r\n      } else if (events.length > 0) {\r\n        // If no upcoming events, show orb on the first event\r\n        return events[0].id === eventId;\r\n      }\r\n    }\r\n    \r\n    return false;\r\n  };\r\n\r\n  // Add function to mark event as viewed\r\n  const markEventAsViewed = (eventId: number) => {\r\n    const viewedEvents = JSON.parse(localStorage.getItem('viewedEvents') || '[]');\r\n    if (!viewedEvents.includes(eventId)) {\r\n      viewedEvents.push(eventId);\r\n      localStorage.setItem('viewedEvents', JSON.stringify(viewedEvents));\r\n    }\r\n  };\r\n\r\n  // Debug effect to monitor isViewingDetailRef changes\r\n  useEffect(() => {\r\n    console.log('showPartiful changed to:', showPartiful);\r\n    console.log('isViewingDetailRef is now:', isViewingDetailRef.current);\r\n    console.log('window.isViewingEventDetail is now:', window.isViewingEventDetail);\r\n  }, [showPartiful]);\r\n\r\n  const handleEventPress = (event: EventItem) => {\r\n    // Mark event as viewed for the pulsing dot\r\n    markEventAsViewed(event.id);\r\n    \r\n    // Check if we need to show partiful data\r\n    if (event.clickable) {\r\n      // Reset scroll state when showing a new event\r\n      setHasScrolledToBottom(false);\r\n      setSelectedEventId(event.id);\r\n      setShowPartiful(true);\r\n      createTactileEffect();\r\n    }\r\n  };\r\n\r\n  if (showPartiful) {\r\n    // Find the selected event or default to the first clickable one\r\n    const selectedEvent = selectedEventId \r\n      ? events.find(event => event.id === selectedEventId) \r\n      : events.find(event => event.clickable);\r\n    \r\n    // Find the index of the current event\r\n    const currentIndex = selectedEventId \r\n      ? events.findIndex(event => event.id === selectedEventId)\r\n      : events.findIndex(event => event.clickable);\r\n    \r\n    // Calculate previous and next event indices (ensuring they're clickable)\r\n    const getNextClickableEvent = (startIndex: number, direction: 'next' | 'prev') => {\r\n      const totalEvents = events.length;\r\n      let offset = direction === 'next' ? 1 : -1;\r\n      let index = startIndex;\r\n      \r\n      // Loop through all events to find the next/prev clickable one\r\n      for (let i = 0; i < totalEvents; i++) {\r\n        index = (index + offset + totalEvents) % totalEvents; // Ensure wrap-around\r\n        if (events[index].clickable) {\r\n          return events[index].id;\r\n        }\r\n      }\r\n      \r\n      // If no clickable events found, return the original\r\n      return events[startIndex].id;\r\n    };\r\n    \r\n    const prevEventId = getNextClickableEvent(currentIndex, 'prev');\r\n    const nextEventId = getNextClickableEvent(currentIndex, 'next');\r\n    \r\n    // Handler for swipe navigation\r\n    const handleDragEnd = (event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => {\r\n      // Determine if the drag was significant enough to trigger navigation\r\n      const dragThreshold = 50; // Minimum drag distance to trigger navigation\r\n      \r\n      if (info.offset.x > dragThreshold) {\r\n        // Swiped right - go to previous event\r\n        markEventAsViewed(prevEventId);\r\n        setSelectedEventId(prevEventId);\r\n        // Reset scroll state for the new event\r\n        setHasScrolledToBottom(false);\r\n        createTactileEffect();\r\n        \r\n        // Hide indicator permanently\r\n        setShowSwipeIndicator(false);\r\n        localStorage.setItem('hasUsedEventSwipe', 'true');\r\n      } else if (info.offset.x < -dragThreshold) {\r\n        // Swiped left - go to next event\r\n        markEventAsViewed(nextEventId);\r\n        setSelectedEventId(nextEventId);\r\n        // Reset scroll state for the new event\r\n        setHasScrolledToBottom(false);\r\n        createTactileEffect();\r\n        \r\n        // Hide indicator permanently\r\n        setShowSwipeIndicator(false);\r\n        localStorage.setItem('hasUsedEventSwipe', 'true');\r\n      }\r\n    };\r\n    \r\n    return (\r\n      <div className=\"h-full w-full overflow-hidden\">\r\n        <AnimatePresence mode=\"wait\">\r\n          <motion.div \r\n            key={selectedEventId} // Important: This forces a re-render on event change\r\n            className=\"h-full w-full\"\r\n            initial={{ opacity: 0, x: 0 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            exit={{ opacity: 0 }}\r\n            transition={{ duration: 0.2 }}\r\n            drag={prefersReducedMotion ? false : \"x\"}\r\n            dragDirectionLock\r\n            dragConstraints={{ left: 0, right: 0 }}\r\n            dragTransition={{ bounceStiffness: 600, bounceDamping: 20 }}\r\n            dragElastic={0}\r\n            onDragEnd={handleDragEnd}\r\n            onMouseDown={(e) => e.stopPropagation()}\r\n            onTouchStart={(e) => e.stopPropagation()}\r\n            onTouchMove={(e) => e.stopPropagation()}\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <PartifulEvent \r\n              eventData={selectedEvent}\r\n              onBack={() => {\r\n                // Set flag to false BEFORE state changes for immediate effect\r\n                setIsViewingDetail(false);\r\n                setShowPartiful(false);\r\n                setSelectedEventId(null);\r\n                createTactileEffect();\r\n              }}\r\n              onScrollToBottom={() => setHasScrolledToBottom(true)}\r\n            />\r\n            \r\n            {/* Swipe indicator overlay - Apple-style */}\r\n            <AnimatePresence>\r\n              {showSwipeIndicator && (\r\n                <motion.div \r\n                  className=\"absolute bottom-8 left-0 right-0 pointer-events-none flex items-center justify-center\"\r\n                  initial={{ opacity: 0 }}\r\n                  animate={{ opacity: 1 }}\r\n                  exit={{ opacity: 0 }}\r\n                  transition={{ duration: 0.5 }}\r\n                >\r\n                  <motion.div \r\n                    className=\"flex items-center space-x-2\"\r\n                    initial={{ y: 10, opacity: 0 }}\r\n                    animate={{ y: 0, opacity: 1 }}\r\n                    exit={{ y: 10, opacity: 0 }}\r\n                    transition={{ duration: 0.3 }}\r\n                  >\r\n                    <motion.div \r\n                      className=\"w-[6px] h-[6px] rounded-full bg-white opacity-40\"\r\n                      animate={{ opacity: [0.4, 0.6, 0.4] }}\r\n                      transition={{ \r\n                        repeat: Infinity,\r\n                        duration: 1.5,\r\n                        ease: \"easeInOut\" \r\n                      }}\r\n                    />\r\n                    <motion.div \r\n                      className=\"w-[6px] h-[6px] rounded-full bg-white\" \r\n                    />\r\n                    <motion.div \r\n                      className=\"w-[6px] h-[6px] rounded-full bg-white opacity-40\"\r\n                      animate={{ opacity: [0.4, 0.6, 0.4] }}\r\n                      transition={{ \r\n                        repeat: Infinity,\r\n                        duration: 1.5,\r\n                        ease: \"easeInOut\",\r\n                        delay: 0.1\r\n                      }}\r\n                    />\r\n                  </motion.div>\r\n                </motion.div>\r\n              )}\r\n            </AnimatePresence>\r\n          </motion.div>\r\n        </AnimatePresence>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Filter events by timeframe\r\n  const upcomingEvents = events.filter(event => event.timeframe === 'upcoming');\r\n  const pastEvents = events.filter(event => event.timeframe === 'past');\r\n\r\n  // Get all events for the \"All\" section, sorted by date (most recent first)\r\n  const allEvents = [...events].sort((a, b) => {\r\n    // Parse dates (assuming DD/MM/YY format)\r\n    const [dayA, monthA, yearA] = a.date.split('/').map(Number);\r\n    const [dayB, monthB, yearB] = b.date.split('/').map(Number);\r\n    \r\n    // Compare dates in reverse order (newest first)\r\n    if (yearB !== yearA) return yearB - yearA;\r\n    if (monthB !== monthA) return monthB - monthA;\r\n    return dayB - dayA;\r\n  });\r\n\r\n  // Function to check if an event is within the past month\r\n  const isPastMonth = (dateStr: string) => {\r\n    const [day, month, year] = dateStr.split('/').map(Number);\r\n    const eventDate = new Date(2000 + year, month - 1, day); // Convert YY to 20YY\r\n    \r\n    const now = new Date();\r\n    const oneMonthAgo = new Date();\r\n    oneMonthAgo.setMonth(now.getMonth() - 1);\r\n    \r\n    return eventDate >= oneMonthAgo && eventDate <= now;\r\n  };\r\n\r\n  // Get events from the past month\r\n  const pastMonthEvents = allEvents.filter(event => isPastMonth(event.date));\r\n  \r\n  // Get all events that are not in the past month section\r\n  const remainingEvents = allEvents.filter(event => !isPastMonth(event.date));\r\n\r\n  return (\r\n    <div \r\n      className=\"h-full w-full\" \r\n      onClick={(e) => {\r\n        e.stopPropagation();\r\n        handleInteraction();\r\n      }}\r\n      onTouchStart={handleInteraction}\r\n    >\r\n      <motion.div \r\n        className=\"h-full overflow-y-auto scrollbar-subtle\"\r\n        variants={containerVariants}\r\n        initial=\"hidden\"\r\n        animate=\"show\"\r\n      >\r\n        <div className=\"space-y-3 p-6\">\r\n          {/* Partiful Events Explanation */}\r\n          <motion.div \r\n            className=\"mb-5\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            transition={{ delay: 0.2, duration: 0.5 }}\r\n          >\r\n            <p className=\"text-white/60 text-[14px] px-2\">\r\n              Some thoughtful, informal gatherings I've enjoyed planning with friends âœ¨\r\n            </p>\r\n          </motion.div>\r\n          {/* Past Month section */}\r\n          {pastMonthEvents.length > 0 && (\r\n            <div>\r\n              <h2 className=\"text-white/60 text-[14px] font-medium uppercase tracking-wider mb-2 px-2\">\r\n                Past Month\r\n              </h2>\r\n              <div className=\"space-y-0.5\">\r\n                {pastMonthEvents.map((event, index) => (\r\n                  <motion.div \r\n                    key={`past-month-${event.id}`}\r\n                    className=\"flex group px-1 py-0.5 rounded-md hover:bg-white/5 active:bg-white/10 relative\" \r\n                    onClick={(e) => {\r\n                      if (event.clickable) {\r\n                        e.stopPropagation();\r\n                        createTactileEffect();\r\n                        // Set flag BEFORE state changes for immediate effect\r\n                        setIsViewingDetail(true);\r\n                        console.log('Click handler: Setting isViewingEventDetail to true');\r\n                        handleEventPress(event);\r\n                      }\r\n                    }}\r\n                    whileHover={{ scale: 1.01 }}\r\n                    whileTap={{ scale: 0.98 }}\r\n                    transition={{ duration: 0.2 }}\r\n                  >\r\n                    <div className=\"w-5 h-5 flex-shrink-0 flex items-center justify-center text-white/50\">\r\n                      <motion.div\r\n                        variants={chevronVariants}\r\n                        initial=\"initial\"\r\n                        whileHover=\"hover\"\r\n                      >\r\n                        <ChevronRight size={16} className=\"group-hover:text-white/70 transition-colors duration-200\" />\r\n                      </motion.div>\r\n                    </div>\r\n                    <div className=\"ml-1 flex-1 flex justify-between items-center\">\r\n                      <div className=\"flex-1 pr-3\">\r\n                        <h3 className=\"text-base font-normal text-white/90 break-words group-hover:text-white transition-colors duration-200\">\r\n                          {event.title}\r\n                        </h3>\r\n                      </div>\r\n                      <div className=\"flex-shrink-0 flex items-center\">\r\n                        <span className=\"text-[14px] text-white/50 whitespace-nowrap\">\r\n                          {getRelativeDate(event.date)}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                    {shouldShowPulsingDot(event.id) && (\r\n                      <div \r\n                        className=\"absolute -right-1 top-1/3 -translate-y-1/2\" \r\n                      >\r\n                        <motion.div \r\n                          className=\"w-2 h-2 rounded-full bg-white/70\" \r\n                          initial={{ opacity: 0.7 }}\r\n                          animate={{ \r\n                            opacity: [0.5, 0.9, 0.5],\r\n                            scale: [1, 1.2, 1]\r\n                          }}\r\n                          transition={{ \r\n                            repeat: Infinity, \r\n                            repeatType: \"reverse\", \r\n                            duration: 1.5,\r\n                            repeatDelay: 1\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    )}\r\n                  </motion.div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* All events section */}\r\n          {remainingEvents.length > 0 && (\r\n            <div>\r\n              <h2 className=\"text-white/60 text-[14px] font-medium uppercase tracking-wider mb-2 px-2\">\r\n                All\r\n              </h2>\r\n              <div className=\"space-y-0.5\">\r\n                {remainingEvents.map((event, index) => (\r\n                  <motion.div \r\n                    key={`all-${event.id}`}\r\n                    className=\"flex group px-1 py-0.5 rounded-md hover:bg-white/5 active:bg-white/10 relative\" \r\n                    onClick={(e) => {\r\n                      if (event.clickable) {\r\n                        e.stopPropagation();\r\n                        createTactileEffect();\r\n                        // Set flag BEFORE state changes for immediate effect\r\n                        setIsViewingDetail(true);\r\n                        console.log('Click handler: Setting isViewingEventDetail to true');\r\n                        handleEventPress(event);\r\n                      }\r\n                    }}\r\n                    whileHover={{ scale: 1.01 }}\r\n                    whileTap={{ scale: 0.98 }}\r\n                    transition={{ duration: 0.2 }}\r\n                  >\r\n                    <div className=\"w-5 h-5 flex-shrink-0 flex items-center justify-center text-white/50\">\r\n                      <motion.div\r\n                        variants={chevronVariants}\r\n                        initial=\"initial\"\r\n                        whileHover=\"hover\"\r\n                      >\r\n                        <ChevronRight size={16} className=\"group-hover:text-white/70 transition-colors duration-200\" />\r\n                      </motion.div>\r\n                    </div>\r\n                    <div className=\"ml-1 flex-1 flex justify-between items-center\">\r\n                      <div className=\"flex-1 pr-3\">\r\n                        <h3 className=\"text-base font-normal text-white/90 break-words group-hover:text-white transition-colors duration-200\">\r\n                          {event.title}\r\n                        </h3>\r\n                      </div>\r\n                      <div className=\"flex-shrink-0 flex items-center\">\r\n                        <span className=\"text-[14px] text-white/50 whitespace-nowrap\">\r\n                          {getRelativeDate(event.date)}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                    {shouldShowPulsingDot(event.id) && (\r\n                      <div \r\n                        className=\"absolute -right-1 top-1/3 -translate-y-1/2\" \r\n                      >\r\n                        <motion.div \r\n                          className=\"w-2 h-2 rounded-full bg-white/70\" \r\n                          initial={{ opacity: 0.7 }}\r\n                          animate={{ \r\n                            opacity: [0.5, 0.9, 0.5],\r\n                            scale: [1, 1.2, 1]\r\n                          }}\r\n                          transition={{ \r\n                            repeat: Infinity, \r\n                            repeatType: \"reverse\", \r\n                            duration: 1.5,\r\n                            repeatDelay: 1\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    )}\r\n                  </motion.div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n};","import { useState, useRef, useEffect, useMemo } from 'react';\nimport { AnimatePresence, motion, useReducedMotion } from 'framer-motion';\nimport { AppIcon } from './components/AppIcon';\nimport { NotesScreen } from './screens/NotesScreen';\nimport { SocialsScreen } from './screens/SocialsScreen';\nimport { EventScreen } from './screens/EventScreen';\nimport type { AppIcon as AppIconType } from './types';\nimport { ChevronLeft, StickyNote } from 'lucide-react';\nimport axios from 'axios';\nimport { getSession } from 'next-auth/react';\n\n// Import shared notes data\nimport { notes } from './data/notes';\n// Import shared events data\nimport { events } from './data/events';\n\n// Global tactile effect function for better performance\nexport const createTactileEffect = () => {\n  if (typeof window !== 'undefined') {\n    // Check if an effect is already in progress\n    if (document.querySelector('.tactile-effect')) return;\n    \n    requestAnimationFrame(() => {\n      const element = document.createElement('div');\n      element.className = 'fixed inset-0 bg-white/5 pointer-events-none z-50 tactile-effect';\n      element.style.willChange = 'opacity';\n      document.body.appendChild(element);\n      \n      // Use requestAnimationFrame for smoother animation\n      requestAnimationFrame(() => {\n        setTimeout(() => {\n          // Fade out smoothly\n          element.style.transition = 'opacity 60ms ease';\n          element.style.opacity = '0';\n          \n          setTimeout(() => {\n            if (document.body.contains(element)) {\n              document.body.removeChild(element);\n            }\n          }, 60);\n        }, 20);\n      });\n    });\n  }\n};\n\n// Haptic feedback function specifically for widget swiping\nexport const createSwipeHapticFeedback = (intensity: 'light' | 'medium' | 'heavy' = 'light') => {\n  if (typeof window !== 'undefined') {\n    // Attempt to use native haptic feedback if available\n    if (window.navigator && window.navigator.vibrate) {\n      switch (intensity) {\n        case 'light':\n          window.navigator.vibrate(2);\n          break;\n        case 'medium':\n          window.navigator.vibrate(5);\n          break;\n        case 'heavy':\n          window.navigator.vibrate(8);\n          break;\n      }\n    }\n    \n    // Also create a visual feedback (more subtle than tactile effect)\n    requestAnimationFrame(() => {\n      const element = document.createElement('div');\n      element.className = 'fixed inset-0 bg-white/3 pointer-events-none z-50 swipe-effect';\n      element.style.willChange = 'opacity';\n      document.body.appendChild(element);\n      \n      requestAnimationFrame(() => {\n        setTimeout(() => {\n          element.style.transition = 'opacity 40ms ease';\n          element.style.opacity = '0';\n          \n          setTimeout(() => {\n            if (document.body.contains(element)) {\n              document.body.removeChild(element);\n            }\n          }, 40);\n        }, 10);\n      });\n    });\n  }\n};\n\n// Animation coordinates for Apple-like expansion\ninterface AnimationPosition {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\n// Define a proper type for Spotify tracks\ntype SpotifyTrack = {\n  track: {\n    name: string;\n    artists: Array<{ name: string }>;\n    album?: {\n      name: string;\n      images?: Array<{ url: string }>;\n    };\n    duration_ms: number;\n    external_urls?: {\n      spotify: string;\n    };\n  };\n  played_at: string;\n};\n\n// Define types for our various widgets\ntype WidgetData = {\n  type: 'notes' | 'partiful' | 'workout';\n  title: string;\n  subtitle: string;\n  timestamp: string;\n  timestampLabel: string;\n  progress: number;\n  iconBgColor: string;\n};\n\n// Simplified tactile effect for widget swipes\nconst createWidgetSwipeFeedback = () => {\n  if (typeof window !== 'undefined' && window.navigator && window.navigator.vibrate) {\n    window.navigator.vibrate(3); // Subtle vibration feedback\n  }\n};\n\n// Format date to relative terms with three-letter day abbreviations\nconst getRelativeDate = (dateStr: string) => {\n  // Get current date\n  const now = new Date();\n  const today = `${String(now.getDate()).padStart(2, '0')}/${String(now.getMonth() + 1).padStart(2, '0')}/${String(now.getFullYear()).slice(-2)}`;\n  \n  // Get yesterday's date\n  const yesterdayDate = new Date(now);\n  yesterdayDate.setDate(now.getDate() - 1);\n  const yesterday = `${String(yesterdayDate.getDate()).padStart(2, '0')}/${String(yesterdayDate.getMonth() + 1).padStart(2, '0')}/${String(yesterdayDate.getFullYear()).slice(-2)}`;\n  \n  // Parse the provided date to get the day of week\n  const [day, month, year] = dateStr.split('/').map(Number);\n  const dateObj = new Date(2000 + year, month - 1, day);\n  \n  // Get day of week with 3-letter abbreviation\n  const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n  const dayOfWeek = daysOfWeek[dateObj.getDay()];\n  \n  // Special cases for today and yesterday\n  if (dateStr === today) return 'Today';\n  if (dateStr === yesterday) return 'Yesterday';\n  \n  // For all other dates, simply return the 3-letter day\n  return dayOfWeek;\n};\n\nfunction App() {\n  // Set 'notes' as the default active app to land directly on the hello world note\n  const [activeApp, setActiveApp] = useState<string | null>('notes');\n  const appsRef = useRef<Map<string, HTMLDivElement>>(new Map());\n  \n  // We're using window.isFirstTimeOpeningApp instead of a state variable\n  \n  // Set up the hello world note to open by default\n  useEffect(() => {\n    if (activeApp === 'notes') {\n      // Find the hello world note\n      const helloWorldNote = notes.find(note => note.title.includes(\"hello world\"));\n      if (helloWorldNote) {\n        // Set the initialNoteId to the hello world note's ID\n        window.initialNoteId = helloWorldNote.id;\n        // Set flag to open note directly in detail view\n        window.openNoteDirectly = true;\n        // Set a flag to track if this is the first time opening the app\n        (window as any).isFirstTimeOpeningApp = localStorage.getItem('hasVisitedBefore') !== 'true';\n        // Mark that the user has visited before\n        localStorage.setItem('hasVisitedBefore', 'true');\n      }\n    }\n  }, []);\n  const mainContainerRef = useRef<HTMLDivElement>(null);\n  const prefersReducedMotion = useReducedMotion();\n  const [appPosition, setAppPosition] = useState<AnimationPosition | null>(null);\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [currentAppElement, setCurrentAppElement] = useState<HTMLElement | null>(null);\n  const [windowHeight, setWindowHeight] = useState('100vh');\n  const [, setIsAppleDevice] = useState(false);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isHighPerformanceDevice, setIsHighPerformanceDevice] = useState(false);\n  const [recentTracks] = useState<SpotifyTrack[]>([]);\n  const [currentWidgetIndex, setCurrentWidgetIndex] = useState(0);\n  const [isFirstVisit, setIsFirstVisit] = useState(true);\n  const [isWidgetHovered, setIsWidgetHovered] = useState(false);\n  const [swipeStartX, setSwipeStartX] = useState<number | null>(null);\n  const [swipeDirection, setSwipeDirection] = useState<'left' | 'right' | null>(null);\n  const [isSwiping, setIsSwiping] = useState(false);\n  const widgetRef = useRef<HTMLDivElement>(null);\n  const [hasShownFirstDisplay, setHasShownFirstDisplay] = useState(false);\n  const [lastManualNavigation, setLastManualNavigation] = useState<number | null>(null);\n  // Add state to detect if user is on a mobile device\n  const [isMobileDevice, setIsMobileDevice] = useState(false);\n  \n  // Detect if user is on a mobile device\n  useEffect(() => {\n    const checkIfMobile = () => {\n      const userAgent = navigator.userAgent || navigator.vendor;\n      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);\n      setIsMobileDevice(isMobile);\n    };\n    \n    checkIfMobile();\n    \n    // Also check on resize in case of device orientation changes\n    window.addEventListener('resize', checkIfMobile);\n    return () => window.removeEventListener('resize', checkIfMobile);\n  }, []);\n  \n  // Check if this is the first visit\n  useEffect(() => {\n    // Check localStorage for previous visits\n    const hasVisitedBefore = localStorage.getItem('hasVisitedBefore');\n    if (hasVisitedBefore) {\n      setIsFirstVisit(false);\n    } else {\n      // Mark as visited for future\n      localStorage.setItem('hasVisitedBefore', 'true');\n      setIsFirstVisit(true);\n    }\n  }, []);\n  \n  // Always select the \"hello world!\" note when the site opens\n  const selectedNote = useMemo(() => {\n    // Filter out locked notes to ensure we never select a locked note\n    const unlockNotes = notes.filter(note => !note.locked);\n    \n    // Always show the \"hello world\" note with compass emoji\n    return unlockNotes.find(note => note.title.includes(\"hello world\")) || unlockNotes[0];\n  }, []);\n  \n  // Select events based on visit history\n  const selectedEvent = useMemo(() => {\n    // Sort all events by date (most recent first)\n    const sortedEvents = [...events].sort((a, b) => {\n      // Parse dates (assuming DD/MM/YY format)\n      const [dayA, monthA, yearA] = a.date.split('/').map(Number);\n      const [dayB, monthB, yearB] = b.date.split('/').map(Number);\n      \n      // Compare dates (most recent first)\n      if (yearB !== yearA) return yearB - yearA;\n      if (monthB !== monthA) return monthB - monthA;\n      return dayB - dayA;\n    });\n    \n    // Take only the 6 most recent events\n    const recentEvents = sortedEvents.slice(0, 6);\n    \n    if (isFirstVisit) {\n      // For first visit - show the most recent upcoming event\n      const upcomingEvents = recentEvents.filter(event => event.timeframe === 'upcoming');\n      return upcomingEvents[0] || recentEvents[0];\n    } else {\n      // For subsequent visits - show random events from the 6 most recent\n      const randomIndex = Math.floor(Math.random() * recentEvents.length);\n      return recentEvents[randomIndex];\n    }\n  }, [isFirstVisit]);\n  \n  // Use real notes data for the widgets\n  const widgets: WidgetData[] = [\n    {\n      type: 'workout',\n      title: 'barry\\'s - lift x run',\n      subtitle: '',\n      timestamp: (() => {\n        // Calculate date from two days ago\n        const twoDaysAgo = new Date();\n        twoDaysAgo.setDate(twoDaysAgo.getDate() - 2);\n        // Format as DD/MM/YY to match getRelativeDate's expected format\n        const day = String(twoDaysAgo.getDate()).padStart(2, '0');\n        const month = String(twoDaysAgo.getMonth() + 1).padStart(2, '0');\n        const year = String(twoDaysAgo.getFullYear()).slice(-2);\n        const formattedDate = `${day}/${month}/${year}`;\n        return getRelativeDate(formattedDate);\n      })(),\n      timestampLabel: 'kineship',\n      progress: 80,\n      iconBgColor: 'bg-[#62BE9C]/20'\n    },\n    {\n      type: 'notes',\n      title: selectedNote.title,\n      subtitle: '',\n      timestamp: getRelativeDate(selectedNote.date),\n      timestampLabel: 'Last edited',\n      progress: 65,\n      iconBgColor: 'bg-[#FF8A5B]/20'\n    },\n    {\n      type: 'partiful',\n      title: selectedEvent.title,\n      subtitle: '',\n      timestamp: getRelativeDate(selectedEvent.date),\n      timestampLabel: 'latest events',\n      progress: 25,\n      iconBgColor: 'bg-[#FF4081]/20'\n    }\n  ];\n  \n  // Update progress when tracks change\n  useEffect(() => {\n    if (recentTracks.length > 0) {\n      // Unused variable removed\n      // const newProgress = Math.floor(Math.random() * 80) + 10;\n      // setProgressPercent(newProgress);\n    }\n  }, [recentTracks]);\n  \n  // Rotate widgets every 8 seconds (longer to give more time to read)\n  useEffect(() => {\n    if (!prefersReducedMotion && !isWidgetHovered && !isSwiping) {\n      // Use 1 second for the first display after page load, 6 seconds for all others\n      const interval = !hasShownFirstDisplay ? 1000 : 5000;\n      \n      // Set up the interval\n      const rotationInterval = setInterval(() => {\n        // Check if we should pause rotation due to recent manual navigation\n        const now = Date.now();\n        if (lastManualNavigation && now - lastManualNavigation < 5000) {\n          return; // Skip this rotation cycle if manual navigation was recent\n        }\n        \n        setCurrentWidgetIndex((prevIndex) => {\n          const nextIndex = (prevIndex + 1) % widgets.length;\n          return nextIndex;\n        });\n        \n        // Mark that we've shown the first display\n        if (!hasShownFirstDisplay) {\n          setHasShownFirstDisplay(true);\n        }\n      }, interval);\n      \n      return () => clearInterval(rotationInterval);\n    }\n  }, [widgets.length, prefersReducedMotion, isWidgetHovered, hasShownFirstDisplay, lastManualNavigation, isSwiping]);\n  \n  // Detect device performance\n  useEffect(() => {\n    // Check if the device has been classified as high-performance by the script in index.html\n    const isHighPerf = document.documentElement.classList.contains('high-performance-device');\n    setIsHighPerformanceDevice(isHighPerf);\n    \n    // Also check for iPads and other larger screen tablets which typically have better performance\n    const userAgent = navigator.userAgent.toLowerCase();\n    const isTablet = /ipad/.test(userAgent) || \n                    (window.innerWidth >= 768 && /android/.test(userAgent)) ||\n                    (/macintosh/.test(userAgent) && navigator.maxTouchPoints > 1);\n    \n    if (isTablet) {\n      setIsHighPerformanceDevice(true);\n    }\n  }, []);\n  \n  // Set body to prevent scrolling and get actual window height\n  useEffect(() => {\n    // Prevent scrolling on the body\n    document.body.style.overflow = 'hidden';\n    document.documentElement.style.overflow = 'hidden';\n    \n    // Set the actual window height for mobile browsers where 100vh can be inconsistent\n    const setHeight = () => {\n      const vh = window.innerHeight;\n      setWindowHeight(`${vh}px`);\n      document.documentElement.style.setProperty('--app-height', `${vh}px`);\n      \n      // Add additional handling for mobile devices to ensure full height\n      document.body.style.height = `${vh}px`;\n      document.documentElement.style.height = `${vh}px`;\n    };\n    \n    // Set initial height\n    setHeight();\n    \n    // Detect Apple devices\n    const userAgent = navigator.userAgent.toLowerCase();\n    const isApple = /iphone|ipad|ipod|macintosh/.test(userAgent);\n    setIsAppleDevice(isApple);\n    \n    // Update on resize\n    window.addEventListener('resize', setHeight);\n    window.addEventListener('orientationchange', setHeight);\n    \n    // Additional event for mobile browsers\n    window.addEventListener('touchmove', () => setHeight(), { passive: true });\n    \n    // Optimize loading sequence - reduce initial delay to 50ms\n    const initialTimer = setTimeout(() => {\n      setIsLoaded(true);\n      // Reduce secondary delay to 300ms\n      const fullLoadTimer = setTimeout(() => {\n        // Force recompute height to ensure proper display\n        setHeight();\n      }, 300); // Reduced from 600ms\n      return () => clearTimeout(fullLoadTimer);\n    }, 50); // Reduced from 100ms\n    \n    return () => {\n      window.removeEventListener('resize', setHeight);\n      window.removeEventListener('orientationchange', setHeight);\n      window.removeEventListener('touchmove', () => setHeight());\n      document.body.style.overflow = '';\n      document.documentElement.style.overflow = '';\n      clearTimeout(initialTimer);\n    };\n  }, []);\n  \n  // Inject critical styles for proper mobile rendering\n  useEffect(() => {\n    // Create and inject critical styles to ensure proper rendering on mobile\n    const styleElement = document.createElement('style');\n    styleElement.textContent = `\n      /* Force hardware acceleration */\n      .will-change-transform {\n        will-change: transform;\n        transform: translateZ(0);\n        -webkit-transform: translateZ(0);\n      }\n      \n      /* Ensure full height on mobile devices */\n      html, body, #root {\n        height: 100% !important;\n        height: -webkit-fill-available !important;\n        width: 100% !important;\n        margin: 0 !important;\n        padding: 0 !important;\n        position: fixed !important;\n        overflow: hidden !important;\n        font-family: var(--font-sans) !important;\n      }\n      \n      /* Fix for mobile browsers and notches */\n      @supports (-webkit-touch-callout: none) {\n        .h-screen, #root, body, html {\n          height: -webkit-fill-available !important;\n        }\n      }\n      \n      /* Force entire page container */\n      #root {\n        position: fixed !important;\n        inset: 0 !important;\n        overflow: hidden !important;\n        font-family: var(--font-sans) !important;\n      }\n      \n      /* Viewport height fix for mobile browsers */\n      @media screen and (max-width: 768px) {\n        body, html, #root, .h-screen {\n          height: 100% !important;\n          min-height: 100% !important;\n          max-height: 100% !important;\n          font-family: var(--font-sans) !important;\n        }\n      }\n      \n      /* Widget animation classes for music widget - actually used in the components */\n      .music-widget-bg-animation {\n        animation: music-widget-bg-fade 2.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;\n        -webkit-animation: music-widget-bg-fade 2.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;\n      }\n      \n      @keyframes music-widget-bg-fade {\n        0% { background-color: rgba(255, 255, 255, 0.03); }\n        50% { background-color: rgba(255, 255, 255, 0.05); }\n        100% { background-color: rgba(255, 255, 255, 0.07); }\n      }\n    `;\n    document.head.appendChild(styleElement);\n    \n    return () => {\n      document.head.removeChild(styleElement);\n    };\n  }, []);\n  \n  // Create a mapping from app IDs to handleAppClick (for use with inline links)\n  useEffect(() => {\n    // Make handleAppClick available to the window object for links in notes\n    window.handleAppClick = (appId: string) => {\n      console.log('App link clicked:', appId);\n      // Special case: if appId is 'home', go to home screen\n      if (appId === 'home') {\n        setActiveApp(null);\n        return;\n      }\n      handleAppClick(appId);\n    };\n    \n    return () => {\n      // Clean up\n      delete (window as any).handleAppClick;\n    };\n  }, []);  // Empty dependency array ensures this only runs once\n  \n  // For icon masking/cloning during animation\n  const [clonedAppIcon, setClonedAppIcon] = useState<{\n    app: AppIconType | null;\n    rect: DOMRect | null;\n  }>({\n    app: null,\n    rect: null\n  });\n\n  const apps: AppIconType[] = [\n    { id: 'notes', name: 'notes', icon: 'StickyNote', color: '', component: NotesScreen },\n    { id: 'socials', name: 'socials', icon: 'AtSign', color: '', component: SocialsScreen },\n    { id: 'partiful', name: 'partiful', icon: 'Partiful', color: '', component: EventScreen },\n  ];\n\n  // Handle app closing with proper animation\n  const handleClose = () => {\n    if (isAnimating) return;\n    \n    // Check if there's a specific screen back handler active\n    // This allows screens like NotesScreen to handle internal navigation\n    if (activeApp === 'notes' && window.noteScreenBackHandler && window.noteScreenBackHandler()) {\n      // If this is the first time opening the app and we're viewing the hello world note,\n      // go to home screen instead of staying in notes app\n      if ((window as any).isFirstTimeOpeningApp) {\n        (window as any).isFirstTimeOpeningApp = false; // Reset the flag\n        setActiveApp(null); // Go to home screen\n        return;\n      }\n      return; // If the screen handler returns true, it handled the back action\n    }\n    \n    // Check for event screen handler (partiful)\n    if (activeApp === 'partiful' && window.eventScreenBackHandler && window.eventScreenBackHandler()) {\n      return; // If the event screen handler returns true, it handled the back action\n    }\n    \n    setIsAnimating(true);\n    \n    // Start closing animation\n    setTimeout(() => {\n      setActiveApp(null);\n      setAppPosition(null);\n      setClonedAppIcon({\n        app: null,\n        rect: null\n      });\n      // Reset animation state only after animation completes\n      setTimeout(() => {\n        setIsAnimating(false);\n      }, 250);\n    }, 50);\n  };\n\n  // True Apple-style app opening animation\n  const handleAppClick = (appId: string) => {\n    if (isAnimating) return;\n    \n    const appElement = appsRef.current.get(appId);\n    const containerElement = mainContainerRef.current;\n    \n    if (!appElement || !containerElement) return;\n    \n    setIsAnimating(true);\n    \n    // Get app's absolute position\n    const appRect = appElement.getBoundingClientRect();\n    const containerRect = containerElement.getBoundingClientRect();\n    \n    // Find the selected app\n    const selectedApp = apps.find(app => app.id === appId) || null;\n    \n    // Store the app's position relative to the container\n    setAppPosition({\n      x: appRect.left - containerRect.left + (appRect.width / 2),\n      y: appRect.top - containerRect.top + (appRect.height / 2),\n      width: appRect.width,\n      height: appRect.height\n    });\n    \n    // Store a clone of the app icon for animation\n    setClonedAppIcon({\n      app: selectedApp,\n      rect: appRect\n    });\n    \n    // Set the current app element for scale calculations\n    setCurrentAppElement(appElement);\n    \n    // Small delay to ensure animation settings are in place\n    setTimeout(() => {\n      setActiveApp(appId);\n    }, 10);\n    \n    // Reset animation flag after animation completes\n    setTimeout(() => {\n      setIsAnimating(false);\n    }, 400);\n  };\n\n  const ActiveComponent = activeApp ? apps.find(app => app.id === activeApp)?.component : null;\n  \n  // Get the display name for the active app, with a special case for partiful to show as parti-folio\n  const activeAppName = activeApp ? \n    (activeApp === 'partiful' ? 'partifolio ðŸŽ‰' : \n     activeApp === 'notes' ? 'notes âœ§' :\n     activeApp === 'socials' ? 'socials âœ¨' :\n     apps.find(app => app.id === activeApp)?.name) \n    : null;\n  \n  // Precise iOS app opening animation timing\n  const appOpeningTransition = {\n    type: \"spring\",\n    stiffness: 350,\n    damping: 35,\n    mass: 1.2,\n    duration: 0.3\n  };\n\n  // Handle navigation between apps\n  const handleWidgetClick = (widgetType: string) => {\n    // Don't allow widget clicks during animations\n    if (isAnimating) return;\n    \n    // Create tactile feedback for the widget interaction\n    createWidgetSwipeFeedback();\n    \n    // Map widget types to app IDs\n    let appId: string | null = null;\n    \n    // Determine which app to open based on widget type\n    if (widgetType === 'workout') {\n      // Special case for workout widget to navigate directly to the kineship note detail view\n      window.initialNoteId = 2; // ID of the kineship note\n      window.openNoteDirectly = true; // Signal to open this note directly in detail view\n      // Set widgetNoteId to make the pulsing orb appear\n      (window as any).widgetNoteId = 2;\n      appId = 'notes';\n    } else if (widgetType === 'notes') {\n      // Set widgetNoteId to the hello world note to make the pulsing orb appear\n      window.initialNoteId = 1; // ID of the hello world note\n      (window as any).widgetNoteId = 1;\n      appId = 'notes';\n    } else if (widgetType === 'socials') {\n      appId = 'socials';\n    } else if (widgetType === 'partiful') {\n      appId = 'partiful';\n    }\n    \n    // If we have a valid app ID, open it with animation\n    if (appId) {\n      // Get the app element from the ref map\n      const appElement = appsRef.current.get(appId);\n      const containerElement = mainContainerRef.current;\n      \n      if (!appElement || !containerElement) return;\n      \n      setIsAnimating(true);\n      \n      // Get app's absolute position\n      const appRect = appElement.getBoundingClientRect();\n      const containerRect = containerElement.getBoundingClientRect();\n      \n      // Find the selected app\n      const selectedApp = apps.find(app => app.id === appId) || null;\n      \n      // Store the app's position relative to the container\n      setAppPosition({\n        x: appRect.left - containerRect.left + (appRect.width / 2),\n        y: appRect.top - containerRect.top + (appRect.height / 2),\n        width: appRect.width,\n        height: appRect.height\n      });\n      \n      // Store a clone of the app icon for animation\n      setClonedAppIcon({\n        app: selectedApp,\n        rect: appRect\n      });\n      \n      // Set the current app element for scale calculations\n      setCurrentAppElement(appElement);\n      \n      // Small delay to ensure animation settings are in place\n      setTimeout(() => {\n        setActiveApp(appId);\n      }, 10);\n      \n      // Reset animation flag after animation completes\n      setTimeout(() => {\n        setIsAnimating(false);\n      }, 400);\n    }\n  };\n  \n  const handleNextWidget = () => {\n    setCurrentWidgetIndex((prevIndex) => {\n      return (prevIndex + 1) % widgets.length;\n    });\n    createWidgetSwipeFeedback();\n  };\n\n  return (\n    <motion.div \n      className=\"h-screen w-screen fixed inset-0 overflow-hidden flex items-center justify-center\"\n      style={{\n        height: windowHeight,\n        width: '100%',\n        transform: 'translateZ(0)',\n        WebkitTransform: 'translateZ(0)',\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0\n      }}\n      onClick={activeApp && !isAnimating ? handleClose : undefined}\n      drag={false}\n    >\n      {/* Background Wrapper - Simplified with single image and fallback */}\n      <div className=\"absolute inset-0 w-full h-full overflow-hidden z-0\">\n        {/* Single beautiful background image with fallback */}\n        <div \n          className=\"absolute inset-0 bg-gradient-to-br from-[#131518] to-[#1d1c21]\"\n          style={{ \n            opacity: 1,\n          }}\n        >\n          {/* Subtle bokeh effect overlay */}\n        <div \n            className=\"absolute inset-0 opacity-30\"\n          style={{ \n              backgroundImage: 'radial-gradient(circle at 30% 20%, rgba(255,255,255,0.03) 0%, transparent 50%), radial-gradient(circle at 70% 60%, rgba(255,255,255,0.02) 0%, transparent 30%), radial-gradient(circle at 45% 80%, rgba(180,180,200,0.02) 0%, transparent 40%)',\n              mixBlendMode: 'screen'\n          }}\n        ></div>\n        \n          {/* Background image that loads on top of the gradient */}\n          <img \n            src=\"./optimized/background.webp\" \n            alt=\"\"\n            className=\"absolute inset-0 w-full h-full object-cover\"\n          style={{ \n              opacity: isLoaded ? 0.9 : 0,\n              transition: 'opacity 1s ease',\n            }}\n            onError={(e) => {\n              // If webp fails, try jpg\n              const img = e.target as HTMLImageElement;\n              img.onerror = null; // Prevent infinite error loop\n              img.src = './background.jpg';\n            }}\n          />\n        \n          {/* Subtle overlay for better text contrast */}\n        <div \n            className=\"absolute inset-0 bg-black/20\"\n          style={{\n              opacity: isLoaded ? 0.5 : 0,\n              transition: 'opacity 1s ease',\n          }}\n        ></div>\n        </div>\n      </div>\n\n      <div \n        className=\"absolute flex flex-col items-center will-change-transform z-10\"\n        ref={mainContainerRef}\n        onClick={(e) => e.stopPropagation()}\n        style={{\n          opacity: isLoaded ? 1 : 0,\n          transform: `translateY(${isLoaded ? '0' : '10px'}) translateZ(0)`,\n          WebkitTransform: `translateY(${isLoaded ? '0' : '10px'}) translateZ(0)`,\n          transition: \"opacity 0.8s cubic-bezier(0.22, 1, 0.36, 1), transform 0.8s cubic-bezier(0.22, 1, 0.36, 1)\",\n          top: '45%',\n          left: '50%',\n          marginLeft: '-145px', // Half of the container width (290px/2)\n          marginTop: '-170px',\n        }}\n      >\n        {/* App name above the container - returning to original position */}\n        <div \n          className=\"absolute top-[-30px] w-full flex justify-center items-center\"\n          style={{\n            opacity: isLoaded ? 1 : 0,\n            transform: `translateY(${isLoaded ? '0' : '-10px'})`,\n            transition: \"opacity 0.8s cubic-bezier(0.22, 1, 0.36, 1), transform 0.8s cubic-bezier(0.22, 1, 0.36, 1)\",\n            transitionDelay: \"0.1s\",\n            height: \"30px\",\n            pointerEvents: \"none\"\n          }}\n        >\n          {activeApp ? (\n            <motion.h2 \n              className=\"text-[18px] font-normal text-right fixed\"\n              initial={{ opacity: 0 }}\n              animate={{ \n                opacity: 1,\n                transition: {\n                  duration: 0.8,\n                  ease: [0.22, 1, 0.36, 1]\n                }\n              }}\n              style={{ \n                top: '8px',\n                right: '25px',\n                zIndex: 9999,\n                color: '#ffffff'\n              }}\n            >\n              <span className=\"flex items-center\">\n                {activeAppName}\n              </span>\n            </motion.h2>\n          ) : (\n            /* Home screen title with enhanced styling */\n            <motion.h2 \n              className=\"text-[18px] font-normal text-right fixed\"\n              initial={{ opacity: 0 }}\n              animate={{ \n                opacity: 1,\n                transition: {\n                  duration: 0.8,\n                  ease: [0.22, 1, 0.36, 1]\n                }\n              }}\n              style={{ \n                top: '8px',\n                right: '25px',\n                zIndex: 9999,\n                color: '#ffffff'\n              }}\n            >\n              <span className=\"flex items-center\">\n                {isFirstVisit && <span style={{ fontSize: \"0.65em\", color: \"rgba(255, 255, 255, 0.5)\", marginRight: \"4px\", animation: \"fadeOut 2.5s ease-in forwards 3s\", display: \"inline-block\", transform: \"translateY(2px)\" }}>shipped by</span>}\n                fareeha\n                <a href=\"https://github.com/fareeha-s\" target=\"_blank\" rel=\"noopener noreferrer\" onClick={(e) => { e.stopPropagation(); window.open('https://github.com/fareeha-s', '_blank'); }} style={{ cursor: 'pointer' }} className=\"github-link\">\n                  <img \n                    src=\"./icons/hosts/fareeha.jpg\" \n                    alt=\"Fareeha\" \n                    className=\"ml-1 rounded-full w-6 h-6 object-cover border border-white/20 hover:border-white/50 transition-all duration-300\" \n                    style={{ zIndex: 9999 }}\n                  />\n                </a>\n              </span>\n            </motion.h2>\n          )}\n        </div>\n        \n        {/* Main container - with glass solid effect instead of blur */}\n        <motion.div \n          className={`w-[290px] aspect-square rounded-[24px] overflow-hidden shadow-xl relative z-20 will-change-transform glass-solid main-container ${\n            activeApp ? 'glass-solid-shine' : ''\n          } ${activeApp === 'partiful' && typeof window !== 'undefined' && window.isViewingEventDetail ? 'portrait-container expanded' : ''} ${activeApp === 'notes' && typeof window !== 'undefined' && window.isViewingNoteDetail ? 'portrait-container expanded' : ''}`}\n          onClick={(e) => {\n            e.stopPropagation();\n            if (activeApp && !isAnimating) handleClose();\n          }}\n          style={(() => {\n            // Debug log for rendering\n            if (activeApp === 'partiful') {\n              console.log('App.tsx rendering - isViewingEventDetail:', typeof window !== 'undefined' ? window.isViewingEventDetail : 'undefined');\n            }\n            if (activeApp === 'notes') {\n              console.log('App.tsx rendering - isViewingNoteDetail:', typeof window !== 'undefined' ? window.isViewingNoteDetail : 'undefined');\n            }\n            \n            // We need to ensure that when in event detail view, the portrait styles are applied\n            // This is a more reliable approach since window properties might be unreliable\n            if (activeApp === 'partiful' && typeof window !== 'undefined' && window.isViewingEventDetail) {\n              return {\n                boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.4), 0 1px 3px rgba(255, 255, 255, 0.15) inset',\n                transform: 'translateZ(0)',\n                WebkitTransform: 'translateZ(0)',\n                opacity: 1,\n                aspectRatio: '3/4',\n                height: '390px',\n                width: '290px',\n              };\n            }\n            if (activeApp === 'notes' && typeof window !== 'undefined' && window.isViewingNoteDetail) {\n              return {\n                boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.4), 0 1px 3px rgba(255, 255, 255, 0.15) inset',\n                transform: 'translateZ(0)',\n                WebkitTransform: 'translateZ(0)',\n                opacity: 1,\n                aspectRatio: '3/4',\n                height: '390px',\n                width: '290px',\n              };\n            }\n            \n            return {\n              boxShadow: activeApp ? '0 25px 50px -12px rgba(0, 0, 0, 0.4), 0 1px 3px rgba(255, 255, 255, 0.15) inset' : '0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 1px 2px rgba(255, 255, 255, 0.12) inset',\n              transform: 'translateZ(0)',\n              WebkitTransform: 'translateZ(0)',\n              opacity: 1,\n            };\n          })()}\n        >\n          {/* Light reflection effects */}\n          <div \n            className=\"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] opacity-[0.03] rounded-full z-10 pointer-events-none\" \n            style={{\n              background: \"radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 70%)\",\n              transform: \"rotate(-15deg)\"\n            }}\n          />\n          <div \n            className=\"absolute bottom-[5%] right-[5%] w-[30%] h-[30%] opacity-[0.12] rounded-full z-10 pointer-events-none\" \n            style={{\n              background: \"radial-gradient(circle, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0) 70%)\",\n              transform: \"rotate(15deg)\"\n            }}\n          />\n          \n          {/* Edge highlights - diagonal light streaks */}\n          <div \n            className=\"absolute top-[-5%] left-[-20%] w-[40%] h-[10%] opacity-[0.02] z-10 pointer-events-none\" \n            style={{\n              background: \"linear-gradient(45deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 100%)\",\n              transform: \"rotate(35deg)\",\n              borderRadius: \"50%\"\n            }}\n          />\n          \n          {/* Bottom edge highlight - now lighter */}\n          <div \n            className=\"absolute bottom-[0%] left-[5%] right-[5%] h-[10%] opacity-[0.08] z-10 pointer-events-none\" \n            style={{\n              background: \"linear-gradient(to top, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0) 100%)\",\n              borderRadius: \"50%\",\n              filter: \"blur(2px)\"\n            }}\n          />\n          \n          {/* Home Screen Layer - Always present */}\n          <div \n            className={`absolute inset-0 z-10 ${activeApp ? 'pointer-events-none' : ''}`}\n            style={{\n              opacity: activeApp ? 0 : 1,\n              transition: 'opacity 0.2s ease-out',\n            }}\n          >\n            <div className=\"h-full flex flex-col pt-5 px-5 pb-5 will-change-transform\" style={{ opacity: 1.1 }}>\n              {/* App icons */}\n              <div className=\"grid grid-cols-3 gap-y-5 gap-x-4 mb-6 mt-2\">\n                {apps.map((app) => (\n                  <AppIcon\n                    key={app.id}\n                    icon={app.icon}\n                    name={app.name}\n                    color={app.color}\n                    onClick={() => !isAnimating && handleAppClick(app.id)}\n                    ref={(el) => {\n                      if (el) appsRef.current.set(app.id, el);\n                    }}\n                    className={clonedAppIcon.app?.id === app.id && activeApp ? 'invisible' : ''}\n                  />\n                ))}\n              </div>\n              \n              {/* Empty space to push widget down */}\n              <div className=\"flex-grow\"></div>\n              \n              {/* Rotating Widget */}\n              <AnimatePresence mode=\"wait\">\n              <motion.div \n                  ref={widgetRef}\n                  key={`widget-${currentWidgetIndex}`}\n                  className={`w-full mt-auto rounded-[16px] overflow-hidden shadow-sm mb-1 will-change-transform ${isLoaded ? 'music-widget-bg-animation' : ''}`}\n                  initial={{ opacity: 0, x: 20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  exit={{ opacity: 0, x: -20 }}\n                  transition={{ \n                    duration: 0.4, \n                    ease: [0.32, 0.72, 0, 1] // Apple's default cubic-bezier easing\n                  }}\n                whileHover={{ scale: 1.02 }}\n                whileTap={{ scale: 0.98 }}\n                  onClick={() => handleWidgetClick(widgets[currentWidgetIndex].type)}\n                  onMouseEnter={() => setIsWidgetHovered(true)}\n                  onMouseLeave={(e) => {\n                    setIsWidgetHovered(false);\n                    // Also handle swipe-related cleanup\n                    setSwipeStartX(null);\n                    setSwipeDirection(null);\n                  }}\n                  // Implement a direct, simpler swipe detection system for mobile devices only\n                  onTouchStart={(e) => {\n                    if (isMobileDevice) {\n                    setSwipeStartX(e.touches[0].clientX);\n                    setSwipeDirection(null);\n                    setIsSwiping(true);\n                    }\n                  }}\n                  onTouchMove={(e) => {\n                    if (isMobileDevice && swipeStartX !== null) {\n                    const currentX = e.touches[0].clientX;\n                    const diff = currentX - swipeStartX;\n                    \n                    // Set direction once we have a clear movement\n                    if (Math.abs(diff) > 10) {\n                      const newDirection = diff > 0 ? 'right' : 'left';\n                      if (swipeDirection !== newDirection) {\n                        setSwipeDirection(newDirection);\n                        }\n                      }\n                    }\n                  }}\n                  onTouchEnd={(e) => {\n                    if (isMobileDevice && swipeStartX !== null && swipeDirection !== null) {\n                    const endX = e.changedTouches[0].clientX;\n                    const diff = endX - swipeStartX;\n                    \n                    if (Math.abs(diff) > 50) { // Minimum swipe distance\n                      if (swipeDirection === 'right') {\n                        handlePrevWidget();\n                      } else {\n                        handleNextWidget();\n                      }\n                    }\n                    \n                    setSwipeStartX(null);\n                    setSwipeDirection(null);\n                    setIsSwiping(false);\n                    \n                    // Record the time of manual navigation for swipe\n                    setLastManualNavigation(Date.now());\n                    }\n                  }}\n                  // Remove mouse-based swipes for desktop completely\n                  onMouseDown={undefined}\n                  onMouseMove={undefined}\n                  onMouseUp={undefined}\n                style={{\n                  backgroundColor: 'rgba(255, 255, 255, 0.04)',\n                  backdropFilter: 'none',\n                  WebkitBackdropFilter: 'none',\n                  border: '1px solid rgba(255, 255, 255, 0.15)',\n                  padding: '14px',\n                  transform: 'translateZ(0)',\n                  WebkitTransform: 'translateZ(0)',\n                    boxShadow: '0 4px 12px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.08)',\n                    touchAction: 'pan-y', // Allow vertical scrolling but handle horizontal swipes\n                  cursor: 'pointer' // Always use pointer cursor for web users\n                }}\n              >\n                <div className=\"flex items-center mb-3\">\n                    <div className={`w-10 h-10 rounded-md flex items-center justify-center mr-3 shadow-md ${widgets[currentWidgetIndex].iconBgColor} overflow-hidden border border-white/10`}>\n                      {widgets[currentWidgetIndex].type === 'workout' && (\n                        <img \n                          src=\"./icons/apps/kineship.png\" \n                          alt=\"Kineship\" \n                          className=\"w-full h-full object-cover\" \n                          style={{ borderRadius: '0.375rem' }}\n                        />\n                      )}\n                      {widgets[currentWidgetIndex].type === 'notes' && (\n                        <StickyNote size={20} className=\"text-white\" strokeWidth={1.5} />\n                      )}\n                      {widgets[currentWidgetIndex].type === 'partiful' && (\n                        <img \n                          src=\"./icons/apps/partiful.png\" \n                          alt=\"Partiful\" \n                          className=\"w-6 h-6 object-contain\" \n                        />\n                    )}\n                  </div>\n                    <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center justify-between\">\n                        <h3 className=\"text-[15px] font-medium text-white text-sharp truncate mr-2\" style={{ \n                          WebkitFontSmoothing: 'antialiased', \n                          MozOsxFontSmoothing: 'grayscale',\n                          fontWeight: 400,\n                          maxWidth: widgets[currentWidgetIndex].type === 'notes' ? '100%' : 'calc(100% - 45px)'\n                        }}>\n                          {widgets[currentWidgetIndex].type === 'workout' ? 'barry\\'s - lift x run' : \n                           widgets[currentWidgetIndex].type === 'notes' ? selectedNote.title : \n                           selectedEvent.title}\n                        </h3>\n                        {/* Show timestamp for all widgets, including notes */}\n                        <p className=\"text-[14px] text-white/70 text-sharp ml-1 flex-shrink-0\" style={{ WebkitFontSmoothing: 'antialiased', MozOsxFontSmoothing: 'grayscale', fontWeight: 350 }}>\n                          {widgets[currentWidgetIndex].type === 'notes' \n                            ? getRelativeDate(selectedNote.date) // Show 3-letter day for notes in the top right\n                            : widgets[currentWidgetIndex].timestamp}\n                      </p>\n                    </div>\n                      <p className=\"text-[14px] text-white/60 font-normal text-sharp\" style={{ WebkitFontSmoothing: 'antialiased', MozOsxFontSmoothing: 'grayscale', fontWeight: 300 }}>\n                        {widgets[currentWidgetIndex].type === 'notes' ? \n                          'notes' : // Show \"notes\" in the subtitle position\n                          widgets[currentWidgetIndex].timestampLabel}\n                    </p>\n                  </div>\n                </div>\n                <div>\n                    <div className=\"flex items-center justify-between mb-1\">\n                      <div className=\"flex items-center max-w-[80%] min-w-0 overflow-hidden\">\n                        {/* Show title for all widgets in the same format */}\n                        <p className=\"text-[14px] text-white/70 font-medium truncate pr-2 text-sharp leading-tight w-full\" style={{ \n                          WebkitFontSmoothing: 'antialiased', \n                          MozOsxFontSmoothing: 'grayscale', \n                          textShadow: 'none', \n                          fontWeight: 400,\n                          letterSpacing: '0.01em'\n                        }}>\n                          {widgets[currentWidgetIndex].type === 'notes' ? \n                            '' : // Remove duplicate title for notes widget\n                            widgets[currentWidgetIndex].type === 'partiful' ?\n                            `${selectedEvent.attendees} approved` :\n                            'with megan, sam'}\n                        </p>\n                      </div>\n                      <div className=\"flex items-center flex-shrink-0\">\n                        {/* Workout circles */}\n                        {widgets[currentWidgetIndex].type === 'workout' && (\n                          <div className=\"flex -space-x-1\">\n                            <div className=\"inline-block h-6 w-6 rounded-full ring-1 ring-white/20 bg-gradient-to-br from-[#62BE9C]/60 to-[#62BE9C]/30 shadow-md z-30 relative overflow-hidden\">\n                              <div className=\"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent\"></div>\n                            </div>\n                            <div className=\"inline-block h-6 w-6 rounded-full ring-1 ring-white/20 bg-gradient-to-br from-[#62BE9C]/50 to-[#62BE9C]/20 shadow-md z-20 relative overflow-hidden\">\n                              <div className=\"absolute inset-0 bg-gradient-to-br from-white/15 to-transparent\"></div>\n                            </div>\n                            <div className=\"inline-block h-6 w-6 rounded-full ring-1 ring-white/20 bg-gradient-to-br from-[#62BE9C]/40 to-[#62BE9C]/10 shadow-md z-10 relative overflow-hidden\">\n                              <div className=\"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent\"></div>\n                            </div>\n                          </div>\n                        )}\n                        {/* Partiful attendee circles */}\n                        {widgets[currentWidgetIndex].type === 'partiful' && (\n                          <div className=\"flex -space-x-1\">\n                            <div className=\"inline-block h-6 w-6 rounded-full ring-1 ring-white/20 bg-gradient-to-br from-[#FF4081]/60 to-[#FF4081]/30 shadow-md z-10 relative overflow-hidden\">\n                              <div className=\"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent\"></div>\n                            </div>\n                            <div className=\"inline-block h-6 w-6 rounded-full ring-1 ring-white/20 bg-gradient-to-br from-[#FF4081]/50 to-[#FF4081]/20 shadow-md z-20 relative overflow-hidden\">\n                              <div className=\"absolute inset-0 bg-gradient-to-br from-white/15 to-transparent\"></div>\n                            </div>\n                            <div className=\"inline-block h-6 w-6 rounded-full ring-1 ring-white/20 bg-gradient-to-br from-[#FF4081]/40 to-[#FF4081]/10 shadow-md z-30 relative overflow-hidden\">\n                              <div className=\"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent\"></div>\n                            </div>\n                          </div>\n                        )}\n                        {/* Notes icon - removed circles, using just a single note icon instead */}\n                        {widgets[currentWidgetIndex].type === 'notes' && (\n                          <div className=\"flex items-center\">\n                            {/* Removed the circle with the note icon */}\n                          </div>\n                        )}\n                        {/* Only show subtitle if it exists */}\n                        {widgets[currentWidgetIndex].subtitle && (\n                          <p className=\"text-[14px] text-white/70 font-normal whitespace-nowrap pr-2 text-sharp\" style={{ WebkitFontSmoothing: 'antialiased', MozOsxFontSmoothing: 'grayscale', textShadow: 'none' }}>\n                            {widgets[currentWidgetIndex].subtitle}\n                          </p>\n                        )}\n                  </div>\n                  </div>\n                    \n                    {/* Content preview area - consistent height across all widgets */}\n                    <div className={`${widgets[currentWidgetIndex].type === 'notes' ? 'min-h-[2.8em]' : 'min-h-[2.8em]'} mb-1`}>\n                      {/* Apply consistent styling to all widget content */}\n                      <p className=\"text-white/65 font-normal px-1 text-sharp overflow-hidden\" style={{ \n                        WebkitFontSmoothing: 'antialiased', \n                        MozOsxFontSmoothing: 'grayscale', \n                        textShadow: 'none',\n                        textOverflow: 'ellipsis',\n                        display: '-webkit-box',\n                        WebkitLineClamp: '2',\n                        WebkitBoxOrient: 'vertical',\n                        lineHeight: '1.3',\n                        letterSpacing: '0.01em',\n                        fontWeight: 350,\n                        marginTop: widgets[currentWidgetIndex].type === 'notes' ? '-8px' : '-2px',\n                        marginBottom: widgets[currentWidgetIndex].type === 'notes' ? '6px' : '6px',\n                        paddingBottom: widgets[currentWidgetIndex].type === 'notes' ? '0px' : '0px',\n                        maxWidth: '100%',\n                        fontSize: '12px'\n                      }}>\n                        {widgets[currentWidgetIndex].type === 'notes' \n                          ? (selectedNote.title.includes(\"hello world\") \n                              ? \"my north star: designing tech that centres human longevity...\"\n                              : selectedNote.title.includes(\"kineship\") \n                                ? \"the kineship app shares your workout calendar with your circles...\"\n                                : (selectedNote.content && selectedNote.content.endsWith('...') \n                                    ? selectedNote.content \n                                    : (selectedNote.content || '') + '...'))\n                          : widgets[currentWidgetIndex].type === 'partiful'\n                            ? '' // Empty content for partiful as requested\n                            : '' // Empty content for workout\n                        }\n                      </p>\n                    </div>\n                </div>\n              </motion.div>\n              </AnimatePresence>\n              \n              {/* Indicator Dots */}\n              <div className=\"flex items-center justify-center mt-3 space-x-2\">\n                {widgets.map((_, index) => (\n                  <div\n                    key={`indicator-${index}`}\n                    onClick={() => {\n                      // Record the time of manual navigation\n                      setLastManualNavigation(Date.now());\n                      \n                      // Apply smooth transition between widgets when dots are clicked\n                      const direction = index > currentWidgetIndex ? 1 : -1;\n                      \n                      // Create a smoother transition by animating through each widget\n                      const animateToIndex = () => {\n                        if (currentWidgetIndex !== index) {\n                          setCurrentWidgetIndex(prev => {\n                            const next = prev + direction;\n                            // Handle wrapping around the ends\n                            if (next < 0) return widgets.length - 1;\n                            if (next >= widgets.length) return 0;\n                            return next;\n                          });\n                        }\n                      };\n                      \n                      // Start the transition\n                      animateToIndex();\n                    }}\n                  >\n                    <div \n                      className={`h-[6px] w-[6px] rounded-full ${\n                        currentWidgetIndex === index ? 'bg-white' : 'bg-white/40'\n                      }`}\n                      style={{\n                        transition: 'all 0.3s ease'\n                      }}\n                    />\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n          \n          {/* Expanding App Icon Animation */}\n          {appPosition && clonedAppIcon.app && !activeApp && (\n            <motion.div\n              className=\"absolute rounded-[12px] bg-black/35 backdrop-blur-2xl z-20 overflow-hidden\"\n              initial={{\n                width: appPosition.width,\n                height: appPosition.height,\n                x: appPosition.x - appPosition.width/2,\n                y: appPosition.y - appPosition.height/2,\n                borderRadius: 12,\n              }}\n              animate={{\n                width: '100%',\n                height: '100%',\n                x: 0,\n                y: 0,\n                borderRadius: 24,\n              }}\n              transition={clonedAppIcon.app?.id === 'partiful' \n                ? { type: \"spring\", stiffness: 300, damping: 40, mass: 1.3, duration: 0.4 } \n                : appOpeningTransition}\n            >\n              {/* Icon in center during expansion */}\n              <motion.div\n                className=\"absolute flex items-center justify-center\"\n                initial={{\n                  width: appPosition.width,\n                  height: appPosition.height,\n                  x: '50%',\n                  y: '50%',\n                  opacity: 1,\n                  transform: 'translate(-50%, -50%)',\n                }}\n                animate={{\n                  opacity: 0,\n                  scale: 0.5,\n                }}\n                transition={{ duration: 0.15, delay: 0.1 }}\n              >\n                <div className={`bg-gradient-to-br ${clonedAppIcon.app.color} h-full w-full rounded-[12px] flex items-center justify-center`}>\n                  {clonedAppIcon.app.icon === 'Partiful' ? (\n                    <img src=\"./icons/apps/partiful.png\" alt=\"Partiful\" className=\"w-6 h-6\" />\n                  ) : (\n                    <AppIcon\n                      icon={clonedAppIcon.app.icon}\n                      name=\"\"\n                      color={clonedAppIcon.app.color}\n                      onClick={() => {}}\n                      showLabel={false}\n                    />\n                  )}\n                </div>\n              </motion.div>\n            </motion.div>\n          )}\n          \n          {/* App Content Layer - For all apps */}\n          {activeApp && ActiveComponent && (\n            <div \n              className=\"absolute inset-0 z-30 overflow-hidden flex items-center justify-center\"\n              style={{ \n                opacity: activeApp ? 1 : 0,\n                transition: 'opacity 0.15s ease-in',\n                transitionDelay: '0.1s'\n              }}\n            >\n              <AnimatePresence mode=\"wait\">\n                <ActiveComponent key={activeApp} />\n              </AnimatePresence>\n            </div>\n          )}\n        </motion.div>\n        \n        {/* Navigation arrows - positioned absolutely to not affect container positioning */}\n        {activeApp && (\n          <div \n            className=\"absolute w-full mt-4 px-1\"\n            style={{\n              opacity: isLoaded ? 1 : 0,\n              transition: \"opacity 0.3s ease-in-out\",\n              pointerEvents: \"auto\",\n              bottom: '-50px',\n              right: '0',\n              display: 'flex',\n              justifyContent: 'flex-end'\n            }}\n          >\n            {/* Back button - always goes back to home - moved to right side for thumb navigation */}\n            <motion.div \n              initial={{ opacity: 0, x: -5 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -5 }}\n              transition={{ \n                x: { duration: 0.3, delay: 4.5 },\n                opacity: { \n                  duration: 2.5,\n                  delay: 1.5 \n                }\n              }}\n              onClick={!isAnimating ? handleClose : undefined}\n              whileHover={{ scale: 1.1 }}\n              whileTap={{ scale: 0.9 }}\n            >\n              <ChevronLeft size={28} className=\"text-white\" strokeWidth={1.5} />\n            </motion.div>\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n}\n\nexport default App;","import React from 'react'\r\nimport ReactDOM from 'react-dom/client'\r\nimport App from './App.tsx'\r\nimport './index.css'\r\n\r\n// Add spotify auth listener\r\nwindow.addEventListener('message', async (event) => {\r\n  // Check for spotify auth success message\r\n  if (event.data && event.data.type === 'spotify-auth-success') {\r\n    console.log('Spotify auth success!', event.data);\r\n    try {\r\n      // Fetch recently played tracks\r\n      const response = await fetch('/spotify-widget/api/spotify/recently-played');\r\n      const data = await response.json();\r\n      // Store the data in localStorage for the main app to use\r\n      localStorage.setItem('spotifyRecentlyPlayed', JSON.stringify(data));\r\n      \r\n      // Dispatch a custom event that the main app can listen for\r\n      window.dispatchEvent(new CustomEvent('spotify-data-updated'));\r\n    } catch (error) {\r\n      console.error('Error fetching Spotify data:', error);\r\n    }\r\n  }\r\n});\r\n\r\n// Configure framer-motion for iOS-like rendering\r\nif (typeof window !== 'undefined') {\r\n  // Remove 60fps cap for smoother animations on high refresh rate displays\r\n  // This will use the device's refresh rate for optimal smoothness\r\n  window.requestAnimationFrame = function() {\r\n    const originalRAF = window.requestAnimationFrame;\r\n    return function(callback: FrameRequestCallback) {\r\n      return originalRAF.call(window, callback);\r\n    };\r\n  }();\r\n}\r\n\r\n// Enable concurrent mode rendering for improved performance\r\nReactDOM.createRoot(document.getElementById('root')!).render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n)\r\n"],"names":["m","require$$0","defaultAttributes","toKebabCase","string","createLucideIcon","iconName","iconNode","Component","forwardRef","color","size","strokeWidth","absoluteStrokeWidth","className","children","rest","ref","createElement","tag","attrs","AtSign","ChevronLeft","ChevronRight","Lock","PartyPopper","Send","Shirt","StickyNote","Utensils","X","AppIcon","icon","name","onClick","showLabel","prefersReducedMotion","useReducedMotion","iconColors","iconMap","jsx","springTransition","displayName","handleClick","e","createTactileEffect","jsxs","motion","notes","PinIcon","VideoPlayerOverlay","videoUrl","onClose","videoId","url","regExp","match","embedUrl","ReactDOM","NotesScreen","hasInteracted","setHasInteracted","useState","chevronControls","useAnimation","selectedNote","setSelectedNote","widgetNoteId","setWidgetNoteId","currentNoteIndex","setCurrentNoteIndex","swipeDirection","setSwipeDirection","swipeStartX","setSwipeStartX","setVideoUrl","openedFromHelloWorld","setOpenedFromHelloWorld","isFirstViewOfHelloWorld","setIsFirstViewOfHelloWorld","isViewingDetailRef","useRef","showDots","setShowDots","isMobileDevice","setIsMobileDevice","noteContentRef","useEffect","noteToOpen","note","setIsViewingDetail","noteIndex","checkIfMobile","userAgent","isMobile","value","mainContainer","handleAppBackClick","shouldGoToHome","helloWorldNote","noteId","markNoteAsViewed","handleVideoLink","getRelativeDate","dateStr","now","today","yesterdayDate","yesterday","day","month","year","pinnedNotes","allNotes","a","b","dayA","monthA","yearA","dayB","monthB","yearB","closeNote","isHelloWorldNote","chevronVariants","handleInteraction","shouldShowPulsingDot","viewedNotes","containerVariants","itemVariants","handleNoteClick","n","closeVideoPlayer","navigateToNextNote","allNotesArray","nextNote","navigateToPrevNote","prevNote","AnimatePresence","_a","diff","newDirection","_","text","part","index","SocialsScreen","randomizedSocials","setRandomizedSocials","socials","isFirstRender","setIsFirstRender","socialsCopy","emailApp","app","cornerApp","availableCorners","pos","randomCornerPosition","shuffledPositions","iconShadowStyle","icon3DStyle","social","PartifulEvent","onBack","eventData","onScrollToBottom","hasScrolled","setHasScrolled","isExpanded","setIsExpanded","containerRef","eventTitle","eventDate","eventTime","descriptionText","spotifyLink","spotifyLyrics","eventDateTime","formattedDate","handleScroll","scrollTop","scrollHeight","clientHeight","currentContainer","toggleExpanded","prev","preventBubbling","preventTouchBubbling","hostPhotos","approvedCount","handleExternalLinkClick","textContainerVariants","line","acc","lineIndex","renderIconWithText","_b","host","Fragment","paragraph","colorSchemes","wildcardColors","eventIdNum","schemeIndex","colors","wildcardIndex","gradientDirections","directionIndex","colorMatches","color1","color2","shouldFlip","shouldAdjustOpacity","opacity","animationDelay","events","EventScreen","showPartiful","setShowPartiful","selectedEventId","setSelectedEventId","widgetEventId","setWidgetEventId","defaultHighlightEventId","setDefaultHighlightEventId","showSwipeIndicator","setShowSwipeIndicator","hasScrolledToBottom","setHasScrolledToBottom","eventToOpen","event","sortedEvents","firstClickableEvent","eventId","viewedEvents","firstTimeUpcomingEvents","markEventAsViewed","handleEventPress","selectedEvent","currentIndex","getNextClickableEvent","startIndex","direction","totalEvents","offset","i","prevEventId","nextEventId","handleDragEnd","info","allEvents","isPastMonth","oneMonthAgo","pastMonthEvents","remainingEvents","element","createWidgetSwipeFeedback","dateObj","dayOfWeek","App","activeApp","setActiveApp","appsRef","mainContainerRef","appPosition","setAppPosition","isAnimating","setIsAnimating","currentAppElement","setCurrentAppElement","windowHeight","setWindowHeight","setIsAppleDevice","isLoaded","setIsLoaded","isHighPerformanceDevice","setIsHighPerformanceDevice","recentTracks","currentWidgetIndex","setCurrentWidgetIndex","isFirstVisit","setIsFirstVisit","isWidgetHovered","setIsWidgetHovered","isSwiping","setIsSwiping","widgetRef","hasShownFirstDisplay","setHasShownFirstDisplay","lastManualNavigation","setLastManualNavigation","useMemo","unlockNotes","recentEvents","randomIndex","widgets","twoDaysAgo","rotationInterval","prevIndex","isHighPerf","setHeight","vh","isApple","initialTimer","fullLoadTimer","styleElement","appId","handleAppClick","clonedAppIcon","setClonedAppIcon","apps","handleClose","appElement","containerElement","appRect","containerRect","selectedApp","ActiveComponent","activeAppName","appOpeningTransition","handleWidgetClick","widgetType","handleNextWidget","img","el","next","_c","data","error","originalRAF","callback","React"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12]}