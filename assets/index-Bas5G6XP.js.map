{"version":3,"file":"index-Bas5G6XP.js","sources":["../../node_modules/react-dom/client.js","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/at-sign.js","../../node_modules/lucide-react/dist/esm/icons/chevron-left.js","../../node_modules/lucide-react/dist/esm/icons/chevron-right.js","../../node_modules/lucide-react/dist/esm/icons/lock.js","../../node_modules/lucide-react/dist/esm/icons/party-popper.js","../../node_modules/lucide-react/dist/esm/icons/send.js","../../node_modules/lucide-react/dist/esm/icons/shirt.js","../../node_modules/lucide-react/dist/esm/icons/sticky-note.js","../../node_modules/lucide-react/dist/esm/icons/utensils.js","../../node_modules/lucide-react/dist/esm/icons/x.js","../../src/components/AppIcon.tsx","../../src/data/notes.ts","../../src/screens/NotesScreen.tsx","../../src/screens/SocialsScreen.tsx","../../src/components/PartifulEvent.tsx","../../src/data/events.ts","../../src/screens/EventScreen.tsx","../../src/components/AppBackground.tsx","../../src/components/DesktopOverlay.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase().trim();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({\n      color = \"currentColor\",\n      size = 24,\n      strokeWidth = 2,\n      absoluteStrokeWidth,\n      className = \"\",\n      children,\n      ...rest\n    }, ref) => {\n      return createElement(\n        \"svg\",\n        {\n          ref,\n          ...defaultAttributes,\n          width: size,\n          height: size,\n          stroke: color,\n          strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n          className: [\"lucide\", `lucide-${toKebabCase(iconName)}`, className].join(\" \"),\n          ...rest\n        },\n        [\n          ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n          ...Array.isArray(children) ? children : [children]\n        ]\n      );\n    }\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AtSign = createLucideIcon(\"AtSign\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"4\", key: \"4exip2\" }],\n  [\"path\", { d: \"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8\", key: \"7n84p3\" }]\n]);\n\nexport { AtSign as default };\n//# sourceMappingURL=at-sign.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronLeft = createLucideIcon(\"ChevronLeft\", [\n  [\"path\", { d: \"m15 18-6-6 6-6\", key: \"1wnfg3\" }]\n]);\n\nexport { ChevronLeft as default };\n//# sourceMappingURL=chevron-left.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronRight = createLucideIcon(\"ChevronRight\", [\n  [\"path\", { d: \"m9 18 6-6-6-6\", key: \"mthhwq\" }]\n]);\n\nexport { ChevronRight as default };\n//# sourceMappingURL=chevron-right.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Lock = createLucideIcon(\"Lock\", [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n]);\n\nexport { Lock as default };\n//# sourceMappingURL=lock.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst PartyPopper = createLucideIcon(\"PartyPopper\", [\n  [\"path\", { d: \"M5.8 11.3 2 22l10.7-3.79\", key: \"gwxi1d\" }],\n  [\"path\", { d: \"M4 3h.01\", key: \"1vcuye\" }],\n  [\"path\", { d: \"M22 8h.01\", key: \"1mrtc2\" }],\n  [\"path\", { d: \"M15 2h.01\", key: \"1cjtqr\" }],\n  [\"path\", { d: \"M22 20h.01\", key: \"1mrys2\" }],\n  [\n    \"path\",\n    {\n      d: \"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10\",\n      key: \"bpx1uq\"\n    }\n  ],\n  [\n    \"path\",\n    { d: \"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17\", key: \"1pd0s7\" }\n  ],\n  [\n    \"path\",\n    { d: \"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7\", key: \"zq5xbz\" }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z\",\n      key: \"4kbmks\"\n    }\n  ]\n]);\n\nexport { PartyPopper as default };\n//# sourceMappingURL=party-popper.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"Send\", [\n  [\"path\", { d: \"m22 2-7 20-4-9-9-4Z\", key: \"1q3vgg\" }],\n  [\"path\", { d: \"M22 2 11 13\", key: \"nzbqef\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shirt = createLucideIcon(\"Shirt\", [\n  [\n    \"path\",\n    {\n      d: \"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z\",\n      key: \"1wgbhj\"\n    }\n  ]\n]);\n\nexport { Shirt as default };\n//# sourceMappingURL=shirt.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst StickyNote = createLucideIcon(\"StickyNote\", [\n  [\"path\", { d: \"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z\", key: \"qazsjp\" }],\n  [\"path\", { d: \"M15 3v4a2 2 0 0 0 2 2h4\", key: \"40519r\" }]\n]);\n\nexport { StickyNote as default };\n//# sourceMappingURL=sticky-note.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Utensils = createLucideIcon(\"Utensils\", [\n  [\"path\", { d: \"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2\", key: \"cjf0a3\" }],\n  [\"path\", { d: \"M7 2v20\", key: \"1473qp\" }],\n  [\"path\", { d: \"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7\", key: \"1ogz0v\" }]\n]);\n\nexport { Utensils as default };\n//# sourceMappingURL=utensils.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","import { motion, useReducedMotion } from 'framer-motion';\nimport React, { forwardRef } from 'react';\nimport { StickyNote, AtSign, PartyPopper } from 'lucide-react';\nimport { createTactileEffect } from '../App';\n\ninterface AppIconProps {\n  icon: string;\n  name: string;\n  color: string;\n  onClick: () => void;\n  className?: string;\n  showLabel?: boolean;\n}\n\nexport const AppIcon = forwardRef<HTMLDivElement, AppIconProps>(({ \n  icon, \n  name, \n  color, \n  onClick, \n  className = '',\n  showLabel = true\n}, ref) => {\n  const prefersReducedMotion = useReducedMotion();\n  \n  // iOS 2025 squircle icons with glassy depth (restrained)\n  const iconMap: Record<string, React.ReactElement> = {\n    'StickyNote': (\n      <div className=\"w-full h-full flex items-center justify-center\" style={{\n        background: 'linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)',\n        backdropFilter: 'blur(10px)',\n        WebkitBackdropFilter: 'blur(10px)',\n        borderRadius: '13px',\n        border: '1px solid rgba(255, 255, 255, 0.18)',\n        position: 'relative',\n        overflow: 'hidden',\n        boxShadow: '0 8px 32px 0 rgba(0, 0, 0, 0.37)'\n      }}>\n        <div style={{\n          position: 'absolute',\n          inset: 0,\n          background: 'linear-gradient(180deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 100%)'\n        }} />\n        <StickyNote className=\"w-7 h-7 text-white/90 relative z-10\" strokeWidth={1.5} />\n      </div>\n    ),\n    'AtSign': (\n      <div className=\"w-full h-full flex items-center justify-center\" style={{\n        background: 'linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)',\n        backdropFilter: 'blur(10px)',\n        WebkitBackdropFilter: 'blur(10px)',\n        borderRadius: '13px',\n        border: '1px solid rgba(255, 255, 255, 0.18)',\n        position: 'relative',\n        overflow: 'hidden',\n        boxShadow: '0 8px 32px 0 rgba(0, 0, 0, 0.37)'\n      }}>\n        <div style={{\n          position: 'absolute',\n          inset: 0,\n          background: 'linear-gradient(180deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 100%)'\n        }} />\n        <AtSign className=\"w-7 h-7 text-white/90 relative z-10\" strokeWidth={1.5} />\n      </div>\n    ),\n    'PartyPopper': (\n      <div className=\"w-full h-full flex items-center justify-center\" style={{\n        background: 'linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)',\n        backdropFilter: 'blur(10px)',\n        WebkitBackdropFilter: 'blur(10px)',\n        borderRadius: '13px',\n        border: '1px solid rgba(255, 255, 255, 0.18)',\n        position: 'relative',\n        overflow: 'hidden',\n        boxShadow: '0 8px 32px 0 rgba(0, 0, 0, 0.37)'\n      }}>\n        <div style={{\n          position: 'absolute',\n          inset: 0,\n          background: 'linear-gradient(180deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 100%)'\n        }} />\n        <PartyPopper className=\"w-7 h-7 text-white/90 relative z-10\" strokeWidth={1.5} />\n      </div>\n    ),\n    'Partiful': (\n      <div className=\"w-full h-full flex items-center justify-center\" style={{\n        background: 'linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)',\n        backdropFilter: 'blur(10px)',\n        WebkitBackdropFilter: 'blur(10px)',\n        borderRadius: '13px',\n        border: '1px solid rgba(255, 255, 255, 0.18)',\n        position: 'relative',\n        overflow: 'hidden',\n        boxShadow: '0 8px 32px 0 rgba(0, 0, 0, 0.37)'\n      }}>\n        <div style={{\n          position: 'absolute',\n          inset: 0,\n          background: 'linear-gradient(180deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 100%)'\n        }} />\n        <img src=\"./icons/apps/partiful.png\" alt=\"Partiful\" className=\"w-7 h-7 relative z-10 opacity-90\" />\n      </div>\n    ),\n  };\n\n  // Apple-like spring animation\n  const springTransition = {\n    type: \"spring\",\n    damping: 30,\n    stiffness: 400,\n    mass: 0.8,\n    duration: prefersReducedMotion ? 0 : undefined\n  };\n\n  // Keep all names on one line\n  const displayName = name;\n\n  const handleClick = (e: React.MouseEvent) => {\n    // For animation purposes, sometimes we need to prevent clicks\n    if (className.includes('invisible')) return;\n    \n    // Create a quick pulse effect before launching\n    createTactileEffect();\n    \n    // Allow the pulse effect to complete before launching the app\n    setTimeout(() => {\n      onClick();\n    }, 10);\n  };\n\n  return (\n    <motion.div\n      ref={ref}\n      whileHover={{ scale: 1.05 }}\n      whileTap={{ scale: 0.95 }}\n      transition={springTransition}\n      onClick={handleClick}\n      className={`flex flex-col items-center will-change-transform hardware-accelerated ${className}`}\n      style={{ \n        willChange: 'transform, opacity'\n      }}\n    >\n      <motion.div \n        className={`w-[60px] h-[60px] rounded-[14px] flex items-center justify-center will-change-transform relative overflow-hidden`}\n        whileHover={{ scale: 1.05 }}\n        transition={springTransition}\n        style={{\n          aspectRatio: \"1/1\"\n        }}\n      >\n        {iconMap[icon] || <div className=\"w-7 h-7 text-white\">?</div>}\n      </motion.div>\n      {showLabel && (\n        <span \n          className=\"text-[14px] mt-[6px] text-center max-w-[70px]\" \n          style={{\n            fontFamily: '-apple-system, BlinkMacSystemFont, \"SF Pro Text\", \"SF Pro Display\", system-ui, sans-serif',\n            fontWeight: 500,\n            letterSpacing: '0',\n            lineHeight: '1.1',\n            color: 'rgba(255, 255, 255, 0.95)',\n            overflow: 'hidden',\n            textOverflow: 'ellipsis',\n            whiteSpace: 'nowrap',\n            WebkitFontSmoothing: 'antialiased',\n            MozOsxFontSmoothing: 'grayscale'\n          }}\n        >\n          {displayName}\n        </span>\n      )}\n    </motion.div>\n  );\n});","export type NoteItem = {\n  id: number;\n  title: string;\n  content: string;\n  date: string;\n  timeframe: 'recent' | 'older';\n  pinned?: boolean;\n  style?: { \n    color?: string;\n    pointerEvents?: 'none' | 'auto';\n  };\n  locked?: boolean;\n};\n\nexport const notes: NoteItem[] = [\n  { \n    id: 1, \n    title: \"hello world Ëš\", \n    content: `Hey, I'm Fareeha âœ¨  \n\nYou might've found me through one of my Partifuls where I made you eat something. \n\nBeyond hosting, I'm on the launch team for [Symbolic Fusion](https://symbolicfusion.com), a new technology for agent builders. I also built [Kineship](note:2), a social layer for workouts. \n\nIn Spring 2026, I'll be directing a fashion show. It's very specific. More on this soon ðŸ©µ \n\n<span style=\"font-weight: bold;\">things I love:</span>  \nâ–¹ taking forever to [set a table](app:partiful)\nâ–¹ giving people [apples](note:3) they didn't ask for \nâ–¹ keeping my Oura ring happy ðŸ«¶\n\nIf this feels like your kind of world, I'd love to [hear from you.](mailto:fareeha@kineship.com)`,\n    date: \"\",\n    timeframe: 'recent',\n    pinned: true\n  },\n  { \n    id: 2, \n    title: \"kineship\", \n    content: `\n<div style=\"display: flex; align-items: center; margin-bottom: 0px; padding-bottom: 0px;\">\n  <img src=\"/icons/apps/kineship-expand.png\" alt=\"Kineship\" style=\"width: 60px; height: 60px; margin-top: -15px; border-radius: 12px; border: 2px solid #fff; cursor: pointer; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2), 0 0 1px rgba(255, 255, 255, 0.5) inset; background: linear-gradient(180deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0) 100%), linear-gradient(to bottom, #f8f9fa, #e2e6ea); transition: transform 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94), background 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\" \n    onmouseover=\"this.style.transform='scale(1.05)'; this.style.background='linear-gradient(180deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0.05) 100%), linear-gradient(to bottom, #e2e6ea, #f8f9fa)'; this.style.boxShadow='0 4px 8px rgba(0, 0, 0, 0.25), 0 0 2px rgba(255, 255, 255, 0.6) inset';\"\n    onmouseout=\"this.style.transform='scale(1)'; this.style.background='linear-gradient(180deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0) 100%), linear-gradient(to bottom, #f8f9fa, #e2e6ea)'; this.style.boxShadow='0 2px 6px rgba(0, 0, 0, 0.2), 0 0 1px rgba(255, 255, 255, 0.5) inset';\"\n    ontouchstart=\"this.style.transform='scale(0.97)'; this.style.boxShadow='0 1px 3px rgba(0, 0, 0, 0.15), 0 0 1px rgba(255, 255, 255, 0.3) inset'; this.style.background='linear-gradient(180deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 100%), linear-gradient(to bottom, #f0f0f0, #e0e0e0)';\"\n    ontouchend=\"this.style.transform='scale(1)'; this.style.boxShadow='0 2px 6px rgba(0, 0, 0, 0.2), 0 0 1px rgba(255, 255, 255, 0.5) inset'; this.style.background='linear-gradient(180deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0) 100%), linear-gradient(to bottom, #f8f9fa, #e2e6ea)';\"\n    onclick=\"window.open('https://kineship.com', '_blank')\" />\n</div> \nIt feels like much of how we connect today involves adding more: more invites, more plans, more coordination.\n\nLately, I\\'ve been wondering if there might be a kind of closeness that fits into our day as it is.\n\nLike when you swap your usual 6pm class for the 5, because your friend\\'s going to that one. Or wandering to the farmers\\' market the same time as your neighbours... your day suddenly feels a touch warmer.\n\nIt might seem small, but I\\'ve learned that researchers have documented <a href='https://pmc.ncbi.nlm.nih.gov/articles/PMC5137339/' target='_blank' rel='noopener noreferrer' class='custom-pink-link'>intentional synchrony</a> as a natural human principle rooted in our nervous systems. These overlaps are tied to lower loneliness, better regulation, and long-term wellbeing - all core to how we can rebuild connection at scale.\n\nSurprisingly, almost none of the social platforms we use today are designed to support this. Instead, they often keep us observing each other\\'s lives from a distance.\n\nThe aim for Kineship is to embrace a gentler kind of togetherness. It doesn\\'t ask you to schedule anything or make a plan. It simply shows you when your paths could alignâ€”spin, pilates, Barry\\'s, whatever your thing is. Some soft cues toward shared presence, and a bit more everyday serendipity.\n\nI\\'m hoping it makes it just a little easier to say hi, share laughs, linger a bit longer. Even with people you often see around, but don\\'t quite know (yet!) As simple as a smoothie after class ðŸ˜Š\n    `,\n    date: \"02/05/25\",\n    timeframe: 'recent',\n    pinned: false\n  },\n  { \n    id: 3,\n    title: 'apples',\n    content: `sugarbee - 10/10\n    pink lady - 9/10\n    pinata - 9/10\n    ambrosia - 8.5/10\n    fuji - 7.5/10\n    honeycrisp - 7/10\n    gala - 6.5/10\n    red delicious - 2/10\n    \n    to try:\n    black diamond\n    gravenstein\n    calville blanc d'hiver`,\n    date: '01/05/25',\n    timeframe: 'recent',\n    pinned: false\n  },\n  { \n    id: 4,\n    title: 'projects',\n    content: `â–¹ systems design for boutique wellness spaces [infra mapping, product integration](https://silicon-divan-443.notion.site/Retention-System-Design-for-Boutique-Fitness-1f7a4827ee3380599df9c1afc31689f1)\n\nâ–¹ social design in health & community ([tessel](https://fareeha-s.github.io/Tessel/), [vfc](https://impact.ventureforcanada.ca/2023/programs/fellowship-alumni), [h&s gala](https://youtu.be/VMxSzVREUgY), [dc fashion show](https://youtu.be/vXCGUXAQfOs?si=JUGWTpF-NB_2DE3a))\n\nâ–¹ winning team, healthcare innovation ([mit bc x harvard med](https://silicon-divan-443.notion.site/MedBridge-235a4827ee33804b8a05c087946d7a80))\n\nâ–¹ ice/breakers ([#3 on ProductHunt](https://www.producthunt.com/products/icebreakers-2?launch=icebreakers-b45694ac-4bea-4ec9-870f-67a447107f26))`,\n    date: '29/12/24',\n    timeframe: 'recent',\n    pinned: false\n  },\n  { \n    id: 5, \n    title: \"dinner tables...\", \n    content: \"\", \n    date: \"\", \n    timeframe: 'older',\n    pinned: false,\n    locked: true,\n    style: { color: 'rgba(128, 128, 128, 0.5)', pointerEvents: 'none' }\n  },\n  { \n    id: 6, \n    title: \"layering a social stack...\", \n    content: \"\", \n    date: \"\", \n    timeframe: 'older',\n    locked: true\n  }\n]; ","import React, { useState, useEffect, useRef } from 'react';\nimport type { AppScreenProps as BaseAppScreenProps } from '../types'; \nimport { motion, useAnimation, useReducedMotion, AnimatePresence } from 'framer-motion';\nimport { ChevronRight, X, Lock } from 'lucide-react';\nimport { createTactileEffect } from '../App';\nimport { notes, NoteItem } from '../data/notes';\nimport ReactDOM from 'react-dom';\n\n// Declare the global window property for TypeScript\ndeclare global {\n  interface Window {\n    noteScreenBackHandler?: () => boolean;\n    isNoteDetailView: boolean; \n    setIsNoteDetailView: (value: boolean) => void; \n    isViewingNoteDetail?: boolean;\n    openNoteWithId?: (noteId: number) => void;\n    openEventWithId?: (eventId: number) => void;\n    handleAppClick?: (appId: string) => void;\n    handleVideoLink?: (url: string) => void;\n    openNoteDirectly?: boolean;\n  }\n}\n\n// Custom Pin icon component\nconst PinIcon = () => (\n  <svg \n    width=\"10\" \n    height=\"10\" \n    viewBox=\"0 0 24 24\" \n    className=\"text-white/50 mr-1.5\"\n    style={{ marginTop: \"-1px\" }}\n  >\n    <path \n      d=\"M9 4v6l-2 4v2h10v-2l-2-4V4\" \n      fill=\"none\" \n      stroke=\"currentColor\" \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n    />\n    <path \n      d=\"M12 16v5\" \n      fill=\"none\" \n      stroke=\"currentColor\" \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n    />\n    <path \n      d=\"M8 4h8\" \n      fill=\"none\" \n      stroke=\"currentColor\" \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n    />\n  </svg>\n);\n\n// Add a Video Player component with Portal\nconst VideoPlayerOverlay = ({ videoUrl, onClose }: { videoUrl: string; onClose: () => void }) => {\n  // Extract YouTube video ID from URL\n  const getYouTubeVideoId = (url: string) => {\n    const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\n    const match = url.match(regExp);\n    return (match && match[2].length === 11) ? match[2] : null;\n  };\n\n  const videoId = getYouTubeVideoId(videoUrl);\n\n  if (!videoId) return null;\n\n  // Calculate embedUrl\n  const embedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&controls=1&showinfo=1&playsinline=1`;\n\n  // Create a portal to render directly to body\n  return ReactDOM.createPortal(\n    <motion.div \n      className=\"fixed inset-0 z-[9999] flex items-center justify-center bg-black\"\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        width: '100vw',\n        height: '100vh'\n      }}\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      onClick={onClose}\n    >\n      <motion.div \n        className=\"w-full h-full flex items-center justify-center\"\n        initial={{ scale: 0.95, opacity: 0 }}\n        animate={{ scale: 1, opacity: 1 }}\n        exit={{ scale: 0.95, opacity: 0 }}\n        transition={{ type: \"spring\", damping: 25, stiffness: 300 }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        <button \n          className=\"absolute top-8 right-8 z-10 p-3 bg-black/70 hover:bg-black/90 rounded-full text-white/80 hover:text-white transition-colors\"\n          onClick={(e) => {\n            createTactileEffect();\n            e.stopPropagation();\n            onClose();\n          }}\n        >\n          <X size={28} />\n        </button>\n        <iframe\n          className=\"w-full h-full max-h-screen\"\n          src={embedUrl}\n          title=\"YouTube video player\"\n          frameBorder=\"0\"\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n          allowFullScreen\n        ></iframe>\n      </motion.div>\n    </motion.div>,\n    document.body\n  );\n};\n\n// Use the imported BaseAppScreenProps directly\nexport const NotesScreen: React.FC<BaseAppScreenProps> = ({ \n  setIsNoteDetailView, // Destructure from BaseAppScreenProps (optional)\n  initialNoteId, // Add the new prop here\n  onClose // Destructure onClose prop\n}) => {\n  const prefersReducedMotion = useReducedMotion();\n  const [hasInteracted, setHasInteracted] = useState(false);\n  const chevronControls = useAnimation();\n  const [selectedNote, setSelectedNote] = useState<NoteItem | null>(null);\n  const [isInitializing, setIsInitializing] = useState<boolean>(true);\n  const [isNoteReady, setIsNoteReady] = useState<boolean>(false);\n  const [widgetNoteId, setWidgetNoteId] = useState<number | null>(null);\n  \n  // Add state for video player\n  const [videoUrl, setVideoUrl] = useState<string | null>(null);\n  \n  // Track if this is the first time viewing the Hello World note\n  const [isFirstViewOfHelloWorld, setIsFirstViewOfHelloWorld] = useState<boolean>(false);\n  \n  // Track hyperlinked navigation from Hello World to Kineship note\n  const [isFromHelloWorldToKineship, setIsFromHelloWorldToKineship] = useState<boolean>(false);\n  \n  // Create a ref to use for directly setting the window property\n  const isViewingDetailRef = useRef(false);\n  \n  // Create a ref for the note content container\n  const noteContentRef = useRef<HTMLDivElement>(null);\n\n  // Add function to mark note as viewed\n  const markNoteAsViewed = (noteId: number) => {\n    try {\n      const viewedNotes = JSON.parse(localStorage.getItem('viewedNotes') || '[]');\n      if (!viewedNotes.includes(noteId)) {\n        viewedNotes.push(noteId);\n        localStorage.setItem('viewedNotes', JSON.stringify(viewedNotes));\n      }\n    } catch (error) {\n        console.error(\"Error handling localStorage for viewedNotes:\", error);\n    }\n  };\n\n  // Enhanced animation variants for buttery-smooth transitions\n  const chevronVariants = {\n    initial: { x: 0 },\n    hover: { x: 3, transition: { repeat: 0, duration: 0.4, ease: [0.25, 0.8, 0.25, 1] } }\n  };\n\n  // Handle interaction\n  const handleInteraction = () => {\n    if (!hasInteracted) {\n      setHasInteracted(true);\n    }\n  };\n\n  // Helper function to determine if a note should have a pulsing dot\n  const shouldShowPulsingDot = (noteId: number) => {\n    // Feature removed: Always return false\n    return false;\n    /* Original Logic:\n    const noteItem = notes.find(note => note.id === noteId);\n    if (noteItem?.locked) {\n      return false;\n    }\n    if (widgetNoteId !== null && widgetNoteId === noteId) {\n      if (selectedNote && selectedNote.id === noteId) {\n        return false;\n      }\n      return true;\n    }\n    return false;\n    */\n  };\n\n  // Animation variants for beautiful entrance with minimal delay\n  const containerVariants = {\n    hidden: { opacity: 0 },\n    show: {\n      opacity: 1,\n      transition: {\n        staggerChildren: 0.05,\n        delayChildren: 0.05,\n        duration: 0.1\n      }\n    },\n    exit: { opacity: 0, transition: { duration: 0.2 } }\n  };\n\n  // Animation variants for items\n  const itemVariants = {\n    hidden: { opacity: 0 },\n    show: { \n      opacity: 1, \n      transition: {\n        type: \"spring\",\n        stiffness: 300, \n        damping: 30,\n        duration: 0.3\n      }\n    },\n    exit: {\n      opacity: 0,\n      transition: {\n        duration: 0.2,\n        ease: \"easeInOut\"\n      }\n    }\n  };\n\n  // Handle initialNoteId and direct opening of Hello World note\n  useEffect(() => {\n    setIsInitializing(true);\n    setIsNoteReady(false);\n\n    // Check if window.openNoteDirectly is true - this means we should open Hello World\n    if (window.openNoteDirectly === true) {\n      // Always open Hello World note (ID 1) when openNoteDirectly is true\n      const helloWorldNote = notes.find(note => note.id === 1);\n      if (helloWorldNote && !helloWorldNote.locked) {\n        console.log(`NotesScreen opening Hello World directly.`);\n        setSelectedNote(helloWorldNote);\n        setIsViewingDetail(true);\n        markNoteAsViewed(1);\n        setIsFirstViewOfHelloWorld(true);\n        window.openNoteDirectly = false; // Reset the flag after using it\n\n        setTimeout(() => {\n          if (noteContentRef.current) {\n            noteContentRef.current.scrollTop = 0;\n          }\n          setIsNoteReady(true);\n          setIsInitializing(false);\n        }, 150);\n      } else {\n        // Handle case where Hello World note might be missing or locked\n        setSelectedNote(null);\n        setIsViewingDetail(false);\n        setIsInitializing(false);\n        window.openNoteDirectly = false; // Still reset the flag\n      }\n    } else if (typeof initialNoteId === 'number') {\n      // Handle opening a note passed via prop (e.g., from widget click)\n      const noteToOpen = notes.find(note => note.id === initialNoteId);\n      if (noteToOpen && !noteToOpen.locked) {\n        console.log(`NotesScreen opening note via prop: ${initialNoteId}`);\n        setSelectedNote(noteToOpen);\n        setIsViewingDetail(true);\n        markNoteAsViewed(initialNoteId);\n        setTimeout(() => {\n          if (noteContentRef.current) {\n            noteContentRef.current.scrollTop = 0;\n          }\n          setIsNoteReady(true);\n          setIsInitializing(false);\n        }, 150);\n      } else {\n        // Invalid ID or locked note from prop -> show list view\n        setSelectedNote(null);\n        setIsViewingDetail(false);\n        setIsInitializing(false);\n      }\n    } else {\n      // Default to list view if no initialNoteId is provided\n      setSelectedNote(null);\n      setIsViewingDetail(false);\n      setIsInitializing(false);\n    }\n  }, [initialNoteId]); // Depend only on initialNoteId\n  \n  // Function to update the container state when viewing details\n  const setIsViewingDetail = (value: boolean) => {\n    isViewingDetailRef.current = value;\n    window.isViewingNoteDetail = value;\n    \n    if (setIsNoteDetailView) { // Check if prop exists\n      setIsNoteDetailView(value);\n    }\n  };\n\n  // Add effect to ensure the portrait mode is properly maintained\n  useEffect(() => {\n    // Set the flag to control the container shape\n    setIsViewingDetail(selectedNote !== null);\n    \n    // If a note is selected, ensure the content is scrolled to the top\n    if (selectedNote !== null && noteContentRef.current) {\n      // Scroll to top immediately\n      noteContentRef.current.scrollTop = 0;\n      \n      // Also add a small delay to ensure scroll happens after rendering\n      setTimeout(() => {\n        if (noteContentRef.current) {\n          noteContentRef.current.scrollTop = 0;\n        }\n      }, 50);\n    }\n    \n    return () => {\n      // Clean up when component unmounts\n      setIsViewingDetail(false);\n    };\n  }, [selectedNote]);\n\n  // Add effect to check for initialNoteId and also check if we're coming from Hello World\n  useEffect(() => {\n    // Check if we have an initial note ID to highlight from the widget\n    if (initialNoteId) {\n      setWidgetNoteId(initialNoteId);\n    }\n     // Set up the handleVideoLink function in the window object\n     window.handleVideoLink = (url: string) => {\n       handleVideoLink(url);\n     };\n\n     // Clean up\n     return () => {\n       // @ts-ignore\n       delete window.openNoteWithId;\n       // @ts-ignore\n       delete window.handleVideoLink;\n     };\n  }, [initialNoteId]);\n\n  // Enhanced helper function for more natural date formatting\n  const getRelativeDate = (dateStr: string) => {\n    // Get current date\n    const now = new Date();\n    const today = `${String(now.getDate()).padStart(2, '0')}/${String(now.getMonth() + 1).padStart(2, '0')}/${String(now.getFullYear()).slice(-2)}`;\n    \n    // Get yesterday's date\n    const yesterdayDate = new Date(now);\n    yesterdayDate.setDate(now.getDate() - 1);\n    const yesterday = `${String(yesterdayDate.getDate()).padStart(2, '0')}/${String(yesterdayDate.getMonth() + 1).padStart(2, '0')}/${String(yesterdayDate.getFullYear()).slice(-2)}`;\n    \n    // Parse the provided date to get the month\n    const [, month] = dateStr.split('/').map(Number);\n    \n    // Special cases for very recent dates\n    if (dateStr === today) return 'Today';\n    if (dateStr === yesterday) return 'Yesterday';\n    \n    // For all other dates, just show the month\n    const monthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n    const monthName = monthNames[month - 1];\n    \n    return monthName;\n  };\n\n  // New filters for pinned notes and all notes\n  const pinnedNotes = notes.filter(note => note.pinned);\n  \n  // All notes sorted by date (newest first), excluding pinned notes\n  const allNotes = notes\n    .filter(note => !note.pinned) // Exclude pinned notes\n    .sort((a, b) => {\n      // Parse dates (assuming DD/MM/YY format)\n      const [dayA, monthA, yearA] = a.date.split('/').map(Number);\n      const [dayB, monthB, yearB] = b.date.split('/').map(Number);\n      \n      // Compare dates in reverse order (newest first)\n      if (yearB !== yearA) return yearB - yearA;\n      if (monthB !== monthA) return monthB - monthA;\n      return dayB - dayA;\n    });\n\n  const handleNoteClick = (note: NoteItem) => {\n    if (note.locked) return; // Prevent opening locked notes\n    // Mark the note as viewed immediately\n    markNoteAsViewed(note.id);\n    \n    // Preload the note content first\n    // setPreloadedNote(note);\n    \n    // Hide the note content initially until everything is ready\n    setIsNoteReady(false);\n    \n    // Set flag to true BEFORE state changes for immediate effect\n    setIsViewingDetail(true);\n    if (setIsNoteDetailView) { // Check if prop exists\n      setIsNoteDetailView(true);\n    }\n    \n    createTactileEffect();\n    \n    // If this was the note highlighted from widget, clear the widget ID\n    // This ensures that if the user goes back to home and clicks the same note\n    // from the widget again, the orb will reappear\n    if (widgetNoteId === note.id) {\n      setWidgetNoteId(null);\n    }\n    \n    // If hyperlink from Hello World (initialNoteId) to Kineship (note.id===2), mark for back navigation\n    if (initialNoteId === selectedNote?.id && note.id === 2) {\n      setIsFromHelloWorldToKineship(true);\n    }\n    \n    // Set the selected note immediately\n    setSelectedNote(note);\n    \n    // Delay to ensure backdrop blur is fully rendered before showing text\n    setTimeout(() => {\n      setIsNoteReady(true);\n    }, 150); // Longer delay to ensure backdrop blur paints before text appears\n  };\n\n  // Function to close the note detail view\n  const closeNote = () => {\n    // Set selectedNote back to null to return to the list view\n    setSelectedNote(null);\n    \n    // Update the detail view flag (this is also handled by useEffect depending on selectedNote)\n    setIsViewingDetail(false); \n    if (setIsNoteDetailView) {\n      setIsNoteDetailView(false);\n    }\n  \n    // Optional: Add tactile feedback if desired\n    // createTactileEffect(); \n  };\n\n  // Add function to handle video links\n  const handleVideoLink = (url: string) => {\n    setVideoUrl(url);\n  };\n\n  // Function to close video player\n  const closeVideoPlayer = () => {\n    setVideoUrl(null);\n  };\n\n  // Effect to clear the first load flag on component mount\n  useEffect(() => {\n    localStorage.removeItem('hasCompletedFirstLoad');\n  }, []); // Empty dependency array ensures this runs only once on mount\n\n  // Effect to expose openNoteWithId globally\n  useEffect(() => {\n    window.openNoteWithId = (noteId: number) => {\n      const noteToOpen = notes.find(note => note.id === noteId);\n      if (noteToOpen) {\n        // Directly call handleNoteClick instead of setSelectedNote\n        handleNoteClick(noteToOpen);\n      } else {\n        console.warn(`Note with ID ${noteId} not found.`);\n      }\n    };\n\n    // Cleanup function to remove the global handler when the component unmounts\n    return () => {\n      delete window.openNoteWithId;\n    };\n    // Ensure handleNoteClick is stable or included if it depends on changing state/props\n  }, [handleNoteClick]); // Add handleNoteClick to dependency array\n\n  // Effect to set global back handler so App can delegate back action\n  useEffect(() => {\n    window.noteScreenBackHandler = () => {\n      if (selectedNote) {\n        // Back from Kineship hyperlink should return to Hello World once\n        if (selectedNote.id === 2 && isFromHelloWorldToKineship) {\n          setIsFromHelloWorldToKineship(false);\n          const hello = notes.find(n => n.id === initialNoteId);\n          if (hello) {\n            setSelectedNote(hello);\n            setIsViewingDetail(true);\n          }\n          return true;\n        }\n        // First-load Hello World back to home\n        if (initialNoteId != null && selectedNote.id === initialNoteId && isFirstViewOfHelloWorld) {\n          setIsFirstViewOfHelloWorld(false);\n          return false;\n        }\n        // Default: close note detail\n        closeNote();\n        return true;\n      }\n      return false;\n    };\n    return () => {\n      delete window.noteScreenBackHandler;\n    };\n  }, [selectedNote, initialNoteId, isFirstViewOfHelloWorld, isFromHelloWorldToKineship]);\n\n  return (\n    <div \n      className=\"h-full w-full\" \n      style={{\n        display: \"block\",\n        position: \"relative\"\n      }}\n      onClick={(e) => {\n        e.stopPropagation(); // Stop propagation immediately\n        if (selectedNote) {\n          // Delay the actual closing logic slightly\n          setTimeout(() => {\n            closeNote();\n          }, 0); // setTimeout with 0 delay defers execution until after the current call stack clears\n        }\n        handleInteraction();\n      }}\n      onTouchStart={handleInteraction}\n    >\n      <AnimatePresence mode=\"wait\">\n        {selectedNote ? (\n          <motion.div \n            key=\"note-detail\"\n            className=\"flex flex-col h-full w-full overflow-hidden\" \n            onClick={(e) => e.stopPropagation()} // Prevent closing when clicking inside the note\n          >\n            <div \n              className=\"h-full w-full rounded-xl relative\"\n              style={{ \n                touchAction: 'pan-y',\n                boxShadow: '0 8px 32px rgba(0, 0, 0, 0.2), inset 0 0 0 1px rgba(255, 255, 255, 0.1)',\n                border: '1px solid rgba(255, 255, 255, 0.05)',\n                overflow: 'hidden',\n                userSelect: 'text' // Explicitly allow text selection\n              }}\n            >\n              {/* Apple-style bottom fade to indicate scrollable content */}\n              <div \n                className={`absolute bottom-0 left-0 right-0 pointer-events-none z-10 ${selectedNote?.title === 'hello world' ? 'h-20' : 'h-16'}`}\n                style={{\n                  background: selectedNote?.title === 'hello world' \n                    ? 'linear-gradient(to top, rgba(45, 35, 28, 0.98) 0%, rgba(45, 35, 28, 0.85) 30%, rgba(45, 35, 28, 0.4) 60%, transparent 100%)'\n                    : 'linear-gradient(to top, rgba(25, 25, 28, 0.98) 0%, rgba(25, 25, 28, 0.85) 30%, rgba(25, 25, 28, 0.4) 60%, transparent 100%)',\n                  borderBottomLeftRadius: '0.75rem',\n                  borderBottomRightRadius: '0.75rem'\n                }}\n              />\n              \n              <motion.div \n                ref={noteContentRef}\n                className=\"h-full w-full overflow-auto scrollbar-subtle relative p-6 pb-28\"\n                style={{ \n                  overscrollBehavior: 'contain', // Prevent pull-to-refresh and bounce effects\n                  maxHeight: '100%',  // Make sure content stays within the container height\n                  touchAction: 'pan-y', // Allow vertical scrolling only\n                  pointerEvents: 'auto', // Ensure the component captures all pointer events\n                  userSelect: 'text' // Explicitly allow text selection\n                }}\n              >\n                {/* Remove swipe hint animation */}\n                \n                <motion.div \n                  className=\"flex flex-col space-y-3\"\n                  variants={containerVariants}\n                  initial=\"hidden\"\n                  animate={isNoteReady ? \"show\" : \"hidden\"}\n                  exit=\"exit\" \n                >\n                  <motion.div \n                    className=\"flex flex-col\"\n                    variants={itemVariants}\n                  >\n                    <div className=\"flex justify-between items-start mb-2\">\n                      <h2 className=\"text-white text-lg font-medium\">\n                        {selectedNote?.title}\n                      </h2>\n                      <span className=\"text-[14px] text-white/60 ml-2 mt-1\">\n                        {getRelativeDate(selectedNote?.date)}\n                      </span>\n                    </div>\n                    \n                    {/* Show full content without preview/expand */}\n                    <motion.div \n                      className=\"text-sm leading-relaxed text-white/80 overflow-y-auto scrollbar-subtle pr-1 note-content-area lora-note-content\"\n                      variants={itemVariants}\n                      style={{ \n                        WebkitOverflowScrolling: 'touch',\n                        whiteSpace: 'pre-line'\n                      }}\n                      dangerouslySetInnerHTML={{\n                        __html: selectedNote?.content\n                          // Rule for italics: *text* -> <em>text</em>\n                          .replace(/\\*([^\\*]+)\\*/g, '<em>$1</em>')\n                          // Rule for links: [text](url)\n                          .replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, (_, text, url) => {\n                            // Check if this is an internal note link\n                            if (url.startsWith('note:')) {\n                              const noteId = parseInt(url.substring(5));\n                              let clickHandler = `(function(e) { \n                                e.stopPropagation(); \n                                \n                                window.openNoteWithId(${noteId});\n                              })(event)`;\n                              return `<a href=\\\"javascript:void(0)\\\" class=\\\"custom-pink-link\\\" onclick=\\\"${clickHandler}\\\">${text}</a>`;\n                            }\n                            \n                            // Check if this is a video link\n                            if (url.startsWith('video:')) {\n                              const videoUrl = url.substring(6);\n                              return `<a href=\\\"javascript:void(0)\\\" class=\\\"custom-pink-link\\\" onclick=\\\"(function(e) { \n                                e.stopPropagation(); \n                                window.handleVideoLink(\\'${videoUrl}\\');\n                              })(event)\\\">${text}</a>`;\n                            }\n                            \n                            // Check if this is an app link\n                            if (url.startsWith('app:')) {\n                              const appId = url.substring(4);\n                              return `<a href=\\\"javascript:void(0)\\\" class=\\\"custom-pink-link\\\" onclick=\\\"(function(e) { \n                                e.stopPropagation(); \n                                window.handleAppClick(\\'${appId}\\');\n                              })(event)\\\">${text}</a>`;\n                            }\n                            \n                            // Explicitly handle mailto links\n                            if (url.startsWith('mailto:')) {\n                              return `<a href=\\\"${url}\\\" class=\\\"custom-pink-link\\\" onclick=\\\"event.stopPropagation()\\\">${text}</a>`;\n                            }\n                            \n                            // External links (http, https, etc.) - ensure target_blank for these\n                            if (url.startsWith('http:') || url.startsWith('https:')) {\n                                return `<a href=\\\"${url}\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" class=\\\"custom-pink-link\\\" onclick=\\\"event.stopPropagation()\\\">${text}</a>`;\n                            }\n                            \n                            // Fallback for any other link types (though ideally all are covered)\n                            return `<a href=\\\"${url}\\\" class=\\\"custom-pink-link\\\" onclick=\\\"event.stopPropagation()\\\">${text}</a>`;\n                          })\n                          .replace(/(__[^_]+__)/g, (_, part) => {\n                            // Process underlined sections\n                            return `<span class=\"underline decoration-white/90\">${part.slice(2, -2)}</span>`;\n                          })\n                      }}\n                    />\n                  </motion.div>\n                </motion.div>\n                \n                {/* Removed pagination dots UI */}\n              </motion.div>\n            </div>\n          </motion.div>\n        ) : (\n          !isInitializing && (\n            <motion.div \n              key=\"note-list\" \n              initial={{ opacity: 0 }} \n              animate={{ opacity: 1 }}\n              transition={{ duration: 0.15 }} \n              className=\"flex flex-col h-full w-full overflow-hidden\"\n            >\n              <div className=\"h-full overflow-y-auto scrollbar-subtle p-6\">\n                {/* Pinned notes section */}\n                {pinnedNotes.length > 0 && (\n                  <div>\n                    {/* Remove px-2 from header */}\n                    <h2 className=\"text-white/60 text-[14px] font-medium uppercase tracking-wider mb-4 flex items-center\">\n                      <PinIcon />\n                      Pinned\n                    </h2>\n                    <div className=\"space-y-2\">\n                      {pinnedNotes.map((note, index) => (\n                        <motion.div \n                          key={`pinned-${note.id}`}\n                          className=\"flex group px-2 py-2 rounded-md hover:bg-white/5 active:bg-white/10 relative\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            createTactileEffect();\n                            handleNoteClick(note);\n                          }}\n                          whileHover={{ scale: 1.01 }}\n                          whileTap={{ scale: 0.98 }}\n                          transition={{ type: \"spring\", stiffness: 400, damping: 25 }}\n                        >\n                          <div className=\"w-5 h-5 flex-shrink-0 flex items-center justify-center text-white/50\">\n                            <motion.div\n                              variants={chevronVariants}\n                              initial=\"initial\"\n                              whileHover=\"hover\"\n                              animate={index === 0 && note.title.includes(\"hello world\") && !hasInteracted ? chevronControls : undefined}\n                            >\n                              <ChevronRight size={16} className=\"group-hover:text-white/70 transition-colors duration-200\" />\n                            </motion.div>\n                          </div>\n                          <div className=\"ml-1 flex-1 flex justify-between items-center\">\n                            <div className=\"flex-1 pr-3\">\n                              <h3 className=\"text-white/90 break-words group-hover:text-white transition-colors duration-200 distinct-note-font\">\n                                {note.title}\n                              </h3>\n                            </div>\n                            <div className=\"flex-shrink-0 flex items-center\">\n                              <span className={`text-[14px] text-white/50 whitespace-nowrap`}>\n                                {getRelativeDate(note.date)}\n                              </span>\n                            </div>\n                          </div>\n                        </motion.div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* All notes section */}\n                {allNotes.length > 0 && (\n                  <div>\n                    {/* Remove px-2 from header */}\n                    <h2 className=\"text-white/60 text-[14px] font-medium uppercase tracking-wider mb-4\">\n                      All\n                    </h2>\n                    <div className=\"space-y-2\">\n                      {allNotes.map((note) => (\n                        <motion.div \n                          key={`all-${note.id}`}\n                          className=\"flex group px-1 py-0.5 rounded-md relative\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            if (!note.locked) {\n                              handleNoteClick(note);\n                            }\n                          }}\n                          whileHover={{ scale: note.locked ? 1 : 1.01 }}\n                          whileTap={{ scale: note.locked ? 1 : 0.98 }}\n                          transition={{ type: \"spring\", stiffness: 400, damping: 25 }}\n                        >\n                          <div className=\"w-5 h-5 flex-shrink-0 flex items-center justify-center text-white/50\">\n                            <motion.div\n                              variants={chevronVariants}\n                              initial=\"initial\"\n                              whileHover=\"hover\"\n                            >\n                              <ChevronRight size={16} className=\"group-hover:text-white/70 transition-colors duration-200\" />\n                            </motion.div>\n                          </div>\n                          <div className=\"ml-1 flex-1 flex justify-between items-center\">\n                            <div className=\"flex-1 pr-3\">\n                              <h3 className={`${note.locked ? 'text-white/60' : 'text-white/90'} break-words transition-colors duration-200 distinct-note-font`}>\n                                {note.title}\n                              </h3>\n                            </div>\n                            <div className=\"flex-shrink-0 flex items-center\">\n                              <span className={`text-[14px] ${note.locked ? 'text-white/50' : 'text-white/50'} whitespace-nowrap`}>\n                                {note.locked ? <Lock size={16} className=\"text-white/50\" /> : getRelativeDate(note.date)}\n                              </span>\n                            </div>\n                          </div>\n                        </motion.div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </motion.div>\n          )\n        )}\n      </AnimatePresence>\n\n      {/* Video player overlay */}\n      <AnimatePresence>\n        {videoUrl && (\n          <VideoPlayerOverlay \n            videoUrl={videoUrl} \n            onClose={closeVideoPlayer} \n          />\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};","import React, { useState, useEffect } from 'react';\nimport type { AppScreenProps } from '../types';\nimport { motion, useReducedMotion } from 'framer-motion';\nimport { Send } from 'lucide-react';\nimport { createTactileEffect } from '../App';\n\ntype SocialApp = {\n  name: string;\n  icon: React.ReactNode | string;\n  url: string;\n  position: number;\n  isCustomIcon?: boolean;\n  customStyles?: string;\n};\n\nexport const SocialsScreen: React.FC<AppScreenProps> = () => {\n  const prefersReducedMotion = useReducedMotion();\n  const [randomizedSocials, setRandomizedSocials] = useState<SocialApp[]>([]);\n  \n  const socials: SocialApp[] = [\n    {\n      name: \"strava\",\n      icon: \"./icons/apps/strava.png\",\n      url: \"https://strava.app.link/PzFPfOvKpSb\",\n      position: 1,\n      isCustomIcon: true\n    },\n    {\n      name: \"instagram\",\n      icon: \"./icons/apps/instagram.png\",\n      url: \"https://instagram.com/fareehasala\",\n      position: 2,\n      isCustomIcon: true\n    },\n    {\n      name: \"email\",\n      icon: <Send className=\"w-7 h-7 text-white/90\" strokeWidth={1.5} />,\n      url: \"mailto:fareeha_s@icloud.com\",\n      position: 3,\n      customStyles: \"bg-white/15 backdrop-blur-lg border border-white/20\"\n    },\n    {\n      name: \"goodreads\",\n      icon: \"./icons/apps/goodreads.png\",\n      url: \"https://www.goodreads.com/user/show/7284438-fareeha\",\n      position: 4,\n      isCustomIcon: true\n    },\n    {\n      name: \"empty2\",\n      icon: null,\n      url: \"#\",\n      position: 5\n    },\n    {\n      name: \"kineship\",\n      icon: \"./icons/apps/kineship-optimized.png\",\n      url: \"https://kineship.com\",\n      position: 6,\n      isCustomIcon: true\n    },\n    {\n      name: \"retro\",\n      icon: \"./icons/apps/retro.jpg\",\n      url: \"https://retro.app/@fareeha\",\n      position: 7,\n      isCustomIcon: true\n    },\n    {\n      name: \"airbuds\",\n      icon: \"./icons/apps/airbuds.png\",\n      url: \"https://i.airbuds.fm/fareehas/pC4Nm0VR4i\",\n      position: 8,\n      isCustomIcon: true\n    },\n    {\n      name: \"corner\",\n      icon: \"./icons/apps/corner.jpg\",\n      url: \"https://www.corner.inc/fareeha\",\n      position: 9,\n      isCustomIcon: true\n    }\n  ];\n\n  // Track whether this is the first render\n  const [isFirstRender, setIsFirstRender] = useState(true);\n\n  // Randomize social app positions after the first render\n  useEffect(() => {\n    // Skip randomization on first render to show aesthetic default layout\n    if (isFirstRender) {\n      setIsFirstRender(false);\n      setRandomizedSocials([...socials]);\n      return;\n    }\n\n    // Create a copy of the socials array\n    let socialsCopy = [...socials];\n    \n    // Find and remove the fixed position apps (email and corner)\n    const emailApp = socialsCopy.find(app => app.name === \"email\");\n    const cornerApp = socialsCopy.find(app => app.name === \"corner\");\n    socialsCopy = socialsCopy.filter(app => app.name !== \"email\" && app.name !== \"corner\");\n    \n    // Determine corner position for Corner app\n    const cornerPositions = [1, 3, 7, 9];\n    let availableCorners = cornerPositions.filter(pos => pos !== 3); // Remove position 3 as it's reserved for email\n    const randomCornerPosition = availableCorners[Math.floor(Math.random() * availableCorners.length)];\n    \n    // Create an array of available positions (excluding the chosen corner position and email position)\n    const availablePositions = [1, 2, 4, 5, 6, 7, 8, 9].filter(\n      pos => pos !== 3 && pos !== randomCornerPosition\n    );\n    \n    // Shuffle the available positions\n    const shuffledPositions = [...availablePositions].sort(() => Math.random() - 0.5);\n    \n    // Assign new random positions to each app\n    socialsCopy.forEach((app, index) => {\n      app.position = shuffledPositions[index];\n    });\n    \n    // Add back the fixed position apps\n    if (emailApp) socialsCopy.push(emailApp);\n    if (cornerApp) {\n      cornerApp.position = randomCornerPosition;\n      socialsCopy.push(cornerApp);\n    }\n    \n    // Sort by position to ensure correct rendering order\n    socialsCopy.sort((a, b) => a.position - b.position);\n    \n    // Update state with randomized socials\n    setRandomizedSocials(socialsCopy);\n  }, [isFirstRender]); // Only depend on isFirstRender\n\n  // Apple-like spring animation\n  const springTransition = {\n    type: \"spring\",\n    damping: 30,\n    stiffness: 400,\n    mass: 0.8,\n  };\n\n  // Animation variants for staggered entrance\n  const containerVariants = {\n    hidden: { opacity: 0 },\n    show: {\n      opacity: 1,\n      transition: {\n        staggerChildren: 0,\n        delayChildren: 0.05\n      }\n    }\n  };\n\n  const itemVariants = {\n    hidden: { opacity: 0, y: 10, scale: 0.8 },\n    show: { \n      opacity: 1, \n      y: 0, \n      scale: 1,\n      transition: {\n        type: \"spring\",\n        stiffness: 350,\n        damping: 25,\n        duration: 0.25\n      }\n    }\n  };\n\n  // Common shadow style for all icons\n  const iconShadowStyle = \"shadow-lg hover:shadow-xl transition-shadow\";\n  \n  // Common 3D effect style for all icons\n  const icon3DStyle = \"transform transition-transform will-change-transform\";\n\n  return (\n    <motion.div \n      className=\"flex flex-col justify-center items-center h-full w-full\"\n      variants={containerVariants}\n      initial=\"hidden\"\n      animate=\"show\"\n      onClick={(e) => e.stopPropagation()}\n    >\n      <div className=\"grid grid-cols-3 grid-rows-3 gap-6 mx-auto\">\n        {(randomizedSocials.length > 0 ? randomizedSocials : socials).map((social, index) => {\n          // If there's no icon, render a placeholder div instead of a link\n          if (!social.icon) {\n            return (\n              <motion.div\n                key={index}\n                className=\"w-[60px] h-[60px]\" // Just takes space but not interactive\n                variants={itemVariants}\n              />\n            );\n          }\n          \n          // For items with icons, render the clickable links\n          return (\n            <motion.a\n              key={index}\n              href={social.url}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              whileHover={{ scale: 1.05, y: -2 }}\n              whileTap={{ scale: 0.95, y: 2 }}\n              transition={{\n                ...springTransition,\n                duration: prefersReducedMotion ? 0 : undefined\n              }}\n              className=\"flex items-center justify-center will-change-transform\"\n              onClick={(e) => {\n                e.stopPropagation();\n                createTactileEffect();\n              }}\n              variants={itemVariants}\n              style={{ \n                willChange: 'transform, opacity'\n              }}\n            >\n              {social.customStyles ? (\n                <motion.div\n                  className={`w-[60px] h-[60px] rounded-[14px] flex items-center justify-center ${social.customStyles} ${iconShadowStyle} ${icon3DStyle}`}\n                  whileHover={{ \n                    boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(255, 255, 255, 0.1) inset\" \n                  }}\n                  transition={springTransition}\n                >\n                  {social.icon}\n                </motion.div>\n              ) : social.isCustomIcon ? (\n                <motion.div\n                  className={`w-[60px] h-[60px] rounded-[14px] overflow-hidden ${iconShadowStyle}`}\n                  style={{\n                    position: 'relative',\n                    border: '0.5px solid rgba(255, 255, 255, 0.15)',\n                    boxShadow: '0 1px 3px rgba(0, 0, 0, 0.12), 0 0.5px 1px rgba(0, 0, 0, 0.08)'\n                  }}\n                  whileHover={{ \n                    boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(255, 255, 255, 0.1) inset\" \n                  }}\n                  transition={springTransition}\n                >\n                  <div style={{\n                    position: 'absolute',\n                    top: 0,\n                    left: 0,\n                    right: 0,\n                    height: '50%',\n                    background: 'linear-gradient(180deg, rgba(255,255,255,0.12) 0%, rgba(255,255,255,0) 100%)',\n                    pointerEvents: 'none',\n                    zIndex: 2\n                  }} />\n                  <div style={{\n                    position: 'absolute',\n                    inset: 0,\n                    background: 'rgba(255, 255, 255, 0.04)',\n                    pointerEvents: 'none',\n                    zIndex: 1\n                  }} />\n                  <div style={{\n                    position: 'absolute',\n                    bottom: 0,\n                    left: 0,\n                    right: 0,\n                    height: '20%',\n                    background: 'linear-gradient(0deg, rgba(0,0,0,0.06) 0%, rgba(0,0,0,0) 100%)',\n                    pointerEvents: 'none',\n                    zIndex: 2\n                  }} />\n                  <img \n                    src={social.icon as string} \n                    alt={social.name} \n                    className=\"w-full h-full object-cover\" \n                  />\n                </motion.div>\n              ) : (\n                <motion.div\n                  className={`w-[60px] h-[60px] rounded-[14px] flex items-center justify-center ${iconShadowStyle}`}\n                  style={{\n                    position: 'relative',\n                    background: 'linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.12) 50%, rgba(255, 255, 255, 0.10) 100%)',\n                    border: '0.5px solid rgba(255, 255, 255, 0.15)',\n                    boxShadow: '0 1px 3px rgba(0, 0, 0, 0.12), 0 0.5px 1px rgba(0, 0, 0, 0.08)',\n                    overflow: 'hidden'\n                  }}\n                  whileHover={{ \n                    boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(255, 255, 255, 0.1) inset\" \n                  }}\n                  transition={springTransition}\n                >\n                  <div style={{\n                    position: 'absolute',\n                    top: 0,\n                    left: 0,\n                    right: 0,\n                    height: '50%',\n                    background: 'linear-gradient(180deg, rgba(255,255,255,0.12) 0%, rgba(255,255,255,0) 100%)',\n                    pointerEvents: 'none'\n                  }} />\n                  <div style={{\n                    position: 'absolute',\n                    inset: 0,\n                    background: 'rgba(255, 255, 255, 0.04)',\n                    pointerEvents: 'none'\n                  }} />\n                  <div style={{\n                    position: 'absolute',\n                    bottom: 0,\n                    left: 0,\n                    right: 0,\n                    height: '20%',\n                    background: 'linear-gradient(0deg, rgba(0,0,0,0.06) 0%, rgba(0,0,0,0) 100%)',\n                    pointerEvents: 'none'\n                  }} />\n                  <div style={{ position: 'relative', zIndex: 10 }}>\n                    {social.icon}\n                  </div>\n                </motion.div>\n              )}\n            </motion.a>\n          );\n        })}\n      </div>\n    </motion.div>\n  );\n};","import React, { useState, useEffect, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Shirt, Utensils } from 'lucide-react';\nimport { EventItem } from '../data/events';\n\ntype PartifulEventProps = {\n  onBack: () => void;\n  eventData?: EventItem;\n  onScrollToBottom?: () => void;\n};\n\nexport const PartifulEvent: React.FC<PartifulEventProps> = ({ onBack, eventData, onScrollToBottom }) => {\n  // State to track if user has scrolled\n  const [hasScrolled, setHasScrolled] = useState(false);\n  // State to track if additional content is expanded\n  const [isExpanded, setIsExpanded] = useState(false);\n  const containerRef = useRef<HTMLDivElement>(null);\n  \n  // Default event data if none provided\n  const eventTitle = eventData?.title || \"mental static\";\n  const attendeeCount = eventData?.attendees || 35;\n  const eventDate = eventData?.date || \"31/03/25\";\n  const eventTime = eventData?.time || \"7:30pm\";\n  const descriptionText = eventData?.description || `quick hits of obscure knowledge ðŸ’š\n\nbring that random wikipedia rabbithole only you seem to know about. weird nature stuff, unsolved mysteries, watershed moments, conspiracy theories, crazy undercover govt ops, cool people etc etc ðŸŒ€ðŸŒ€ðŸŒ€\n\nwiki page will go up on a projector. exactly two mins for you to brief us. +1 question from the rest of us\n\nlimited capacity! tell us what you'd share ðŸ«¶ðŸ¼`;\n  const spotifyLink = eventData?.spotifyLink || \"https://open.spotify.com/track/0LSLM0zuWRkEYemF7JcfEE?si=EhnHw1mWS1OOC9joykQgOA\";\n  const spotifyLyrics = eventData?.spotifyLyrics || \"surf it scroll it pause it click it cross it crack it ssswitch update it\";\n  \n  // Parse the date string (format: DD/MM/YY)\n  const parseDateString = (dateStr: string) => {\n    const [day, month, year] = dateStr.split('/').map(Number);\n    return new Date(2000 + year, month - 1, day);\n  };\n  \n  const eventDateTime = parseDateString(eventDate);\n  \n  // Format date for display\n  const formattedDate = new Intl.DateTimeFormat('en-US', {\n    weekday: 'long',\n    month: 'short',\n    day: 'numeric'\n  }).format(eventDateTime);\n  \n  // Add useEffect to handle sidebar visibility and scroll tracking\n  useEffect(() => {\n    // Add a class to the body to handle sidebar visibility\n    document.body.classList.add('partiful-event-active');\n    \n    // Add scroll event listener\n    const handleScroll = () => {\n      if (containerRef.current) {\n        const { scrollTop, scrollHeight, clientHeight } = containerRef.current;\n        \n        // Track if user has scrolled more than 50px\n        if (scrollTop > 50) {\n          setHasScrolled(true);\n        }\n        \n        // Check if user has scrolled near the bottom (within 30px)\n        const isAtBottom = scrollHeight - scrollTop - clientHeight < 30;\n        if (isAtBottom && onScrollToBottom) {\n          onScrollToBottom();\n        }\n      }\n    };\n    \n    // Add event listener to the container\n    const currentContainer = containerRef.current;\n    if (currentContainer) {\n      currentContainer.addEventListener('scroll', handleScroll);\n    }\n    \n    // Also listen for window scroll (fallback)\n    window.addEventListener('scroll', handleScroll);\n    \n    // Clean up function to remove the class when component unmounts\n    return () => {\n      document.body.classList.remove('partiful-event-active');\n      if (currentContainer) {\n        currentContainer.removeEventListener('scroll', handleScroll);\n      }\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [onScrollToBottom]);\n\n  // Toggle expanded state\n  const toggleExpanded = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    setIsExpanded(prev => !prev);\n  };\n\n  // Handle back button click\n  const handleBackClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    onBack();\n  };\n\n  // Function to prevent any clicks from bubbling up but allow links to work\n  const preventBubbling = (e: React.MouseEvent) => {\n    // Skip if the target is an anchor tag or inside an anchor tag\n    if ((e.target as HTMLElement).tagName === 'A' || \n        (e.target as HTMLElement).closest('a')) {\n      return;\n    }\n    e.stopPropagation();\n  };\n\n  // Function to prevent touch events from bubbling up\n  const preventTouchBubbling = (e: React.TouchEvent) => {\n    e.stopPropagation();\n  };\n\n  // Host profile photos with smaller size to match screenshot\n  const hostPhotos = eventData?.hosts || [\n    { id: 1, image: '/icons/hosts/fareeha.jpg' },\n    { id: 2, image: '/icons/hosts/1-b975ea56.jpg' },\n    { id: 3, image: '/icons/hosts/2-b975ea56.jpg' },\n  ];\n  \n  // Use the actual attendee count from the event data\n  const approvedCount = eventData?.attendees || 12;\n  const attendeePhotos = [\n    { id: 1, image: 'https://i.pravatar.cc/100?img=1' },\n    { id: 2, image: 'https://i.pravatar.cc/100?img=2' },\n    { id: 3, image: 'https://i.pravatar.cc/100?img=3' },\n    { id: 4, image: 'https://i.pravatar.cc/100?img=4' },\n  ];\n  \n  // Function to handle external link clicks, prevents event propagation\n  const handleExternalLinkClick = (e: React.MouseEvent) => {\n    e.stopPropagation(); // Stop event from bubbling up\n    // Do not prevent default behavior so the link will work\n  };\n  \n  // Animation variants for staggered text\n  const textContainerVariants = {\n    hidden: { opacity: 0 },\n    visible: {\n      opacity: 1,\n      transition: {\n        delayChildren: 0.2,\n        staggerChildren: 0.02\n      }\n    }\n  };\n\n  const wordVariants = {\n    hidden: { opacity: 0, y: 10 },\n    visible: {\n      opacity: 1,\n      y: 0,\n      transition: {\n        type: \"spring\",\n        stiffness: 350,\n        damping: 30\n      }\n    }\n  };\n\n  // Variants for the expanded content animation\n  const expandedContentVariants = {\n    hidden: { \n      height: 0, \n      opacity: 0 \n    },\n    visible: { \n      height: 'auto', \n      opacity: 1,\n      transition: {\n        height: {\n          type: \"spring\",\n          stiffness: 300,\n          damping: 30,\n          duration: 0.3\n        },\n        opacity: {\n          duration: 0.2,\n          delay: 0.1\n        }\n      }\n    }\n  };\n\n  // Variants for the arrow animation\n  const arrowVariants = {\n    initial: { \n      rotate: 0,\n      y: [0, 3, 0],\n      transition: {\n        y: {\n          repeat: Infinity,\n          repeatType: \"reverse\",\n          duration: 1.5,\n          ease: \"easeInOut\"\n        }\n      }\n    },\n    expanded: { \n      rotate: 180,\n      y: 0,\n      transition: {\n        rotate: {\n          type: \"spring\",\n          stiffness: 300,\n          damping: 25\n        }\n      }\n    }\n  };\n\n  // First split by newlines to preserve them, then split each line by spaces\n  const descriptionLines = descriptionText.split('\\n').map(line => line.split(' '));\n  \n  // Flatten the array but keep track of line breaks\n  const descriptionWords = descriptionLines.reduce((acc, line, lineIndex) => {\n    if (lineIndex > 0) {\n      acc.push('\\n'); // Add line break between lines\n    }\n    return acc.concat(line);\n  }, [] as string[]);\n  \n  // Function to render icon with text\n  const renderIconWithText = (text: string) => {\n    if (text.startsWith('ðŸ‘•')) {\n      return (\n        <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\n          <Shirt size={16} color=\"white\" />\n          <span>{text.replace('ðŸ‘•', '').trim()}</span>\n        </div>\n      );\n    } else if (text.startsWith('ðŸ½ï¸')) {\n      return (\n        <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\n          <Utensils size={16} color=\"white\" />\n          <span>{text.replace('ðŸ½ï¸', '').trim()}</span>\n        </div>\n      );\n    }\n    return text;\n  };\n\n  return (\n    // Root container with height and width - capture and stop all events\n    <div \n      className=\"h-full w-full flex flex-col\" \n      onClick={preventBubbling}\n      onMouseDown={preventBubbling}\n      onTouchStart={preventTouchBubbling}\n      onTouchMove={preventTouchBubbling}\n      onTouchEnd={preventTouchBubbling}\n      style={{ \n        touchAction: 'pan-y',\n        backgroundColor: eventTitle === \"strawberry hour\" ? 'rgba(0, 32, 63, 0.5)' : \n                         eventTitle === \"consumer social\" ? 'rgba(10, 20, 40, 0.5)' : \n                         eventTitle === \"Watercolour\" ? 'rgba(147, 112, 142, 0.4)' :\n                         eventTitle === \"threading in\" ? 'rgba(35, 25, 15, 0.5)' :\n                         eventTitle === \"out of office\" ? 'rgba(144, 190, 109, 0.5)' :\n                         eventTitle === \"blood moon rising.\" ? 'rgba(20, 20, 20, 0.5)' :\n                         eventTitle === \"Scrumptious\" ? 'rgba(77, 166, 255, 0.35)' :\n                         eventTitle === \"kiwi soirÃ©e\" ? 'rgba(34, 85, 51, 0.5)' :\n                         'rgba(14, 43, 23, 0.5)', // Default color for mental static\n        boxShadow: '0 8px 32px rgba(0, 0, 0, 0.2), inset 0 0 0 1px rgba(255, 255, 255, 0.1)',\n        border: '1px solid rgba(255, 255, 255, 0.05)',\n        borderRadius: '12px',\n        backdropFilter: 'blur(8px)',\n        WebkitBackdropFilter: 'blur(8px)',\n        overflow: 'hidden'\n      }}\n    >\n      {/* Apple-style bottom fade to indicate scrollable content */}\n      <div \n        className=\"absolute bottom-0 left-0 right-0 h-16 pointer-events-none z-10\"\n        style={{\n          background: 'linear-gradient(to top, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0.4) 30%, rgba(0, 0, 0, 0.15) 60%, transparent 100%)',\n          borderBottomLeftRadius: '12px',\n          borderBottomRightRadius: '12px'\n        }}\n      />\n      \n      {/* Main content container - no drag or swipe functionality */}\n      <motion.div \n        ref={containerRef}\n        className=\"h-full w-full overflow-auto scrollbar-subtle relative pb-20\"\n        style={{ \n          fontFamily: 'var(--font-sans)',\n          overscrollBehavior: 'contain', // Prevent pull-to-refresh and bounce effects\n          maxHeight: '100%',  // Make sure content stays within the container height\n          touchAction: 'pan-y', // Allow vertical scrolling only\n          pointerEvents: 'auto', // Ensure the component captures all pointer events\n          padding: '24px',\n          paddingBottom: '80px'\n        }}\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ duration: 0.3 }}\n        drag={false} // Explicitly disable drag on this component\n      >\n        {/* Header title without extra margin */}\n        {eventTitle === \"blood moon rising.\" || eventTitle === \"consumer social\" ? (\n          <motion.div \n            initial={{ opacity: 0, y: -10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.4, ease: [0.22, 1, 0.36, 1] }}\n            style={{ \n              width: '100%',\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              marginBottom: '12px'\n            }}\n            data-event-type={eventTitle === \"blood moon rising.\" ? \"blood-moon-rising\" : \"consumer-social\"}\n          >\n            <h1 className={eventTitle === \"blood moon rising.\" ? \"blood-moon-title\" : \"blood-moon-title consumer-social-title\"} id={eventTitle === \"blood moon rising.\" ? \"blood-moon-title\" : \"consumer-social-title\"}>\n              {eventTitle === \"blood moon rising.\" ? \"blood moon rising.\" : \"consumer social.\"}\n            </h1>\n          </motion.div>\n        ) : (\n        <motion.h1 \n          className=\"ptf-l-PKzNy ptf-l-kz-X6 cGVq-y\" \n          initial={{ opacity: 0, y: -10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.4, ease: [0.22, 1, 0.36, 1] }}\n          style={{ \n            fontSize: '28px', \n            fontFamily: eventTitle === \"strawberry hour\" || eventTitle === \"threading in\" || eventTitle === \"Watercolour\" || eventTitle === \"Scrumptious\" || eventTitle === \"kiwi soirÃ©e\" ? 'Freight Display Pro, Didot, \"Bodoni MT\", \"Times New Roman\", serif' : 'Grotesk, -apple-system, BlinkMacSystemFont, Arial, sans-serif',\n            lineHeight: 1.1, \n            marginBottom: '12px', \n            color: 'white', \n            textAlign: 'center', \n            fontWeight: eventTitle === \"strawberry hour\" || eventTitle === \"threading in\" || eventTitle === \"Watercolour\" || eventTitle === \"Scrumptious\" || eventTitle === \"kiwi soirÃ©e\" ? 500 : 600,\n            letterSpacing: eventTitle === \"strawberry hour\" || eventTitle === \"threading in\" || eventTitle === \"Watercolour\" || eventTitle === \"Scrumptious\" || eventTitle === \"kiwi soirÃ©e\" ? '-0.03em' : '0.12em',\n            paddingTop: '0px',\n            textTransform: eventTitle === \"strawberry hour\" || eventTitle === \"out of office\" || eventTitle === \"threading in\" || eventTitle === \"Watercolour\" || eventTitle === \"Scrumptious\" || eventTitle === \"kiwi soirÃ©e\" ? 'none' : 'lowercase',\n            fontStretch: '150%',\n            fontStyle: 'normal',\n            whiteSpace: 'nowrap',\n            overflow: 'hidden'\n          }}\n        >\n          <span className=\"summary\" style={{ \n            fontStretch: 'expanded', \n            letterSpacing: eventTitle === \"strawberry hour\" || eventTitle === \"threading in\" || eventTitle === \"Watercolour\" || eventTitle === \"Scrumptious\" || eventTitle === \"kiwi soirÃ©e\" ? '-0.04em' : '0.08em' \n          }}>\n            {eventTitle === \"strawberry hour\" ? \"Strawberry hour.\" : \n             eventTitle === \"threading in\" ? \"threading in\" : \n             eventTitle === \"consumer social\" ? \"consumer social.\" : \n             eventTitle === \"Watercolour\" ? \"Watercolour.\" :\n             eventTitle === \"Scrumptious\" ? \"Scrumptious\" : eventTitle}\n          </span>\n        </motion.h1>\n        )}\n        \n        {/* Event image with square corners - expanded to match text width */}\n        <motion.div \n          className=\"w-full flex justify-center mb-3\"\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          transition={{ duration: 0.5, delay: 0.1, ease: [0.22, 1, 0.36, 1] }}\n        >\n          <div className=\"w-full overflow-hidden aspect-square\" style={{ maxHeight: '280px' }}>\n            <picture>\n              <source srcSet={eventData?.image?.webp || \"./images/partiful/ms-giphy.webp\"} type=\"image/webp\" />\n              <img \n                src={eventData?.image?.fallback || \"./images/partiful/ms-fallback.jpg\"} \n                alt={`${eventTitle} Event`} \n                className=\"w-full h-full\" \n                style={{ objectFit: 'cover', objectPosition: 'center' }}\n              />\n            </picture>\n          </div>\n        </motion.div>\n        \n        {/* Date info moved back outside the card container */}\n        <motion.time \n          className=\"ptf-l-V4zs2 dtstart ptf-l-mXUGi\" \n          dateTime=\"2025-03-31T07:30:00.000-07:00\"\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.4, delay: 0.2, ease: [0.22, 1, 0.36, 1] }}\n        >\n          <div className=\"ptf-l-daxsj\">\n            <div>\n              <div className=\"ptf-l-EDGV-\" style={{ color: 'white', fontSize: '24px', fontWeight: 500, letterSpacing: '-0.01em' }}>{formattedDate}</div>\n              <div className=\"ptf-l-y64FO\" style={{ color: 'rgba(255,255,255,0.7)', fontSize: '18px', fontWeight: 425 }}>{eventTime}</div>\n            </div>\n          </div>\n        </motion.time>\n        \n        {/* Host profiles section - even smaller sizes */}\n        <motion.div \n          className=\"ptf-l-gFMtG\" \n          style={{ marginBottom: '18px', marginTop: '2px', overflow: 'hidden' }}\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.4, delay: 0.3, ease: [0.22, 1, 0.36, 1] }}\n        >\n          <div className=\"ptf-l-V5l2c ptf-l-42Hmr ptf-l-vmns4\" style={{ display: 'flex', alignItems: 'center', marginTop: '14px' }}>\n            <span className=\"ptf--7nAv ptf-l-02UEs\" style={{ marginRight: '6px', display: 'flex', alignItems: 'center' }}>\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M5 16L3 5L8.5 10L12 4L15.5 10L21 5L19 16H5Z\" stroke=\"white\" strokeWidth=\"1.5\" fill=\"none\"/>\n                <path d=\"M19 19H5M19 22H5M19 19V22M5 19V22\" stroke=\"white\" strokeWidth=\"1.5\"/>\n              </svg>\n            </span>\n            <span className=\"ptf-6n-N4 ptf-NNO7K ptf-l-tpQlB\" style={{ color: 'white', fontSize: '14px', fontWeight: 400 }}>Hosted by</span>\n            \n            <div className=\"ptf-l-STiwz ptf-l-cXv5O\" style={{ marginLeft: '6px', display: 'flex', overflow: 'hidden' }}>\n              {hostPhotos.map((host, index) => (\n                <div key={host.id} className=\"ptf-l-UZPE- ptf-l-QJYpB ptf-l-gEM83\" style={{ marginRight: index === hostPhotos.length - 1 ? '0' : '0px' }}>\n                  <div className=\"ptf-l-sb2bo\">\n                    <div className=\"ptf-l-gt1XK\" style={{ width: '26px', height: '26px', borderRadius: '50%', overflow: 'hidden', position: 'relative', pointerEvents: host.image.includes('fareeha') ? 'auto' : 'none' }}>\n                      {host.image.includes('fareeha') ? (\n                        <a \n                          href=\"https://partiful.com/u/AuiLl2hkaLeL1T2mjMyMomWhe092\"\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          onClick={handleExternalLinkClick}\n                          style={{ \n                            display: 'block', \n                            width: '100%', \n                            height: '100%',\n                            cursor: 'pointer',\n                            position: 'relative',\n                            zIndex: 10\n                          }}\n                        >\n                          <img \n                            className=\"ptf-l-YHgvF\" \n                            src={host.image} \n                            alt=\"Host\" \n                            width=\"26\" \n                            height=\"26\"\n                            style={{ objectFit: 'cover', width: '100%', height: '100%' }}\n                          />\n                          <span className=\"ptf-l--7nAv ptf-l-WCCTT ptf-l-Wcrf2\" style={{ position: 'absolute', bottom: '-1px', right: '-1px', color: '#5938e8', height: '10px', width: '10px' }}>\n                            <svg width=\"10\" height=\"10\" viewBox=\"0 0 24 24\" fill=\"#5938e8\" xmlns=\"http://www.w3.org/2000/svg\">\n                              <path d=\"M5 16L3 5L8.5 10L12 4L15.5 10L21 5L19 16H5Z\" />\n                            </svg>\n                          </span>\n                        </a>\n                      ) : (\n                        <>\n                          <img \n                            className=\"ptf-l-YHgvF\" \n                            src={host.image} \n                            alt=\"Host\" \n                            width=\"26\" \n                            height=\"26\"\n                            style={{ objectFit: 'cover', width: '100%', height: '100%' }}\n                          />\n                        </>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n          \n          {/* Music lyrics with Spotify link - smaller font */}\n          {spotifyLyrics && (eventTitle !== \"threading in\" && eventTitle !== \"Watercolour\" && eventTitle !== \"Scrumptious\" && eventTitle !== \"consumer social\") && (\n          <div className=\"ptf-l-V5l2c ptf-l-42Hmr\" style={{ display: 'flex', alignItems: 'flex-start', marginTop: '8px', marginBottom: '14px' }}>\n            <span className=\"ptf--7nAv ptf-l-02UEs ptf-l-Y-q9d\" style={{ marginRight: '6px', display: 'flex', alignItems: 'center' }}>\n              {eventTitle === \"blood moon rising.\" ? (\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M10.4545 13.5455C10.0455 13.9545 10.0455 14.5909 10.4545 15C10.8636 15.4091 11.5 15.4091 11.9091 15L14.5455 12.3636C15.3636 11.5455 15.3636 10.2273 14.5455 9.40909C13.7273 8.59091 12.4091 8.59091 11.5909 9.40909L8.59091 12.4091C7.36364 13.6364 7.36364 15.5909 8.59091 16.8182C9.81818 18.0455 11.7727 18.0455 13 16.8182L16 13.8182\" stroke=\"white\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                  <path d=\"M13.5455 10.4545C13.9545 10.0455 14.5909 10.0455 15 10.4545C15.4091 10.8636 15.4091 11.5 15 11.9091L12.3636 14.5455C11.5455 15.3636 10.2273 15.3636 9.40909 14.5455C8.59091 13.7273 8.59091 12.4091 9.40909 11.5909L12.4091 8.59091C13.6364 7.36364 15.5909 7.36364 16.8182 8.59091C18.0455 9.81818 18.0455 11.7727 16.8182 13L13.8182 16\" stroke=\"white\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                </svg>\n              ) : eventTitle === \"out of office\" ? (\n                <Utensils size={16} color=\"white\" />\n              ) : (\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M9 18V5L21 3V16\" stroke=\"white\" strokeWidth=\"1.5\" fill=\"none\"/>\n                  <circle cx=\"6\" cy=\"18\" r=\"3\" stroke=\"white\" strokeWidth=\"1.5\" fill=\"none\"/>\n                  <circle cx=\"18\" cy=\"16\" r=\"3\" stroke=\"white\" strokeWidth=\"1.5\" fill=\"none\"/>\n                </svg>\n              )}\n            </span>\n            <a \n              href={spotifyLink}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"ptf-l-5a8R- ptf-l-4Jj6a\"\n              style={{ color: '#E6F8C1', fontSize: '14px', fontWeight: 600 }}\n              onClick={handleExternalLinkClick}\n            >\n              {spotifyLyrics}\n            </a>\n          </div>\n          )}\n          \n          {/* Description text with staggered word animation */}\n          <motion.div\n            className=\"description-container\"\n            variants={textContainerVariants}\n            initial=\"hidden\"\n            animate=\"visible\"\n            style={{ \n              marginTop: spotifyLyrics && (eventTitle !== \"threading in\" && eventTitle !== \"Watercolour\" && eventTitle !== \"Scrumptious\" && eventTitle !== \"consumer social\") ? '0' : '20px', \n              marginBottom: '0' \n            }}\n          >\n            <div style={{ \n              fontSize: '14px',\n              lineHeight: '22.4px',\n              color: 'rgb(255, 255, 255)',\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '4px',\n              fontFamily: 'Lausanne, \"Helvetica Neue\", Helvetica, sans-serif',\n              fontWeight: 400,\n              textRendering: 'optimizeSpeed',\n              WebkitFontSmoothing: 'antialiased',\n              isolation: 'isolate'\n            }}>\n              {descriptionText.split('\\n').map((paragraph, index) => (\n                <p key={index} style={{ margin: 0, display: 'block', marginTop: 0, lineHeight: '1.5' }}>\n                  {renderIconWithText(paragraph)}\n                </p>\n              ))}\n            </div>\n        \n            {/* Approved attendees section with profile circles and centered badge - moved inside description container */}\n        <motion.div \n              className=\"ptf-l-gQnpk\" \n          style={{ \n                margin: '0',\n                marginTop: '12px',\n            position: 'relative',\n            display: 'flex',\n            alignItems: 'center',\n                minHeight: '65px',  // Increased from 50px to give more space\n                paddingBottom: '15px'  // Added padding at the bottom to ensure content doesn't cut off\n          }}\n          onClick={preventBubbling}\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.4, delay: 0.4, ease: [0.22, 1, 0.36, 1] }}\n        >\n          {/* Profile circles row */}\n          <div style={{ \n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'flex-start',\n            position: 'relative',\n            width: '100%',\n            paddingLeft: '0px',\n            paddingRight: '12px'\n          }}>\n            {[...Array(8)].map((_, index) => {\n              // Generate a colorScheme based on event ID for consistent but varied colors per event\n              const colorSchemes = [\n                // Blue-greens\n                [\n                  { bg: 'linear-gradient(135deg, #2C9292, #2196F3)', pattern: 'radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #41B3A3, #85CDCA)', pattern: 'radial-gradient(circle at 70% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #5CDB95, #379683)', pattern: 'radial-gradient(circle at 30% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #8EE4AF, #379683)', pattern: 'radial-gradient(circle at 70% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #05386B, #379683)', pattern: 'radial-gradient(circle at 50% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #3AAFA9, #2B7A78)', pattern: 'radial-gradient(circle at 30% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #5CDB95, #05386B)', pattern: 'radial-gradient(circle at 70% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #41B3A3, #2B7A78)', pattern: 'radial-gradient(circle at 50% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' }\n                ],\n                // Yellow-browns\n                [\n                  { bg: 'linear-gradient(135deg, #F9A826, #E76F51)', pattern: 'radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #E9C46A, #F4A261)', pattern: 'radial-gradient(circle at 70% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #E76F51, #D4A373)', pattern: 'radial-gradient(circle at 30% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FAEDCD, #D4A373)', pattern: 'radial-gradient(circle at 70% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #CCD5AE, #E9EDC9)', pattern: 'radial-gradient(circle at 50% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #F9A826, #CCD5AE)', pattern: 'radial-gradient(circle at 30% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #E9C46A, #D4A373)', pattern: 'radial-gradient(circle at 70% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #F4A261, #E76F51)', pattern: 'radial-gradient(circle at 50% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' }\n                ],\n                // Purples-pinks\n                [\n                    { bg: 'linear-gradient(135deg, #5871FF, #8257E5)', pattern: 'radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                    { bg: 'linear-gradient(135deg, #8257E5, #FF7EB3)', pattern: 'radial-gradient(circle at 70% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                    { bg: 'linear-gradient(135deg, #FF7EB3, #5CB6FF)', pattern: 'radial-gradient(circle at 30% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                    { bg: 'linear-gradient(135deg, #5CB6FF, #9F7AEA)', pattern: 'radial-gradient(circle at 70% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                    { bg: 'linear-gradient(135deg, #9F7AEA, #65D2FF)', pattern: 'radial-gradient(circle at 50% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                    { bg: 'linear-gradient(135deg, #65D2FF, #8257E5)', pattern: 'radial-gradient(circle at 30% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                    { bg: 'linear-gradient(135deg, #8257E5, #5871FF)', pattern: 'radial-gradient(circle at 70% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                    { bg: 'linear-gradient(135deg, #5871FF, #FF7EB3)', pattern: 'radial-gradient(circle at 50% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' }\n                ],\n                // Reds-oranges\n                [\n                  { bg: 'linear-gradient(135deg, #FF6B6B, #FFB347)', pattern: 'radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FF8E71, #FF5E5B)', pattern: 'radial-gradient(circle at 70% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FF5E5B, #FFB347)', pattern: 'radial-gradient(circle at 30% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FFB347, #FF8E71)', pattern: 'radial-gradient(circle at 70% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FF6B6B, #FF9770)', pattern: 'radial-gradient(circle at 50% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FF9770, #FFB347)', pattern: 'radial-gradient(circle at 30% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FFB347, #FF5E5B)', pattern: 'radial-gradient(circle at 70% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FF5E5B, #FF6B6B)', pattern: 'radial-gradient(circle at 50% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' }\n                ],\n                // Greens-yellows\n                [\n                  { bg: 'linear-gradient(135deg, #ADCF9F, #CED89E)', pattern: 'radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #CED89E, #FBEAAB)', pattern: 'radial-gradient(circle at 70% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FBEAAB, #76BA99)', pattern: 'radial-gradient(circle at 30% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #76BA99, #3C8DAD)', pattern: 'radial-gradient(circle at 70% 70%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #3C8DAD, #ADCF9F)', pattern: 'radial-gradient(circle at 50% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #ADCF9F, #FBEAAB)', pattern: 'radial-gradient(circle at 30% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #FBEAAB, #3C8DAD)', pattern: 'radial-gradient(circle at 70% 50%, rgba(255,255,255,0.2) 0%, transparent 60%)' },\n                  { bg: 'linear-gradient(135deg, #3C8DAD, #76BA99)', pattern: 'radial-gradient(circle at 50% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)' }\n                ]\n              ];\n              \n              // Collection of accent/wildcard colors that can be inserted into any scheme\n              const wildcardColors = [\n                { bg: 'linear-gradient(135deg, #FF4D6D, #FF9D8D)', pattern: 'radial-gradient(circle at 40% 40%, rgba(255,255,255,0.15) 0%, transparent 50%)' },\n                { bg: 'linear-gradient(135deg, #845EC2, #B39CD0)', pattern: 'radial-gradient(circle at 35% 35%, rgba(255,255,255,0.15) 0%, transparent 50%)' },\n                { bg: 'linear-gradient(135deg, #00C9A7, #1AC0C6)', pattern: 'radial-gradient(circle at 45% 45%, rgba(255,255,255,0.15) 0%, transparent 50%)' },\n                { bg: 'linear-gradient(135deg, #F39233, #FFBD69)', pattern: 'radial-gradient(circle at 30% 30%, rgba(255,255,255,0.15) 0%, transparent 50%)' },\n                { bg: 'linear-gradient(135deg, #4D8076, #84A9AC)', pattern: 'radial-gradient(circle at 50% 50%, rgba(255,255,255,0.15) 0%, transparent 50%)' },\n                { bg: 'linear-gradient(135deg, #3B429F, #3A8AC0)', pattern: 'radial-gradient(circle at 40% 40%, rgba(255,255,255,0.15) 0%, transparent 50%)' },\n                { bg: 'linear-gradient(135deg, #0D5C46, #329476)', pattern: 'radial-gradient(circle at 35% 35%, rgba(255,255,255,0.15) 0%, transparent 50%)' },\n                { bg: 'linear-gradient(135deg, #A12568, #FF7582)', pattern: 'radial-gradient(circle at 45% 45%, rgba(255,255,255,0.15) 0%, transparent 50%)' },\n              ];\n              \n              // Use the eventData.id to create a predictable but seemingly random scheme\n              // This ensures the same event always gets the same color scheme\n              const eventIdNum = eventData?.id ? parseInt(eventData.id.toString().slice(-1), 10) : 0;\n              const schemeIndex = eventIdNum % colorSchemes.length;\n              let colors = [...colorSchemes[schemeIndex]]; // Make a copy we can modify\n              \n              // Inject some randomness with wildcard circles\n              // Use the event id and index to create a deterministic but seemingly random selection\n              const shouldUseWildcard = (eventIdNum + index) % 3 === 0; // Every 3rd profile has a chance for a wildcard\n              \n              if (shouldUseWildcard) {\n                // Use a combination of eventId and index to select a consistent wildcard\n                const wildcardIndex = (eventIdNum + index) % wildcardColors.length;\n                // Replace the current color with a wildcard color\n                colors[index] = wildcardColors[wildcardIndex];\n              }\n              \n              // Add some variation in gradient direction for more diversity\n              const gradientDirections = ['135deg', '150deg', '120deg', '165deg', '105deg', '90deg'];\n              const directionIndex = (eventIdNum + index) % gradientDirections.length;\n              \n              // Extract color values from the gradient for manipulation\n              const bgGradient = colors[index].bg;\n              const colorMatches = bgGradient.match(/linear-gradient\\(\\d+deg,\\s*([^,]+),\\s*([^)]+)\\)/);\n              \n              if (colorMatches && colorMatches.length >= 3) {\n                const color1 = colorMatches[1].trim();\n                const color2 = colorMatches[2].trim();\n                \n                // Occasionally flip the gradient colors or adjust opacity for more variety\n                const shouldFlip = (eventIdNum + index) % 5 === 0;\n                const shouldAdjustOpacity = (eventIdNum + index + 1) % 4 === 0;\n                \n                if (shouldFlip) {\n                  colors[index].bg = `linear-gradient(${gradientDirections[directionIndex]}, ${color2}, ${color1})`;\n                } else if (shouldAdjustOpacity) {\n                  // Make one color slightly transparent for more subtle gradients\n                  const opacity = 0.8 + (index % 3) * 0.1; // Between 0.8 and 1.0\n                  colors[index].bg = `linear-gradient(${gradientDirections[directionIndex]}, ${color1}, ${color2.replace(')', `, ${opacity})`).replace('rgb', 'rgba')}`;\n                } else {\n                  // Just change the direction\n                  colors[index].bg = `linear-gradient(${gradientDirections[directionIndex]}, ${color1}, ${color2})`;\n                }\n              }\n                  \n                  // Add subtle animation delay based on index\n                  const animationDelay = `${index * 0.1}s`;\n                  \n              return (\n                    <motion.div \n                  key={index} \n                  style={{ \n                    width: '32px',\n                    height: '32px',\n                    borderRadius: '50%',\n                    position: 'relative',\n                    marginLeft: index === 0 ? '0' : '-8px',\n                    zIndex: 8 - index,\n                        border: '2px solid rgba(255, 255, 255, 0.3)',\n                        boxShadow: '0 2px 8px rgba(0,0,0,0.2), inset 0 0 0 1px rgba(255,255,255,0.1)',\n                        background: colors[index].bg,\n                        opacity: 0.85,\n                        overflow: 'hidden'\n                      }}\n                      initial={{ scale: 0.9, opacity: 0.7 }}\n                      animate={{ \n                        scale: [0.9, 1.05, 1],\n                        opacity: [0.7, 0.9, 0.85]\n                      }}\n                      transition={{ \n                        duration: 0.5, \n                        delay: parseFloat(animationDelay),\n                        ease: \"easeOut\"\n                      }}\n                    >\n                      {/* Pattern overlay - larger than the circle */}\n                      <div style={{\n                        position: 'absolute',\n                        top: '-50%',\n                        left: '-50%',\n                        width: '200%',\n                        height: '200%',\n                        background: colors[index].pattern,\n                        opacity: 0.7\n                      }} />\n                      \n                      {/* Shine effect - larger than the circle */}\n                      <div style={{\n                        position: 'absolute',\n                        top: '-150%',\n                        left: '-150%',\n                        width: '400%',\n                        height: '400%',\n                        background: 'linear-gradient(45deg, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%)',\n                        transform: 'rotate(45deg)',\n                        animation: `shine 3s infinite ${animationDelay}`\n                      }} />\n                    </motion.div>\n              );\n            })}\n          </div>\n\n          {/* Centered approved count badge */}\n          <div \n            style={{\n              position: 'absolute',\n              left: '50%',\n              top: '50%',\n              transform: 'translate(-50%, -50%)',\n              zIndex: 20,\n              backgroundColor: 'rgba(0, 0, 0, 0.75)',\n              color: 'white',\n              borderRadius: '999px',\n              fontSize: '15px',\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center',\n              padding: '8px 18px 7px',\n              minWidth: '46px',\n              boxShadow: '0 2px 8px rgba(0,0,0,0.15), 0 0 0 1px rgba(255, 255, 255, 0.1), 0 0 0 2px rgba(255, 255, 255, 0.05)',\n                  border: '1px solid rgba(255, 255, 255, 0.8)'\n            }}\n          >\n            <div style={{ fontWeight: 500, lineHeight: 1.2 }}>{approvedCount}</div>\n                <div style={{ fontSize: '11px', opacity: 1.0, marginTop: '0px', letterSpacing: '0.02em' }}>Approved</div>\n          </div>\n            </motion.div>\n          </motion.div>\n        </motion.div>\n        \n        {/* Indicator arrow for expanding content */}\n        <motion.div \n          className=\"flex justify-center\"\n          onClick={toggleExpanded}\n        >\n        </motion.div>\n        \n        {/* Meme dictionary comment - only for kiwi soirÃ©e */}\n        {eventTitle === \"kiwi soirÃ©e\" && (\n          <motion.div\n            className=\"mx-4 mt-3 mb-2 p-3 rounded-xl\"\n            style={{\n              backgroundColor: 'rgba(255, 255, 255, 0.08)',\n              border: '1px solid rgba(255, 255, 255, 0.1)'\n            }}\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.4, delay: 0.45, ease: [0.22, 1, 0.36, 1] }}\n          >\n            <div className=\"flex items-start gap-3\">\n              <img \n                src=\"./icons/hosts/fareeha.jpg\" \n                alt=\"Fareeha\" \n                className=\"w-10 h-10 rounded-full object-cover flex-shrink-0\"\n                style={{ border: '1px solid rgba(255, 255, 255, 0.2)' }}\n              />\n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <span style={{ color: 'white', fontWeight: 600, fontSize: '14px' }}>Fareeha</span>\n                  <span style={{ color: 'rgba(255, 255, 255, 0.6)', fontSize: '13px' }}>sent a Text Blast ðŸ“£</span>\n                </div>\n                <p style={{ color: 'rgba(255, 255, 255, 0.85)', fontSize: '14px', lineHeight: '1.4' }}>\n                  <a href=\"https://knowyourmeme.com/memes/events/sf-kiwi-party\" target=\"_blank\" rel=\"noopener noreferrer\" style={{ color: '#90EE90', textDecoration: 'underline' }} onClick={(e) => e.stopPropagation()}>meme dictionary</a> page secured. that's what dedication looks like. That's what showing up looks like. That's what teamwork looks like. Proud of every single one of us\n                </p>\n                <div className=\"flex items-center gap-2 mt-2\">\n                  <span style={{ fontSize: '16px' }}>ðŸ’¬</span>\n                  <span style={{ color: 'rgba(255, 255, 255, 0.5)', fontSize: '13px' }}>Reply</span>\n                </div>\n              </div>\n            </div>\n          </motion.div>\n        )}\n        \n        {/* Text Blast comment - only for kiwi soirÃ©e */}\n        {eventTitle === \"kiwi soirÃ©e\" && (\n          <motion.div\n            className=\"mx-4 mt-2 mb-2 p-3 rounded-xl\"\n            style={{\n              backgroundColor: 'rgba(255, 255, 255, 0.08)',\n              border: '1px solid rgba(255, 255, 255, 0.1)'\n            }}\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.4, delay: 0.5, ease: [0.22, 1, 0.36, 1] }}\n          >\n            <div className=\"flex items-start gap-3\">\n              <img \n                src=\"./icons/hosts/fareeha.jpg\" \n                alt=\"Fareeha\" \n                className=\"w-10 h-10 rounded-full object-cover flex-shrink-0\"\n                style={{ border: '1px solid rgba(255, 255, 255, 0.2)' }}\n              />\n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <span style={{ color: 'white', fontWeight: 600, fontSize: '14px' }}>Fareeha</span>\n                  <span style={{ color: 'rgba(255, 255, 255, 0.6)', fontSize: '13px' }}>sent a Text Blast ðŸ“£</span>\n                </div>\n                <p style={{ color: 'rgba(255, 255, 255, 0.85)', fontSize: '14px', lineHeight: '1.4' }}>\n                  This is so crazy but I just heard through the kiwivine that if you don't show up in green and/or brown there might be consequences ðŸ˜¶\n                </p>\n                <div className=\"flex items-center gap-2 mt-2\">\n                  <span style={{ fontSize: '16px' }}>ðŸ’¬</span>\n                  <span style={{ color: 'rgba(255, 255, 255, 0.5)', fontSize: '13px' }}>Reply</span>\n                </div>\n              </div>\n            </div>\n          </motion.div>\n        )}\n        \n        {/* Pagination dots - always visible */}\n        <div className=\"flex items-center justify-center mt-2 mb-2 space-x-2\">\n          <div \n            className=\"w-[6px] h-[6px] rounded-full bg-white opacity-40\"\n            style={{ \n              animation: 'pulse 1.5s ease-in-out infinite'\n            }}\n          />\n          <div className=\"w-[6px] h-[6px] rounded-full bg-white\" />\n          <div \n            className=\"w-[6px] h-[6px] rounded-full bg-white opacity-40\"\n            style={{ \n              animation: 'pulse 1.5s ease-in-out 0.1s infinite'\n            }}\n          />\n        </div>\n      </motion.div>\n    </div>\n  );\n}; ","export type EventItem = {\n  id: number;\n  title: string;\n  date: string;\n  attendees: number;\n  clickable: boolean;\n  timeframe: 'upcoming' | 'past';\n  // Additional fields for event-specific content\n  time?: string;\n  description?: string;\n  spotifyLink?: string;\n  spotifyLyrics?: string;\n  image?: {\n    webp: string;\n    fallback: string;\n  };\n  hosts?: {\n    id: number;\n    image: string;\n  }[];\n};\n\nexport const events: EventItem[] = [\n  {\n    id: 1,\n    title: \"mental static\",\n    date: \"31/03/25\",\n    attendees: 35,\n    clickable: true,\n    timeframe: 'upcoming',\n    time: \"7:30pm\",\n    description: `quick hits of obscure knowledge ðŸ’š\n\nbring that random wikipedia rabbithole only you seem to know about. weird nature stuff, unsolved mysteries, watershed moments, conspiracy theories, crazy undercover govt ops, cool people etc etc ðŸŒ€ðŸŒ€ðŸŒ€\n\nwiki page will go up on a projector. exactly two mins for you to brief us. +1 question from the rest of us\n\nlimited capacity! tell us what you'd share ðŸ«¶ðŸ¼`,\n    spotifyLink: \"https://open.spotify.com/track/0LSLM0zuWRkEYemF7JcfEE?si=EhnHw1mWS1OOC9joykQgOA\",\n    spotifyLyrics: \"surf it scroll it pause it click it cross it crack it ssswitch update it\",\n    image: {\n      webp: \"./images/partiful/ms-giphy.webp\",\n      fallback: \"./images/partiful/ms-fallback.jpg\"\n    },\n    hosts: [\n      { id: 1, image: './icons/hosts/fareeha.jpg' },\n      { id: 2, image: './icons/hosts/1-b975ea56.jpg' },\n      { id: 3, image: './icons/hosts/2-b975ea56.jpg' }\n    ]\n  },\n  {\n    id: 2,\n    title: \"strawberry hour\",\n    date: \"26/03/25\",\n    attendees: 60,\n    clickable: true,\n    timeframe: 'upcoming',\n    time: \"7:00pm\",\n    description: `ðŸ‘• pinks reds whites\n\nðŸ½ï¸ literally just strawberries\n\none whole hour to celebrate strawberries being in season ðŸ˜Š ðŸ“ ðŸ“ ðŸ“`,\n    spotifyLink: \"https://open.spotify.com/track/3Am0IbOxmvlSXro7N5iSfZ\",\n    spotifyLyrics: \"nothing is real...\",\n    image: {\n      webp: \"./images/partiful/sh-giphy.webp\",\n      fallback: \"./images/partiful/sh-giphy.webp\"\n    },\n    hosts: [\n      { id: 1, image: './icons/hosts/fareeha.jpg' },\n      { id: 2, image: './icons/hosts/3-64896426.jpg' },\n      { id: 3, image: './icons/hosts/4-64896426.jpg' },\n      { id: 4, image: './icons/hosts/1-b975ea56.jpg' }\n    ]\n  },\n  {\n    id: 3,\n    title: \"blood moon rising.\",\n    date: \"13/03/25\",\n    attendees: 15,\n    clickable: true,\n    timeframe: 'upcoming',\n    time: \"8:00pm\",\n    description: `to witness the sky's transformation, marvel at cosmic rarity, and remember being small under something ancient.\n\n// layers recommended. the cold is merciless.\n\nmissing this will be cosmic treason; your absence will haunt you. ðŸŒ‘`,\n    spotifyLink: \"https://www.timeanddate.com/moon/usa/san-francisco\",\n    spotifyLyrics: \"Moon Info\",\n    image: {\n      webp: \"./images/partiful/bmr.jpeg\",\n      fallback: \"./images/partiful/bmr.jpeg\"\n    },\n    hosts: [\n      { id: 1, image: './icons/hosts/fareeha.jpg' },\n      { id: 2, image: './icons/hosts/5-64896426.jpg' },\n      { id: 3, image: './icons/hosts/6-64896426.jpg' }\n    ]\n  },\n  {\n    id: 5,\n    title: \"threading in\",\n    date: \"20/02/25\",\n    attendees: 40,\n    clickable: true,\n    timeframe: 'upcoming',\n    time: \"7:00pm\",\n    description: `Another Thursday, another nosh sesh.\n\nCurated for the people in our lives whose eyes sparkle when they talk.\n\nFew things bring us more joy than cooking for others, so there will be lots of beautiful finger foodsðŸ¤`,\n    spotifyLink: \"Potrero Hill, San Francisco, CA\",\n    spotifyLyrics: \"Fareeha\",\n    image: {\n      webp: \"./images/partiful/ti-giphy.webp\",\n      fallback: \"./images/partiful/ti-giphy.webp\"\n    },\n    hosts: [\n      { id: 1, image: './icons/hosts/1-b975ea56.jpg' },\n      { id: 2, image: './icons/hosts/fareeha.jpg' }\n    ]\n  },\n  {\n    id: 6,\n    title: \"consumer social\",\n    date: \"09/02/25\",\n    attendees: 10,\n    clickable: true,\n    timeframe: 'upcoming',\n    time: \"6:45pm\",\n    description: `The plan:\n\nwe go bowling ðŸŽ³\nand talk about all our fave apps :)\n\nbring a consumer product hot take. hottest take gets a high five`,\n    spotifyLink: \"Presidio Bowl\",\n    spotifyLyrics: \"Presidio Bowl\",\n    image: {\n      webp: \"./images/partiful/cs-giphy.webp\",\n      fallback: \"./images/partiful/cs-giphy.webp\"\n    },\n    hosts: [\n      { id: 1, image: './icons/hosts/fareeha.jpg' },\n      { id: 2, image: './icons/hosts/4-64896426.jpg' }\n    ]\n  },\n  {\n    id: 7,\n    title: \"Watercolour\",\n    date: \"19/09/24\",\n    attendees: 20,\n    clickable: true,\n    timeframe: 'upcoming',\n    time: \"6:30pm\",\n    description: `Watercolour ðŸŽ¨\n\nWe wanted to bring some of our favorite people in the city together for an intimate seated dinner, to celebrate each other and to create space for creative community.\n\nYou are cordially invited.\n\ndress code: pastels, watercolor washes, artisan details ðŸª·`,\n    image: {\n      webp: \"./images/partiful/w-giphy.webp\",\n      fallback: \"./images/partiful/w-giphy.webp\"\n    },\n    hosts: [\n      { id: 1, image: './icons/hosts/8-dd1a51c0.jpg' },\n      { id: 2, image: './icons/hosts/fareeha.jpg' }\n    ]\n  },\n  {\n    id: 8,\n    title: \"Scrumptious\",\n    date: \"08/08/24\",\n    attendees: 20,\n    clickable: true,\n    timeframe: 'upcoming',\n    time: \"6:30pm\",\n    description: `honeycrisp. pink lady. sugarbee. ghost apple. áº Ì·Ì¼Ì­Ì»ÍPÌ¶Ì³Ì™Ì™Ì‰ÌÌ†PÌ¸Ì°ÌšLÌ¶Ì Ì¯Ì¯Ì®ÍŠÌŠÈ†Ì´Ì—Ì­ÌÌ‡Ì€. belle de boskoop. you name it. we (probably don't) have it.\n\njoin us for an evening of unmatched extravagance as we present the ultimate apple tasting experienceâ€¦\n\nthis is luxury at its juiciest. be there or be ðŸŒ\n\nAPARTMENT 206`,\n    spotifyLink: \"Outer Sunset, San Francisco\",\n    spotifyLyrics: \"Outer Sunset, San Francisco\",\n    image: {\n      webp: \"./images/partiful/s.jpg\",\n      fallback: \"./images/partiful/s.jpg\"\n    },\n    hosts: [\n      { id: 1, image: './icons/hosts/1-b975ea56.jpg' },\n      { id: 2, image: './icons/hosts/fareeha.jpg' },\n      { id: 3, image: './icons/hosts/9-dd1a51c0.jpg' }\n    ]\n  },\n  {\n    id: 10,\n    title: \"kiwi soirÃ©e\",\n    date: \"17/09/25\",\n    attendees: 189,\n    clickable: true,\n    timeframe: 'upcoming',\n    time: \"6:30pm\",\n    description: `ðŸ‘• shades of kiwi (greens & browns) ðŸ¥\nðŸŽµ styles ðŸ’š\n\nðŸ½ï¸ Literally just kiwis\n\nhello\n\nðŸ¥ you have been cordially invited to kiwi soirÃ©e ðŸ¥\n\nâœ¨ we'll have piles of them ready for you\nâœ¨ slice, scoop, or (if you dare) bite right in\nâœ¨ facts: kiwis have more vitamin c than oranges! they're also linked to better sleep. so technically this is a wellness event ðŸ«¶ðŸ¼\n\nwe're so back baby!!!\nðŸ¥ðŸ¥ðŸ¥ðŸ¥ðŸ¥âœ¨`,\n    spotifyLink: \"https://open.spotify.com/track/33SNO8AaciGbNaQFkxvPrW?si=uxvU-h8oS2OyyTz3YKwCOA\",\n    spotifyLyrics: \"styles ðŸ’š\",\n    image: {\n      webp: \"./images/partiful/ks.webp\",\n      fallback: \"./images/partiful/ks.webp\"\n    },\n    hosts: [\n      { id: 1, image: './icons/hosts/fareeha.jpg' },\n      { id: 2, image: './icons/hosts/10-dd1a51c0.jpg' },\n      { id: 3, image: './icons/hosts/8-dd1a51c0.jpg' }\n    ]\n  }\n]; ","import React, { useState, useEffect } from 'react';\nimport type { AppScreenProps } from '../types';\nimport { motion, useReducedMotion, useAnimation, PanInfo, AnimatePresence } from 'framer-motion';\nimport { createTactileEffect } from '../App';\nimport { PartifulEvent } from '../components/PartifulEvent';\nimport { ChevronRight, ArrowLeft, ArrowRight } from 'lucide-react';\nimport { events, EventItem } from '../data/events';\n\nexport const EventScreen: React.FC<AppScreenProps> = ({ \n  onClose, \n  setIsEventDetailView, \n  initialEventId \n}) => {\n  const prefersReducedMotion = useReducedMotion();\n  const [showPartiful, setShowPartiful] = useState(false);\n  const [hasInteracted, setHasInteracted] = useState(false);\n  const [selectedEventId, setSelectedEventId] = useState<number | null>(null);\n  const [widgetEventId, setWidgetEventId] = useState<number | null>(null);\n  const [defaultHighlightEventId, setDefaultHighlightEventId] = useState<number | null>(null);\n  const [showSwipeIndicator, setShowSwipeIndicator] = useState(false);\n  const [hasScrolledToBottom, setHasScrolledToBottom] = useState(false);\n\n  // Add a special handler for the main App's back button\n  useEffect(() => {\n    // If we are showing Partiful and the App's back button is clicked,\n    // we should go back to the event list first instead of closing the app\n    const handleAppBackClick = () => {\n      if (showPartiful) {\n        // Call the prop setter if it exists\n        if (setIsEventDetailView) {\n          setIsEventDetailView(false);\n        }\n        // Set internal state\n        setShowPartiful(false);\n        setSelectedEventId(null);\n        createTactileEffect();\n        return true; // Event was handled\n      }\n      return false; // Let App handle the default behavior\n    };\n    \n    // Add this handler to window to be accessible by the App component\n    window.eventScreenBackHandler = handleAppBackClick;\n    \n    // Clean up\n    return () => {\n      // @ts-ignore\n      delete window.eventScreenBackHandler;\n    };\n  }, [showPartiful, setIsEventDetailView]);\n\n  // Effect to initialize widgetEventId from prop or window property\n  useEffect(() => {\n    // Prioritize prop, then window object\n    console.log('[EventScreen useEffect] Received initialEventId prop:', initialEventId);\n    const idFromSource = initialEventId !== undefined && initialEventId !== null \n      ? initialEventId \n      : (window as any).initialEventId;\n    \n    console.log('[EventScreen useEffect] Determined idFromSource:', idFromSource);\n\n    if (typeof idFromSource === 'number') {\n      setWidgetEventId(idFromSource);\n      console.log('[EventScreen useEffect] Set widgetEventId state to:', idFromSource);\n      // Clear the window property after reading it to prevent reuse on subsequent visits\n      // Only delete if the source was the window property to avoid deleting prop-related info potentially needed elsewhere\n      if (!(initialEventId !== undefined && initialEventId !== null)) {\n         delete (window as any).initialEventId; \n      }\n    } else {\n      // Clear widgetEventId if no initial ID is found\n      setWidgetEventId(null);\n      console.log('[EventScreen useEffect] Cleared widgetEventId state (no valid source ID)');\n    }\n  }, [initialEventId]); // Depend on the prop\n\n  // Modified to show swipe indicator when user scrolls to bottom of first event\n  useEffect(() => {\n    if (showPartiful && hasScrolledToBottom) {\n      // Check localStorage to see if user has already used swipe\n      const hasUsedSwipe = localStorage.getItem('hasUsedEventSwipe') === 'true';\n      \n      if (!hasUsedSwipe) {\n        // Show the swipe indicator if user hasn't swiped before\n        setShowSwipeIndicator(true);\n      }\n    } else {\n      // Hide the indicator if not showing Partiful or not scrolled to bottom\n      setShowSwipeIndicator(false);\n    }\n  }, [showPartiful, hasScrolledToBottom]);\n\n  // Use useEffect to call the prop setter when showPartiful changes\n  useEffect(() => {\n    if (setIsEventDetailView) {\n      setIsEventDetailView(showPartiful);\n      console.log('Calling setIsEventDetailView prop:', showPartiful);\n    }\n    // No cleanup needed here as App.tsx manages the state\n  }, [showPartiful, setIsEventDetailView]);\n\n  // Check for initial event ID (similar to what we did for notes)\n  useEffect(() => {\n    // Check if the user came from the widget\n    if (window.initialEventId) {\n      const eventToOpen = events.find(event => event.id === window.initialEventId);\n      if (eventToOpen) {\n        setWidgetEventId(eventToOpen.id); // Store the widget event ID\n        \n        // We no longer automatically open the event detail\n        // Just set the widget event ID so the pulsing dot shows up\n      }\n      // Clear the initialEventId after using it\n      window.initialEventId = undefined;\n    } else {\n      // User didn't come from the widget, so set up the default highlight\n      // Sort all events to get the most recent upcoming event as default to highlight\n      const sortedEvents = [...events].sort((a, b) => {\n        // First prioritize upcoming events\n        if (a.timeframe === 'upcoming' && b.timeframe !== 'upcoming') return -1;\n        if (a.timeframe !== 'upcoming' && b.timeframe === 'upcoming') return 1;\n        \n        // Then sort by date (most recent first)\n        const [dayA, monthA, yearA] = a.date.split('/').map(Number);\n        const [dayB, monthB, yearB] = b.date.split('/').map(Number);\n        \n        // Only for upcoming events, sort by date (soonest first)\n        if (a.timeframe === 'upcoming' && b.timeframe === 'upcoming') {\n          if (yearA !== yearB) return yearA - yearB;\n          if (monthA !== monthB) return monthA - monthB;\n          return dayA - dayB;\n        }\n        \n        // For past events, sort by date (most recent first)\n        if (yearB !== yearA) return yearB - yearA;\n        if (monthB !== monthA) return monthB - monthA;\n        return dayB - dayA;\n      });\n      \n      // Find the first clickable event to highlight\n      const firstClickableEvent = sortedEvents.find(event => event.clickable);\n      if (firstClickableEvent) {\n        setDefaultHighlightEventId(firstClickableEvent.id);\n      } else if (sortedEvents.length > 0) {\n        // If no clickable events, just highlight the first one\n        setDefaultHighlightEventId(sortedEvents[0].id);\n      }\n    }\n  }, []);\n\n  // Simple helper function to format date\n  const getRelativeDate = (dateStr: string) => {\n    const today = \"08/04/25\"; // Assume today is 8th April 2025\n    if (dateStr === today) return \"Today\";\n    if (dateStr === \"07/04/25\") return \"Yesterday\";\n    \n    // Parse the date to get the month\n    const [day, month, year] = dateStr.split('/').map(Number);\n    \n    // Convert month number to month name\n    const monthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n    const monthName = monthNames[month - 1];\n    \n    return monthName;\n  };\n  \n  // Apple-like spring animation\n  const springTransition = {\n    type: \"spring\",\n    damping: 30,\n    stiffness: 400,\n    mass: 0.8,\n  };\n  \n  // Animation variants for staggered entrance\n  const containerVariants = {\n    hidden: { opacity: 0 },\n    show: {\n      opacity: 1,\n      transition: {\n        staggerChildren: 0.1,\n        delayChildren: 0.05\n      }\n    }\n  };\n\n  // Subtle chevron animation variants\n  const chevronVariants = {\n    initial: { x: 0 },\n    hover: { x: 2, transition: { repeat: 0, duration: 0.3 } }\n  };\n\n  const handleInteraction = () => {\n    if (!hasInteracted) {\n      setHasInteracted(true);\n    }\n  };\n\n  const handleEventPress = (event: EventItem) => {\n    // Mark event as viewed for the pulsing dot\n    // TODO: Implement or import markEventAsViewed\n    // const markEventAsViewed = (eventId: number) => {\n    //   const viewedEvents = JSON.parse(localStorage.getItem('viewedEvents') || '[]');\n    //   if (!viewedEvents.includes(eventId)) {\n    //     viewedEvents.push(eventId);\n    //     localStorage.setItem('viewedEvents', JSON.stringify(viewedEvents));\n    //   }\n    // };\n    // markEventAsViewed(event.id);\n    \n    // Clear the widget highlight if this event was the one highlighted\n    if (event.id === widgetEventId) {\n      setWidgetEventId(null);\n    }\n\n    // Check if we need to show partiful data\n    if (event.clickable) {\n      // Reset scroll state when showing a new event\n      setHasScrolledToBottom(false);\n      setSelectedEventId(event.id);\n      setShowPartiful(true);\n      createTactileEffect();\n      // Call the prop setter if it exists\n      if (setIsEventDetailView) {\n        setIsEventDetailView(true);\n      }\n    }\n  };\n\n  if (showPartiful) {\n    // Find the selected event or default to the first clickable one\n    const selectedEvent = selectedEventId \n      ? events.find(event => event.id === selectedEventId) \n      : events.find(event => event.clickable);\n    \n    // Find the index of the current event\n    const currentIndex = selectedEventId \n      ? events.findIndex(event => event.id === selectedEventId)\n      : events.findIndex(event => event.clickable);\n    \n    // Calculate previous and next event indices (ensuring they're clickable)\n    const getNextClickableEvent = (startIndex: number, direction: 'next' | 'prev') => {\n      const totalEvents = events.length;\n      let offset = direction === 'next' ? 1 : -1;\n      let index = startIndex;\n      \n      // Loop through all events to find the next/prev clickable one\n      for (let i = 0; i < totalEvents; i++) {\n        index = (index + offset + totalEvents) % totalEvents; // Ensure wrap-around\n        if (events[index].clickable) {\n          return events[index].id;\n        }\n      }\n      \n      // If no clickable events found, return the original\n      return events[startIndex].id;\n    };\n    \n    const prevEventId = getNextClickableEvent(currentIndex, 'prev');\n    const nextEventId = getNextClickableEvent(currentIndex, 'next');\n    \n    // Handler for swipe navigation\n    const handleDragEnd = (event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => {\n      // Determine if the drag was significant enough to trigger navigation\n      const dragThreshold = 50; // Minimum drag distance to trigger navigation\n      \n      if (info.offset.x > dragThreshold) {\n        // Swiped right - go to previous event\n        // TODO: Implement or import markEventAsViewed\n        // markEventAsViewed(prevEventId);\n        setSelectedEventId(prevEventId);\n        // Reset scroll state for the new event\n        setHasScrolledToBottom(false);\n        createTactileEffect();\n        \n        // Hide indicator permanently\n        setShowSwipeIndicator(false);\n        localStorage.setItem('hasUsedEventSwipe', 'true');\n      } else if (info.offset.x < -dragThreshold) {\n        // Swiped left - go to next event\n        // TODO: Implement or import markEventAsViewed\n        // markEventAsViewed(nextEventId);\n        setSelectedEventId(nextEventId);\n        // Reset scroll state for the new event\n        setHasScrolledToBottom(false);\n        createTactileEffect();\n        \n        // Hide indicator permanently\n        setShowSwipeIndicator(false);\n        localStorage.setItem('hasUsedEventSwipe', 'true');\n      }\n    };\n    \n    return (\n      <div className=\"h-full w-full overflow-hidden\">\n        <AnimatePresence mode=\"wait\">\n          <motion.div \n            key={selectedEventId} //  This forces a re-render on event change\n            className=\"h-full w-full\"\n            initial={{ opacity: 0, x: 0 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0 }}\n            transition={{ duration: 0.2 }}\n            drag={prefersReducedMotion ? false : \"x\"}\n            dragDirectionLock\n            dragConstraints={{ left: 0, right: 0 }}\n            dragTransition={{ bounceStiffness: 600, bounceDamping: 20 }}\n            dragElastic={0}\n            onDragEnd={handleDragEnd}\n            onMouseDown={(e) => e.stopPropagation()}\n            onTouchStart={(e) => e.stopPropagation()}\n            onTouchMove={(e) => e.stopPropagation()}\n            onClick={(e) => e.stopPropagation()}\n          >\n            <PartifulEvent \n              eventData={selectedEvent}\n              onBack={() => {\n                // Call the prop setter if it exists\n                if (setIsEventDetailView) {\n                  setIsEventDetailView(false);\n                }\n                // Set internal state\n                setShowPartiful(false);\n                setSelectedEventId(null);\n                createTactileEffect();\n              }}\n              onScrollToBottom={() => setHasScrolledToBottom(true)}\n            />\n          </motion.div>\n        </AnimatePresence>\n      </div>\n    );\n  }\n\n  // Filter events by timeframe\n  const upcomingEvents = events.filter(event => event.timeframe === 'upcoming');\n  const pastEvents = events.filter(event => event.timeframe === 'past');\n\n  // Get all events for the \"All\" section, sorted by date (most recent first)\n  const allEvents = [...events].sort((a, b) => {\n    // Parse dates (assuming DD/MM/YY format)\n    const [dayA, monthA, yearA] = a.date.split('/').map(Number);\n    const [dayB, monthB, yearB] = b.date.split('/').map(Number);\n    \n    // Compare dates in reverse order (newest first)\n    if (yearB !== yearA) return yearB - yearA;\n    if (monthB !== monthA) return monthB - monthA;\n    return dayB - dayA;\n  });\n\n  // Function to check if an event is within the past month\n  const isPastMonth = (dateStr: string) => {\n    const [day, month, year] = dateStr.split('/').map(Number);\n    const eventDate = new Date(2000 + year, month - 1, day); // Convert YY to 20YY\n    \n    const now = new Date();\n    const oneMonthAgo = new Date();\n    oneMonthAgo.setMonth(now.getMonth() - 1);\n    \n    return eventDate >= oneMonthAgo && eventDate <= now;\n  };\n\n  // Get events from the past month\n  const pastMonthEvents = allEvents.filter(event => isPastMonth(event.date));\n  \n  // Get all events that are not in the past month section\n  const remainingEvents = allEvents.filter(event => !isPastMonth(event.date));\n\n  // Function to determine if the pulsing dot should be shown for an event\n  const shouldShowPulsingDot = (eventId: number) => {\n    console.log(`[EventScreen shouldShowPulsingDot] Checking eventId: ${eventId} against widgetEventId: ${widgetEventId}`);\n    return eventId === widgetEventId;\n  };\n\n  return (\n    <div \n      className=\"h-full w-full\" \n      onClick={(e) => {\n        e.stopPropagation();\n        handleInteraction();\n      }}\n      onTouchStart={handleInteraction}\n    >\n      <motion.div \n        className=\"overflow-y-auto scrollbar-subtle\"\n        variants={containerVariants}\n        initial=\"hidden\"\n        animate=\"show\"\n      >\n        <div className=\"space-y-3 p-6 pt-8 pb-4\">\n          {/* Partiful Events Explanation */}\n          {/* Change back to regular div for no animation */}\n          <div \n            className=\"mb-5\"\n          >\n            <p className=\"text-white/60 text-[14px] px-2\">\n            Fun little gatherings I've enjoyed planning with friends, hope this inspires!\n            </p>\n          </div>\n          {/* Past Month section */}\n          {pastMonthEvents.length > 0 && (\n            <div>\n              <h2 className=\"text-white/60 text-[14px] font-medium uppercase tracking-wider mb-4 px-2\">\n                Past Month\n              </h2>\n              <div className=\"space-y-2\">\n                {pastMonthEvents.map((event, index) => (\n                  <motion.div \n                    key={`past-month-${event.id}`}\n                    className=\"flex group px-1 py-0.5 rounded-md hover:bg-white/5 active:bg-white/10 relative\" \n                    onClick={(e) => {\n                      if (event.clickable) {\n                        e.stopPropagation();\n                        createTactileEffect();\n                        handleEventPress(event);\n                      }\n                    }}\n                    whileHover={{ scale: 1.01 }}\n                    whileTap={{ scale: 0.98 }}\n                    transition={{ duration: 0.2 }}\n                  >\n                    <div className=\"w-5 h-5 flex-shrink-0 flex items-center justify-center text-white/50\">\n                      <motion.div\n                        variants={chevronVariants}\n                        initial=\"initial\"\n                        whileHover=\"hover\"\n                      >\n                        <ChevronRight size={16} className=\"group-hover:text-white/70 transition-colors duration-200\" />\n                      </motion.div>\n                    </div>\n                    <div className=\"ml-1 flex-1 flex justify-between items-center\">\n                      <div className=\"flex-1 pr-3\">\n                        <h3 className={`${event.clickable ? 'text-white/90 group-hover:text-white' : 'text-white/60'} break-words transition-colors duration-200 distinct-note-font`}>\n                          {event.title}\n                        </h3>\n                      </div>\n                      <div className=\"flex-shrink-0 flex items-center\">\n                        <span className=\"text-[14px] text-white/50 whitespace-nowrap\">\n                          {getRelativeDate(event.date)}\n                        </span>\n                      </div>\n                    </div>\n                    {shouldShowPulsingDot(event.id) && (\n                      <div \n                        className=\"absolute -right-1 top-1/3 -translate-y-1/2\" \n                      >\n                        <motion.div \n                          className=\"w-2 h-2 rounded-full bg-white/70\" \n                          initial={{ opacity: 0.7 }}\n                          animate={{ \n                            opacity: [0.5, 0.9, 0.5],\n                            scale: [1, 1.2, 1]\n                          }}\n                          transition={{ \n                            repeat: Infinity, \n                            repeatType: \"reverse\", \n                            duration: 1.5,\n                            repeatDelay: 1\n                          }}\n                        />\n                      </div>\n                    )}\n                  </motion.div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* All events section */}\n          {remainingEvents.length > 0 && (\n            <div>\n              <h2 className=\"text-white/60 text-[14px] font-medium uppercase tracking-wider mb-4 px-2\">\n                All\n              </h2>\n              <div className=\"space-y-2\">\n                {remainingEvents.map((event, index) => (\n                  <motion.div \n                    key={`all-${event.id}`}\n                    className=\"flex group px-1 py-0.5 rounded-md hover:bg-white/5 active:bg-white/10 relative\" \n                    onClick={(e) => {\n                      if (event.clickable) {\n                        e.stopPropagation();\n                        createTactileEffect();\n                        handleEventPress(event);\n                      }\n                    }}\n                    whileHover={{ scale: 1.01 }}\n                    whileTap={{ scale: 0.98 }}\n                    transition={{ duration: 0.2 }}\n                  >\n                    <div className=\"w-5 h-5 flex-shrink-0 flex items-center justify-center text-white/50\">\n                      <motion.div\n                        variants={chevronVariants}\n                        initial=\"initial\"\n                        whileHover=\"hover\"\n                      >\n                        <ChevronRight size={16} className=\"group-hover:text-white/70 transition-colors duration-200\" />\n                      </motion.div>\n                    </div>\n                    <div className=\"ml-1 flex-1 flex justify-between items-center\">\n                      <div className=\"flex-1 pr-3\">\n                        <h3 className={`${event.clickable ? 'text-white/90 group-hover:text-white' : 'text-white/60'} break-words transition-colors duration-200 distinct-note-font`}>\n                          {event.title}\n                        </h3>\n                      </div>\n                      <div className=\"flex-shrink-0 flex items-center\">\n                        <span className=\"text-[14px] text-white/50 whitespace-nowrap\">\n                          {getRelativeDate(event.date)}\n                        </span>\n                      </div>\n                    </div>\n                    {shouldShowPulsingDot(event.id) && (\n                      <div \n                        className=\"absolute -right-1 top-1/3 -translate-y-1/2\" \n                      >\n                        <motion.div \n                          className=\"w-2 h-2 rounded-full bg-white/70\" \n                          initial={{ opacity: 0.7 }}\n                          animate={{ \n                            opacity: [0.5, 0.9, 0.5],\n                            scale: [1, 1.2, 1]\n                          }}\n                          transition={{ \n                            repeat: Infinity, \n                            repeatType: \"reverse\", \n                            duration: 1.5,\n                            repeatDelay: 1\n                          }}\n                        />\n                      </div>\n                    )}\n                  </motion.div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </motion.div>\n    </div>\n  );\n};","import React, { useState, useEffect } from 'react';\n\ninterface AppBackgroundProps {\n  isLoaded: boolean; // Pass isLoaded state to control image fade-in\n}\n\nconst AppBackground: React.FC<AppBackgroundProps> = ({ isLoaded }) => {\n  // State to handle image fallback\n  const [imageSrc, setImageSrc] = useState('./images/background.webp');\n\n  // Effect to try loading the primary image and fallback if needed\n  useEffect(() => {\n    const img = new Image();\n    img.src = './images/background.webp';\n    img.onerror = () => {\n      // If webp fails, set state to use jpg\n      setImageSrc('./images/background.jpg');\n    };\n  }, []); // Run only once on mount\n\n  return (\n    <div className=\"absolute inset-0 w-full h-full overflow-hidden z-0\">\n      {/* Base gradient and color */}\n      <div\n        className=\"absolute inset-0 bg-gradient-to-br from-[#131518] to-[#1d1c21]\"\n        style={{\n          opacity: 1,\n          backgroundColor: '#131518',\n        }}\n      >\n        {/* Subtle bokeh effect overlay */}\n        <div\n          className=\"absolute inset-0 opacity-30\"\n          style={{\n            backgroundImage: 'radial-gradient(circle at 30% 20%, rgba(255,255,255,0.03) 0%, transparent 50%), radial-gradient(circle at 70% 60%, rgba(255,255,255,0.02) 0%, transparent 30%), radial-gradient(circle at 45% 80%, rgba(180,180,200,0.02) 0%, transparent 40%)',\n            mixBlendMode: 'screen'\n          }}\n        ></div>\n\n        {/* Background image that loads on top of the gradient */}\n        <img\n          src={imageSrc}\n          alt=\"\"\n          className=\"absolute inset-0 w-full h-full object-cover\"\n          style={{\n            opacity: isLoaded ? 0.7 : 0,\n            transition: 'opacity 1s ease',\n            backgroundColor: '#131518',\n          }}\n          // No onError needed here as the effect handles the fallback\n        />\n\n        {/* Subtle overlay for better text contrast */}\n        <div\n          className=\"absolute inset-0 bg-black\"\n          style={{\n            opacity: isLoaded ? 0.35 : 0,\n            transition: 'opacity 1s ease',\n          }}\n        ></div>\n      </div>\n    </div>\n  );\n};\n\nexport default AppBackground; ","import React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport AppBackground from './AppBackground';\nimport ReactDOM from 'react-dom';\nimport { X } from 'lucide-react';\n\n// Add VideoPlayerOverlay component for in-screen video playback\nconst VideoPlayerOverlay = ({ videoUrl, onClose }: { videoUrl: string; onClose: () => void }) => {\n  // Extract YouTube video ID from URL\n  const getYouTubeVideoId = (url: string) => {\n    const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\n    const match = url.match(regExp);\n    return (match && match[2].length === 11) ? match[2] : null;\n  };\n\n  const videoId = getYouTubeVideoId(videoUrl);\n\n  if (!videoId) return null;\n\n  // Calculate embedUrl\n  const embedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&controls=1&showinfo=1&playsinline=1`;\n\n  // Create a portal to render directly to body\n  return ReactDOM.createPortal(\n    <motion.div \n      className=\"fixed inset-0 z-[9999] flex items-center justify-center bg-black\"\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        width: '100vw',\n        height: '100vh'\n      }}\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      onClick={onClose}\n    >\n      <motion.div \n        className=\"w-full h-full flex items-center justify-center\"\n        initial={{ scale: 0.95, opacity: 0 }}\n        animate={{ scale: 1, opacity: 1 }}\n        exit={{ scale: 0.95, opacity: 0 }}\n        transition={{ type: \"spring\", damping: 25, stiffness: 300 }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        <button \n          className=\"absolute top-8 right-8 z-10 p-3 bg-black/70 hover:bg-black/90 rounded-full text-white/80 hover:text-white transition-colors\"\n          onClick={(e) => {\n            e.stopPropagation();\n            onClose();\n          }}\n        >\n          <X size={28} />\n        </button>\n        <iframe\n          className=\"w-full h-full max-h-screen\"\n          src={embedUrl}\n          title=\"YouTube video player\"\n          frameBorder=\"0\"\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n          allowFullScreen\n        ></iframe>\n      </motion.div>\n    </motion.div>,\n    document.body\n  );\n};\n\ninterface DesktopOverlayProps {\n  onClose: () => void;\n}\n\nconst DesktopOverlay: React.FC<DesktopOverlayProps> = ({ onClose }) => {\n  const isLoaded = true;\n  // Add state for video URL\n  const [videoUrl, setVideoUrl] = useState<string | null>(null);\n  // Add state for 'shipped by' intro animation\n  const [showShippedBy, setShowShippedBy] = useState(true);\n\n  // Hide 'shipped by' after 3 seconds on first visit\n  React.useEffect(() => {\n    const timer = setTimeout(() => {\n      setShowShippedBy(false);\n    }, 3000);\n    return () => clearTimeout(timer);\n  }, []);\n\n  // Add function to handle video links\n  const handleVideoLink = (url: string) => {\n    setVideoUrl(url);\n  };\n\n  // Function to close video player\n  const closeVideoPlayer = () => {\n    setVideoUrl(null);\n  };\n\n  const contentBeforeLoveList = `\\\n<span style=\"font-size: clamp(20px, 4vw, 24px); font-weight: 500; line-height: 1.3;\">Hey, I\\'m Fareeha âœ¨</span>\n\nI love watching people light up around each other - my compass seems to keep pointing that way.\n\nI\\'m on the launch team for <a href=\"https://symbolicfusion.com\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"custom-pink-link custom-pink-link--desktop-overlay\" onclick=\"event.stopPropagation()\">Symbolic Fusion</a>, a new technology for agent builders. I also built <a href=\"https://kineship.com\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"custom-pink-link custom-pink-link--desktop-overlay\" onclick=\"event.stopPropagation()\">Kineship</a>, a social layer for workouts.\n\nIn Spring 2026, I'll be directing a fashion show. It\\'s ambitious. More news to come.\n\n<span style=\"font-weight: bold;\">previous projects:</span>\nâ–¹ systems design for boutique wellness spaces <a href=\"https://silicon-divan-443.notion.site/Retention-System-Design-for-Boutique-Fitness-1f7a4827ee3380599df9c1afc31689f1\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"custom-pink-link custom-pink-link--desktop-overlay\" onclick=\"event.stopPropagation()\">(infra mapping, product integration)</a>\nâ–¹ social design in health & community <span style=\"color: rgba(255, 255, 255, 0.65);\"> (</span><a href=\"https://fareeha-s.github.io/Tessel/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"custom-pink-link custom-pink-link--desktop-overlay\" onclick=\"event.stopPropagation()\">tessel</a><span style=\"color: rgba(255, 255, 255, 0.65);\">, <a href=\"https://impact.ventureforcanada.ca/2023/programs/fellowship-alumni\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"custom-pink-link custom-pink-link--desktop-overlay\" onclick=\"event.stopPropagation()\">vfc</a><span style=\"color: rgba(255, 255, 255, 0.65);\">, </span><a href=\"javascript:void(0)\" class=\"custom-pink-link custom-pink-link--desktop-overlay\" onclick=\"event.stopPropagation(); document.handleVideoLink = function(url) { window.desktopHandleVideoLink(url) }; window.desktopHandleVideoLink('https://youtu.be/VMxSzVREUgY');\">h&s gala</a><span style=\"color: rgba(255, 255, 255, 0.65);\">, </span><a href=\"javascript:void(0)\" class=\"custom-pink-link custom-pink-link--desktop-overlay\" onclick=\"event.stopPropagation(); document.handleVideoLink = function(url) { window.desktopHandleVideoLink(url) }; window.desktopHandleVideoLink('https://youtu.be/vXCGUXAQfOs?si=JUGWTpF-NB_2DE3a');\">dc fashion show</a><span style=\"color: rgba(255, 255, 255, 0.65);\"></span>)</span>\nâ–¹ winning team, healthcare innovation <span style=\"color: rgba(255, 255, 255, 0.65);\"> (</span><a href=\"https://silicon-divan-443.notion.site/MedBridge-235a4827ee33804b8a05c087946d7a80\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"custom-pink-link custom-pink-link--desktop-overlay\" onclick=\"event.stopPropagation()\">mit bc x harvard med</a><span style=\"color: rgba(255, 255, 255, 0.65);\">)</span>\nâ–¹ ice/breakers (<a href=\"https://www.producthunt.com/products/icebreakers-2?launch=icebreakers-b45694ac-4bea-4ec9-870f-67a447107f26\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"custom-pink-link custom-pink-link--desktop-overlay\" onclick=\"event.stopPropagation()\">#3 on ProductHunt</a>)\n\nIf this feels like your kind of world, I\\'d love to <a href=\"mailto:fareeha@kineship.com\" class=\"custom-pink-link custom-pink-link--desktop-overlay\" onclick=\"event.stopPropagation()\">hear from you.</a>\n`;\n\n  const contentAfterLoveList = ``;\n\n  // Make handleVideoLink available globally within the component's lifecycle\n  React.useEffect(() => {\n    // Expose the handleVideoLink function globally\n    window.desktopHandleVideoLink = handleVideoLink;\n    \n    // Clean up when component unmounts\n    return () => {\n      delete window.desktopHandleVideoLink;\n    };\n  }, []);\n\n  return (\n    <motion.div\n      className=\"fixed inset-0 flex items-center justify-center p-4 sm:p-8 z-50 overflow-y-auto\"\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      transition={{ duration: 0.3 }}\n    >\n      <AppBackground isLoaded={isLoaded} />\n      \n      <div className=\"relative w-full max-w-4xl mx-auto my-auto\">\n        <motion.h2 \n          className=\"absolute top-[-24px] right-9 text-[18px] font-semibold text-white z-20\"\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1, transition: { duration: 0.9, ease: [0.25, 0.8, 0.25, 1] } }}\n          style={{ \n            textShadow: '0px 1px 1px rgba(0, 0, 0, 0.3)' \n          }}\n        >\n          <span className=\"flex items-center\">\n            <a href=\"https://github.com/fareeha-s\" target=\"_blank\" rel=\"noopener noreferrer\" onClick={(e) => { e.stopPropagation(); window.open('https://github.com/fareeha-s', '_blank'); }} style={{ cursor: 'pointer' }} className=\"github-link inline-block relative group\">\n              <img \n                src=\"./icons/hosts/fareeha.jpg\" \n                alt=\"Fareeha\" \n                className=\"rounded-full w-12 h-12 object-cover border border-white/20\" \n                style={{ \n                  zIndex: 10002,\n                  boxShadow: '0 1px 2px rgba(0,0,0,0.15), 0 0 1px rgba(255,255,255,0.2) inset',\n                  backgroundImage: 'linear-gradient(180deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 100%)',\n                  transform: 'translateZ(0)',\n                  transition: 'transform 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94), border-color 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)' \n                }}\n                onTouchStart={(e) => {\n                  e.currentTarget.style.transform = 'scale(0.97) translateZ(0)';\n                  e.currentTarget.style.boxShadow = '0 0px 1px rgba(0,0,0,0.1), 0 0 1px rgba(255,255,255,0.1) inset';\n                  e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.5)';\n                }}\n                onTouchEnd={(e) => {\n                  e.currentTarget.style.transform = 'translateZ(0)';\n                  e.currentTarget.style.boxShadow = '0 1px 2px rgba(0,0,0,0.15), 0 0 1px rgba(255,255,255,0.2) inset';\n                  e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.2)';\n                }}\n                onMouseOver={(e) => {\n                  e.currentTarget.style.transform = 'scale(1.05) translateZ(0)';\n                  e.currentTarget.style.boxShadow = '0 2px 4px rgba(0,0,0,0.2), 0 0 1px rgba(255,255,255,0.3) inset';\n                  e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.4)';\n                }}\n                onMouseOut={(e) => {\n                  e.currentTarget.style.transform = 'translateZ(0)';\n                  e.currentTarget.style.boxShadow = '0 1px 2px rgba(0,0,0,0.15), 0 0 1px rgba(255,255,255,0.2) inset';\n                  e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.2)';\n                }}\n              />\n              <svg \n                width=\"12\" \n                height=\"12\" \n                viewBox=\"0 0 24 24\" \n                fill=\"none\" \n                xmlns=\"http://www.w3.org/2000/svg\" \n                style={{\n                  stroke: 'white', \n                  strokeWidth: 2.5, \n                  position: 'absolute',\n                  top: '-2px',\n                  right: '-2px',\n                  zIndex: 99999,\n                  pointerEvents: 'none' // Allow clicks to pass through to the <a> tag\n                }}\n              >\n                  <path d=\"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6M15 3h6v6M10 14L21 3\" />\n                </svg>\n            </a>\n          </span>\n        </motion.h2>\n\n        <motion.div\n          className=\"relative w-full max-w-4xl mx-auto bg-white/8 border border-white/20 rounded-2xl shadow-lg p-6 sm:p-8 md:p-12 overflow-y-auto max-h-[85vh] z-10\"\n          initial={{ y: 20, opacity: 0 }}\n          animate={{ y: 0, opacity: 1 }}\n          transition={{ delay: 0.2, duration: 0.5 }}\n          style={{\n            backdropFilter: 'blur(8px)',\n            WebkitBackdropFilter: 'blur(8px)',\n            boxShadow: '0 8px 32px 0 rgba(0, 0, 0, 0.37), inset 0 1px 0 0 rgba(255, 255, 255, 0.15)',\n            background: 'linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)'\n          }}\n        >\n          <div\n            className=\"text-base sm:text-lg leading-relaxed text-white/90 prose prose-invert max-w-none lora-note-content font-medium\"\n            style={{ whiteSpace: 'pre-line', fontSize: 'clamp(0.95rem, 2vw, 1.15rem)' }}\n          >\n            {/* Render content before list */}\n            <div dangerouslySetInnerHTML={{ __html: contentBeforeLoveList }} />\n\n            {/* Render content after list (now empty) */}\n            {contentAfterLoveList && (\n                 <div\n                    style={{ marginTop: '1.5em' }}\n                    dangerouslySetInnerHTML={{ __html: contentAfterLoveList }}\n                />\n            )}\n          </div>\n        </motion.div>\n\n        {/* 'Fold this screen' text moved outside and below the main content container */}\n        <motion.div \n          style={{ marginTop: 'clamp(1em, 2vh, 1.5em)' }}\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 3, duration: 1 }}\n        >\n          <span\n            onClick={onClose}\n            style={{ \n              opacity: 0.7, \n              fontWeight: 'normal', \n              fontSize: 'clamp(0.8em, 1.5vw, 0.9em)',\n              cursor: 'pointer',\n              transition: 'opacity 0.2s ease, transform 0.2s ease'\n            }}\n            className=\"flex items-center justify-center hover:opacity-70 active:opacity-90\"\n            onMouseOver={(e) => {\n              e.currentTarget.style.opacity = '0.7';\n              e.currentTarget.style.transform = 'scale(1.02)';\n            }}\n            onMouseOut={(e) => {\n              e.currentTarget.style.opacity = '0.5';\n              e.currentTarget.style.transform = 'scale(1)';\n            }}\n          >\n            Click here to turn this site into an app.\n          </span>\n        </motion.div>\n      </div>\n\n      {/* Video player overlay */}\n      <AnimatePresence>\n        {videoUrl && (\n          <VideoPlayerOverlay \n            videoUrl={videoUrl} \n            onClose={closeVideoPlayer} \n          />\n        )}\n      </AnimatePresence>\n    </motion.div>\n  );\n};\n\n// Add type declaration for global window properties\ndeclare global {\n  interface Window {\n    desktopHandleVideoLink?: (url: string) => void;\n  }\n}\n\nexport default DesktopOverlay; ","import { useState, useRef, useEffect, useMemo } from 'react';\nimport { AnimatePresence, motion, useReducedMotion } from 'framer-motion';\nimport { AppIcon } from './components/AppIcon';\nimport { NotesScreen } from './screens/NotesScreen';\nimport { SocialsScreen } from './screens/SocialsScreen';\nimport { EventScreen } from './screens/EventScreen';\nimport type { AppIcon as AppIconType } from './types';\nimport { ChevronLeft, StickyNote } from 'lucide-react';\n// Removed unused imports\n\n// Import shared notes data\nimport { notes } from './data/notes';\n// Import shared events data\nimport { events } from './data/events';\n// Import the NoteItem type\nimport { NoteItem } from './data/notes';\n// Import the DesktopOverlay component\nimport DesktopOverlay from './components/DesktopOverlay';\n// Import the AppBackground component\nimport AppBackground from './components/AppBackground';\n\n// Global tactile effect function for better performance\nexport const createTactileEffect = () => {\n  if (typeof window !== 'undefined') {\n    // Check if an effect is already in progress\n    // if (document.querySelector('.tactile-effect')) return; // Keep check commented out for now\n    \n    // Attempt haptic feedback first (if supported)\n    if (window.navigator && window.navigator.vibrate) {\n      window.navigator.vibrate(1); // Lightest vibration\n    }\n\n    /* Temporarily disable visual feedback:\n    requestAnimationFrame(() => {\n      const element = document.createElement('div');\n      element.className = 'fixed inset-0 bg-white/5 pointer-events-none z-50 tactile-effect';\n      element.style.willChange = 'opacity';\n      document.body.appendChild(element);\n      \n      // Use requestAnimationFrame for smoother animation\n      requestAnimationFrame(() => {\n        setTimeout(() => {\n          // Fade out smoothly\n          element.style.transition = 'opacity 60ms ease';\n          element.style.opacity = '0';\n          \n          setTimeout(() => {\n            if (document.body.contains(element)) {\n              document.body.removeChild(element);\n            }\n          }, 60);\n        }, 20);\n      });\n    });\n    */\n  }\n};\n\n// Haptic feedback function specifically for widget swiping\nexport const createSwipeHapticFeedback = (intensity: 'light' | 'medium' | 'heavy' = 'light') => {\n  if (typeof window !== 'undefined') {\n    // Attempt to use native haptic feedback if available\n    if (window.navigator && window.navigator.vibrate) {\n      switch (intensity) {\n        case 'light':\n          window.navigator.vibrate(2);\n          break;\n        case 'medium':\n          window.navigator.vibrate(5);\n          break;\n        case 'heavy':\n          window.navigator.vibrate(8);\n          break;\n      }\n    }\n    \n    // Also create a visual feedback (more subtle than tactile effect)\n    requestAnimationFrame(() => {\n      const element = document.createElement('div');\n      element.className = 'fixed inset-0 bg-white/3 pointer-events-none z-50 swipe-effect';\n      element.style.willChange = 'opacity';\n      document.body.appendChild(element);\n      \n      requestAnimationFrame(() => {\n        setTimeout(() => {\n          element.style.transition = 'opacity 40ms ease';\n          element.style.opacity = '0';\n          \n          setTimeout(() => {\n            if (document.body.contains(element)) {\n              document.body.removeChild(element);\n            }\n          }, 40);\n        }, 10);\n      });\n    });\n  }\n};\n\n// Animation coordinates for Apple-like expansion\ninterface AnimationPosition {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\n// Define a proper type for Spotify tracks\ntype SpotifyTrack = {\n  track: {\n    name: string;\n    artists: Array<{ name: string }>;\n    album?: {\n      name: string;\n      images?: Array<{ url: string }>;\n    };\n    duration_ms: number;\n    external_urls?: {\n      spotify: string;\n    };\n  };\n  played_at: string;\n};\n\n// Define types for our various widgets\ninterface WidgetData {\n  type: 'notes' | 'partiful' | 'workout';\n  title: string;\n  subtitle: string;\n  timestamp: string;\n  timestampLabel: string;\n  progress: number;\n  iconBgColor: string;\n  eventId?: number;\n  attendees?: number;\n  noteId?: number; // Add noteId here\n}\n\n// Simplified tactile effect for widget swipes\nconst createWidgetSwipeFeedback = () => {\n  if (typeof window !== 'undefined' && window.navigator && window.navigator.vibrate) {\n    window.navigator.vibrate(3); // Subtle vibration feedback\n  }\n};\n\n// Format date to relative terms with three-letter day abbreviations\nconst getRelativeDate = (dateStr: string) => {\n  // Add check for empty date string\n  if (!dateStr) {\n    return ''; // Return empty string if date is missing\n  }\n\n  // Get current date\n  const now = new Date();\n  const today = `${String(now.getDate()).padStart(2, '0')}/${String(now.getMonth() + 1).padStart(2, '0')}/${String(now.getFullYear()).slice(-2)}`;\n  \n  // Get yesterday's date\n  const yesterdayDate = new Date(now);\n  yesterdayDate.setDate(now.getDate() - 1);\n  const yesterday = `${String(yesterdayDate.getDate()).padStart(2, '0')}/${String(yesterdayDate.getMonth() + 1).padStart(2, '0')}/${String(yesterdayDate.getFullYear()).slice(-2)}`;\n  \n  // Parse the provided date to get the day of week\n  const [day, month, year] = dateStr.split('/').map(Number);\n  const dateObj = new Date(2000 + year, month - 1, day);\n  \n  // Get day of week with 3-letter abbreviation\n  const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n  const dayOfWeek = daysOfWeek[dateObj.getDay()];\n  \n  // Special cases for today and yesterday\n  if (dateStr === today) return 'Today';\n  if (dateStr === yesterday) return 'Yesterday';\n  \n  // For all other dates, simply return the 3-letter day\n  return dayOfWeek;\n};\n\nfunction App() {\n  // Determine initial state based on window properties\n  const shouldOpenNoteInitially = typeof window !== 'undefined' && !!window.initialNoteId;\n  \n  // State for desktop overlay\n  const [isDesktop, setIsDesktop] = useState(false);\n  const [showDesktopOverlay, setShowDesktopOverlay] = useState(true); // New state for controlling overlay visibility\n\n  // Set 'notes' as the default active app and set up to open hello world note\n  const [activeApp, setActiveApp] = useState<string | null>('notes');\n  const [isOpen, setIsOpen] = useState(false);\n  const [selectedScreen, setSelectedScreen] = useState<string | null>(null);\n  const [selectedNoteId, setSelectedNoteId] = useState<string | null>(null);\n  const appsRef = useRef<Map<string, HTMLDivElement>>(new Map());\n  const [contentReady, setContentReady] = useState(false);\n  \n  const mainContainerRef = useRef<HTMLDivElement>(null);\n  const prefersReducedMotion = useReducedMotion();\n  const [appPosition, setAppPosition] = useState<AnimationPosition | null>(null);\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [currentAppElement, setCurrentAppElement] = useState<HTMLElement | null>(null);\n  const [windowHeight, setWindowHeight] = useState('100vh');\n  const [, setIsAppleDevice] = useState(false);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isHighPerformanceDevice, setIsHighPerformanceDevice] = useState(false);\n  const [isNoteDetailView, setIsNoteDetailView] = useState(false);\n  const [isEventDetailView, setIsEventDetailView] = useState(false); // Add state for event detail view\n  const [initialEventIdForScreen, setInitialEventIdForScreen] = useState<number | null>(null); // State for event ID\n  const [initialNoteIdForScreen, setInitialNoteIdForScreen] = useState<number | null>(null); // State for direct note ID\n  const [widgetNote, setWidgetNote] = useState(notes[0]); // State for direct note ID\n  \n  // Add useEffect for desktop detection\n  useEffect(() => {\n    const checkDesktop = () => {\n      // Prefer capability-based detection (desktop-like input), with a width fallback.\n      // This avoids false negatives when the browser window is narrower than an arbitrary breakpoint.\n      const hasHoverFinePointer =\n        typeof window !== 'undefined' &&\n        typeof window.matchMedia === 'function' &&\n        window.matchMedia('(hover: hover) and (pointer: fine)').matches;\n\n      const isWideEnough = window.innerWidth >= 900;\n\n      // Treat as desktop if you have desktop input (mouse/trackpad), regardless of width.\n      // This ensures the overlay always shows on laptops, even when window is narrow.\n      setIsDesktop(hasHoverFinePointer);\n    };\n\n    checkDesktop(); // Initial check\n    window.addEventListener('resize', checkDesktop); // Check on resize\n\n    // Cleanup listener on component unmount\n    return () => window.removeEventListener('resize', checkDesktop);\n  }, []);\n\n  // Add an effect to preload all content and prevent flashes\n  useEffect(() => {\n    // Use Promise.all to track both image and font loading\n    const fontReady = document.fonts.ready;\n    \n    // Function to preload the background image\n    const preloadImage = (src: string) => {\n      return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.src = src;\n        img.onload = resolve;\n        img.onerror = reject;\n      });\n    };\n    \n    // Wait for both fonts and background image to load\n    Promise.all([\n      fontReady,\n      preloadImage('/images/background.webp')\n    ])\n    .then(() => {\n      // Once everything is loaded, mark content as ready\n      setTimeout(() => {\n        setIsLoaded(true);\n        document.body.classList.add('content-loaded');\n      }, 50); // Small delay to ensure styles apply\n    })\n    .catch((err) => {\n      console.error('Resource loading error:', err);\n      // Even if there's an error, still show content after a delay\n      setTimeout(() => {\n        setIsLoaded(true);\n        document.body.classList.add('content-loaded');\n      }, 100);\n    });\n    \n    // Clean up not necessary for this effect\n  }, []);\n  \n  const [recentTracks] = useState<SpotifyTrack[]>([]);\n  const [currentWidgetIndex, setCurrentWidgetIndex] = useState(0);\n  const [isFirstVisit, setIsFirstVisit] = useState(true);\n  const [isWidgetHovered, setIsWidgetHovered] = useState(false);\n  const [swipeStartX, setSwipeStartX] = useState<number | null>(null);\n  const [swipeDirection, setSwipeDirection] = useState<'left' | 'right' | null>(null);\n  const [isSwiping, setIsSwiping] = useState(false);\n  \n  // Handle widget navigation (prev/next)\n  const handleWidgetNavigation = (direction: 'prev' | 'next') => {\n    // Create tactile feedback for better UX\n    if (typeof window !== 'undefined' && window.navigator && window.navigator.vibrate) {\n      window.navigator.vibrate(3); // Subtle vibration\n    }\n    \n    // Update the widget index based on direction\n    setCurrentWidgetIndex(prevIndex => {\n      if (direction === 'prev') {\n        // Go to previous widget, loop to end if at beginning\n        return prevIndex === 0 ? widgets.length - 1 : prevIndex - 1;\n      } else {\n        // Go to next widget, loop to beginning if at end\n        return prevIndex === widgets.length - 1 ? 0 : prevIndex + 1;\n      }\n    });\n  };\n  \n  const widgetRef = useRef<HTMLDivElement>(null);\n  const [hasShownFirstDisplay, setHasShownFirstDisplay] = useState(false);\n  const [lastManualNavigation, setLastManualNavigation] = useState<number | null>(null);\n  // Add state to detect if user is on a mobile device\n  const [isMobileDevice, setIsMobileDevice] = useState(false);\n  // Track if home has been seen in this session\n  const [hasSeenHomeSession, setHasSeenHomeSession] = useState(false);\n  const [arrowDismissed, setArrowDismissed] = useState(false);\n  \n  // Detect if user is on a mobile device\n  useEffect(() => {\n    const checkIfMobile = () => {\n      const userAgent = navigator.userAgent || navigator.vendor;\n      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);\n      setIsMobileDevice(isMobile);\n    };\n    \n    checkIfMobile();\n    \n    // Also check on resize in case of device orientation changes\n    window.addEventListener('resize', checkIfMobile);\n    return () => window.removeEventListener('resize', checkIfMobile);\n  }, []);\n  \n  // Show \"shipped by\" UI the first time user lands on the home page\n  useEffect(() => {\n    if (activeApp === null && !hasSeenHomeSession) {\n      setHasSeenHomeSession(true);\n      setHasShownFirstDisplay(false);\n      // Hide after 3s\n      const timer = setTimeout(() => setHasShownFirstDisplay(true), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [activeApp, hasSeenHomeSession]);\n  \n  // Dismiss arrow badge once user leaves home (after first home visit)\n  useEffect(() => {\n    if (hasSeenHomeSession && activeApp !== null && !arrowDismissed) {\n      setArrowDismissed(true);\n    }\n  }, [activeApp, hasSeenHomeSession, arrowDismissed]);\n  \n  // Open hello world note on page load (only on mobile, never on desktop)\n  useEffect(() => {\n    // Skip auto-opening on desktop entirely\n    if (isDesktop) {\n      return;\n    }\n    \n    // Always open the hello world note on mobile page load\n    setTimeout(() => {\n      // Set up the necessary window properties for the notes app\n      window.initialNoteId = 1; // ID of the hello world note\n      window.openNoteDirectly = true; // Signal to open this note directly in detail view\n      (window as any).widgetNoteId = 1;\n      (window as any).isFirstTimeOpeningApp = true;\n      \n      // Set the state that will be passed as a prop to NotesScreen\n      setInitialNoteIdForScreen(1);\n      // Trigger the app click to open notes\n      handleAppClick('notes');\n\n      // Set isFirstVisit to true only during this initial setup\n      setIsFirstVisit(true);\n      // Immediately plan to set it to false after this initial setup completes\n      // Use another timeout to ensure it happens after the initial actions\n      setTimeout(() => {\n        setIsFirstVisit(false);\n      }, 0); \n\n    }, 10); // Minimal timeout to ensure component is ready\n  }, [isDesktop, showDesktopOverlay]);\n  \n  // Select a random unlocked note for the widget display\n  const selectedNote = useMemo(() => {\n    // Filter out locked notes to ensure we never select a locked note\n    const unlockNotes = notes.filter(note => !note.locked);\n    \n    // For first-time visitors, show the hello world note\n    if (isFirstVisit) {\n      return unlockNotes.find(note => note.title.includes(\"hello world\")) || unlockNotes[0];\n    }\n    \n    // For returning visitors, show a random unlocked note\n    // Use a deterministic but seemingly random selection based on the date\n    // This ensures the note changes periodically but stays consistent within a day\n    const today = new Date();\n    const dateKey = today.getFullYear() * 10000 + (today.getMonth() + 1) * 100 + today.getDate();\n    const noteIndex = dateKey % unlockNotes.length;\n    \n    return unlockNotes[noteIndex];\n  }, [isFirstVisit]);\n  \n  // Select events based on visit history\n  // Removed useMemo for selectedEvent to allow refresh on home navigation\n  // const selectedEvent = useMemo(() => { ... }, [isFirstVisit]);\n\n  // Function to select a random note for the widget\n  const selectRandomNote = () => {\n    // Filter out locked notes\n    const availableNotes = notes.filter(note => !note.locked);\n    if (availableNotes.length === 0) return selectedNote;\n    \n    // Select a random note from available notes\n    const randomIndex = Math.floor(Math.random() * availableNotes.length);\n    return availableNotes[randomIndex];\n  };\n\n  // Update the widget note periodically\n  useEffect(() => {\n    // Select a random note initially\n    setWidgetNote(selectRandomNote());\n    \n    // Update the random note every 30 seconds\n    const interval = setInterval(() => {\n      setWidgetNote(selectRandomNote());\n    }, 30000); // 30 seconds\n    \n    return () => clearInterval(interval);\n  }, []);\n  \n  // Update the selectedNote/Event based on the currentWidgetIndex\n  useEffect(() => {\n    // No action needed here, we're now using the widget array directly\n  }, [currentWidgetIndex]); // Use a variable for clarity\n\n  // Add state for the event displayed in the widget\n  const [widgetEvent, setWidgetEvent] = useState(events[0]); // Initialize with default\n\n  // Function to select the event for the widget based on visit history\n  const selectEventForWidget = () => {\n    // Sort all events by date (most recent first)\n    const sortedEvents = [...events].sort((a, b) => {\n      // Parse dates (assuming DD/MM/YY format)\n      const [dayA, monthA, yearA] = a.date.split('/').map(Number);\n      const [dayB, monthB, yearB] = b.date.split('/').map(Number);\n      \n      // Compare dates (most recent first)\n      if (yearB !== yearA) return yearB - yearA;\n      if (monthB !== monthA) return monthB - monthA;\n      return dayB - dayA;\n    });\n    \n    // Take only the 6 most recent events\n    const recentEvents = sortedEvents.slice(0, 6);\n    \n    if (isFirstVisit) {\n      // For first visit - show the most recent upcoming event\n      const upcomingEvents = recentEvents.filter(event => event.timeframe === 'upcoming');\n      return upcomingEvents[0] || recentEvents[0];\n    } else {\n      // For subsequent visits - show random events from the 6 most recent\n      const randomIndex = Math.floor(Math.random() * recentEvents.length);\n      return recentEvents[randomIndex];\n    }\n  };\n\n  // Set initial widget event on mount\n  useEffect(() => {\n    setWidgetEvent(selectEventForWidget());\n  }, []); // Run once on mount\n\n  // Update widget event when returning to home screen\n  const prevActiveAppRef = useRef<string | null>();\n  useEffect(() => {\n    // Check if app was just closed (previous state wasn't null, current is null)\n    if (prevActiveAppRef.current !== null && activeApp === null) {\n      // Re-select event when returning home\n      setWidgetEvent(selectEventForWidget());\n      // Re-select note when returning home\n      setWidgetNote(selectRandomNote());\n    }\n    // Update the ref *after* the check\n    prevActiveAppRef.current = activeApp;\n  }, [activeApp, isFirstVisit]); // isFirstVisit needed as selectEventForWidget depends on it\n\n  // Use real notes data for the widgets\n  const widgets: WidgetData[] = [\n    {\n      type: 'workout',\n      title: 'barry\\'s - lift x run',\n      subtitle: '',\n      timestamp: (() => {\n        // Calculate date from two days ago\n        const twoDaysAgo = new Date();\n        twoDaysAgo.setDate(twoDaysAgo.getDate() - 2);\n        // Format as DD/MM/YY to match getRelativeDate's expected format\n        const day = String(twoDaysAgo.getDate()).padStart(2, '0');\n        const month = String(twoDaysAgo.getMonth() + 1).padStart(2, '0');\n        const year = String(twoDaysAgo.getFullYear()).slice(-2);\n        const formattedDate = `${day}/${month}/${year}`;\n        return getRelativeDate(formattedDate);\n      })(),\n      timestampLabel: 'kineship',\n      progress: 80,\n      iconBgColor: 'bg-[#62BE9C]/20'\n    },\n    {\n      type: 'notes',\n      title: widgetNote.title,\n      subtitle: '', // Keep subtitle empty for cleaner look\n      timestamp: getRelativeDate(widgetNote.date),\n      timestampLabel: 'notes',\n      progress: 65,\n      iconBgColor: 'bg-[#FF8A5B]/20',\n      noteId: widgetNote.id // Use the randomly selected note's ID\n    },\n    {\n      type: 'partiful',\n      title: widgetEvent.title, // Use widgetEvent state\n      subtitle: '', // Keep subtitle empty or define as needed\n      timestamp: getRelativeDate(widgetEvent.date), // Use widgetEvent state\n      timestampLabel: (() => {\n        try {\n          const [day, month, year] = widgetEvent.date.split('/').map(Number); // Use widgetEvent state\n          // Assuming YY format, adjust for the correct century (e.g., 20xx)\n          const eventDate = new Date(2000 + year, month - 1, day);\n          \n          const today = new Date();\n          today.setHours(0, 0, 0, 0); // Set to start of today\n\n          return eventDate >= today ? 'upcoming' : 'recent';\n        } catch (e) {\n          console.error(\"Error parsing event date:\", widgetEvent.date, e); // Use widgetEvent state\n          return 'Event'; // Fallback label\n        }\n      })(), // Calculate based on date comparison\n      progress: 0, // Set progress if applicable, otherwise 0\n      iconBgColor: 'bg-[#FF4081]/20', // Partiful color\n      eventId: widgetEvent.id, // Use widgetEvent state\n      attendees: widgetEvent.attendees // Use widgetEvent state\n    }\n  ];\n  \n  // Update progress when tracks change\n  useEffect(() => {\n    if (recentTracks.length > 0) {\n      // Unused variable removed\n      // const newProgress = Math.floor(Math.random() * 80) + 10;\n      // setProgressPercent(newProgress);\n    }\n  }, [recentTracks]);\n  \n  // Rotate widgets every 8 seconds (longer to give more time to read)\n  useEffect(() => {\n    if (!prefersReducedMotion && !isWidgetHovered && !isSwiping) {\n      // Use 1 second for the first display after page load, 6 seconds for all others\n      const interval = !hasShownFirstDisplay ? 1000 : 5000;\n      \n      // Set up the interval\n      const rotationInterval = setInterval(() => {\n        // Check if we should pause rotation due to recent manual navigation\n        const now = Date.now();\n        if (lastManualNavigation && now - lastManualNavigation < 5000) {\n          return; // Skip this rotation cycle if manual navigation was recent\n        }\n        \n        setCurrentWidgetIndex((prevIndex) => {\n          const nextIndex = (prevIndex + 1) % widgets.length;\n          return nextIndex;\n        });\n        \n        // Mark that we've shown the first display\n        if (!hasShownFirstDisplay) {\n          setHasShownFirstDisplay(true);\n        }\n      }, interval);\n      \n      return () => clearInterval(rotationInterval);\n    }\n  }, [widgets.length, prefersReducedMotion, isWidgetHovered, hasShownFirstDisplay, lastManualNavigation, isSwiping]);\n  \n  // Detect device performance\n  useEffect(() => {\n    // Check if the device has been classified as high-performance by the script in index.html\n    const isHighPerf = document.documentElement.classList.contains('high-performance-device');\n    setIsHighPerformanceDevice(isHighPerf);\n    \n    // Also check for iPads and other larger screen tablets which typically have better performance\n    const userAgent = navigator.userAgent.toLowerCase();\n    const isTablet = /ipad/.test(userAgent) || \n                    (window.innerWidth >= 768 && /android/.test(userAgent)) ||\n                    (/macintosh/.test(userAgent) && navigator.maxTouchPoints > 1);\n    \n    if (isTablet) {\n      setIsHighPerformanceDevice(true);\n    }\n  }, []);\n  \n  // Set body to prevent scrolling and get actual window height\n  useEffect(() => {\n    // Prevent scrolling on the body\n    document.body.style.overflow = 'hidden';\n    document.documentElement.style.overflow = 'hidden';\n    \n    // Set the actual window height for mobile browsers where 100vh can be inconsistent\n    const setHeight = () => {\n      const vh = window.innerHeight;\n      setWindowHeight(`${vh}px`);\n      document.documentElement.style.setProperty('--app-height', `${vh}px`);\n      \n      // Add additional handling for mobile devices to ensure full height\n      document.body.style.height = `${vh}px`;\n      document.documentElement.style.height = `${vh}px`;\n    };\n    \n    // Set initial height\n    setHeight();\n    \n    // Detect Apple devices\n    const userAgent = navigator.userAgent.toLowerCase();\n    const isApple = /iphone|ipad|ipod|macintosh/.test(userAgent);\n    setIsAppleDevice(isApple);\n    \n    // Update on resize\n    window.addEventListener('resize', setHeight);\n    window.addEventListener('orientationchange', setHeight);\n    \n    // Additional event for mobile browsers\n    window.addEventListener('touchmove', () => setHeight(), { passive: true });\n    \n    // Optimize loading sequence - apply immediate background color\n    // Set background color immediately to prevent flash\n    document.documentElement.style.backgroundColor = '#131518';\n    document.body.style.backgroundColor = '#131518';\n    \n    // Set loaded state immediately to prevent white flash\n    setIsLoaded(true);\n    \n    // Use a very short timeout to ensure the dark background is applied before any rendering\n    const initialTimer = setTimeout(() => {\n      // Force recompute height to ensure proper display\n      setHeight();\n    }, 10); // Very short delay\n    \n    return () => {\n      window.removeEventListener('resize', setHeight);\n      window.removeEventListener('orientationchange', setHeight);\n      window.removeEventListener('touchmove', () => setHeight());\n      document.body.style.overflow = '';\n      document.documentElement.style.overflow = '';\n      clearTimeout(initialTimer);\n    };\n  }, []);\n  \n  // Create a mapping from app IDs to handleAppClick (for use with inline links)\n  useEffect(() => {\n    // Make handleAppClick available to the window object for links in notes\n    window.handleAppClick = (appId: string) => {\n      console.log('App link clicked:', appId);\n      // Special case: if appId is 'home', go to home screen\n      if (appId === 'home') {\n        setActiveApp(null);\n        return;\n      }\n      handleAppClick(appId);\n    };\n    \n    return () => {\n      // Clean up\n      delete (window as any).handleAppClick;\n    };\n  }, []);  // Empty dependency array ensures this only runs once\n  \n  // For icon masking/cloning during animation\n  const [clonedAppIcon, setClonedAppIcon] = useState<{\n    app: AppIconType | null;\n    rect: DOMRect | null;\n  }>({\n    app: null,\n    rect: null\n  });\n\n  const apps: AppIconType[] = [\n    { id: 'notes', name: 'notes', icon: 'StickyNote', color: '', component: NotesScreen },\n    { id: 'socials', name: 'socials', icon: 'AtSign', color: '', component: SocialsScreen },\n    { id: 'partiful', name: 'partiful', icon: 'Partiful', color: '', component: EventScreen },\n  ];\n\n  // Function to handle opening a specific note with enhanced transitions\n  const handleOpenNote = (noteId: string) => {\n    // Clear any existing transition artifacts first\n    const overlays = document.querySelectorAll('.tactile-effect, .swipe-effect');\n    overlays.forEach(overlay => {\n      if (document.body.contains(overlay)) {\n        document.body.removeChild(overlay);\n      }\n    });\n    \n    // Ensure we're starting fresh\n    document.body.classList.remove('backdrop-blur');\n    \n    setSelectedNoteId(noteId);\n    setSelectedScreen('notes');\n    setIsOpen(true);\n    \n    // Set this to track that the note was opened from the widget\n    // Used to determine whether to show the pulsing dots\n    localStorage.setItem('widgetNoteId', noteId);\n  };\n\n  // Handle app closing with proper animation - enhanced for elegant roll-up\n  const handleClose = () => {\n    console.log(`handleClose called. isAnimating: ${isAnimating}`); // DEBUG\n    if (isAnimating) return;\n\n    // Set detail view state to false first for potentially needed state coordination\n    if (activeApp === 'notes' && isNoteDetailView) {\n      setIsNoteDetailView(false);\n    }\n    if (activeApp === 'partiful' && isEventDetailView) {\n      setIsEventDetailView(false);\n    }\n    \n    // Clean up any UI artifacts that might be causing the grey screen\n    try {\n      // Remove any overlay elements\n      const overlays = document.querySelectorAll('.tactile-effect, .swipe-effect');\n      overlays.forEach(overlay => {\n        if (document.body.contains(overlay)) {\n          document.body.removeChild(overlay);\n        }\n      });\n      \n      // Ensure smooth scrolling to top before closing\n      const contentElements = document.querySelectorAll('.overflow-y-auto');\n      contentElements.forEach(el => {\n        if (el instanceof HTMLElement && el.scrollTop > 0) {\n          el.scrollTo({ top: 0, behavior: 'smooth' });\n        }\n      });\n      \n      // If we're in a note detail view, first transition back to square shape\n      if ((activeApp === 'notes' && window.isViewingNoteDetail) || \n          (activeApp === 'partiful' && window.isViewingEventDetail)) {\n        // First update the window flag to trigger shape animation\n        if (activeApp === 'notes') {\n          window.isViewingNoteDetail = false;\n        } else if (activeApp === 'partiful') {\n          window.isViewingEventDetail = false;\n        }\n        \n        // Give the shape animation time to complete before closing\n        setTimeout(() => {\n          setIsOpen(false);\n          setTimeout(() => {\n            setSelectedScreen(null);\n            setSelectedNoteId(null);\n          }, 400); // Increased timeout for smoother transition\n        }, 250); // Wait for shape transition to complete\n      } else {\n        // Standard closing animation if not in detail view\n        setIsOpen(false);\n        setTimeout(() => {\n          setSelectedScreen(null);\n          setSelectedNoteId(null);\n        }, 400); // Increased timeout for smoother transition\n      }\n    } catch (e) {\n      console.error('Error cleaning up UI:', e);\n    }\n    \n    // Check if there's a specific screen back handler active\n    // This allows screens like NotesScreen or EventScreen to handle internal navigation\n    if (activeApp === 'notes' && window.noteScreenBackHandler && window.noteScreenBackHandler()) {\n      // If the screen handler returns true, it handled the back action\n      return; \n    }\n    else if (activeApp === 'partiful' && window.eventScreenBackHandler && window.eventScreenBackHandler()) {\n      // If the EventScreen handler returns true, it handled the back action (e.g., hiding Partiful detail)\n      return; \n    }\n    setIsAnimating(true);\n    \n    // Start closing animation with enhanced buttery-smooth transitions\n    setTimeout(() => {\n      setActiveApp(null);\n      setAppPosition(null);\n      setClonedAppIcon({\n        app: null,\n        rect: null\n      });\n      setInitialEventIdForScreen(null); // Reset event ID state on close\n      setInitialNoteIdForScreen(null); // Reset note ID state on close\n      \n      // Reset animation state after animation completes with longer duration for smoother feel\n      setTimeout(() => {\n        setIsAnimating(false);\n      }, 350); // Increased for smoother transition\n    }, 10); // Reduced delay from 60ms to 10ms\n  };\n\n  // True Apple-style app opening animation\n  const handleAppClick = (appId: string) => {\n    if (isAnimating) return;\n    \n    const appElement = appsRef.current.get(appId);\n    const containerElement = mainContainerRef.current;\n    \n    if (!appElement || !containerElement) return;\n    \n    setIsAnimating(true);\n    \n    // Get app's absolute position\n    const appRect = appElement.getBoundingClientRect();\n    const containerRect = containerElement.getBoundingClientRect();\n    \n    // Find the selected app\n    const selectedApp = apps.find(app => app.id === appId) || null;\n    \n    // Store the app's position relative to the container\n    setAppPosition({\n      x: appRect.left - containerRect.left + (appRect.width / 2),\n      y: appRect.top - containerRect.top + (appRect.height / 2),\n      width: appRect.width,\n      height: appRect.height\n    });\n    \n    // Store a clone of the app icon for animation\n    setClonedAppIcon({\n      app: selectedApp,\n      rect: appRect\n    });\n    \n    // Set the current app element for scale calculations\n    setCurrentAppElement(appElement);\n    \n    // Small delay to ensure animation settings are in place\n    setTimeout(() => {\n      setActiveApp(appId);\n    }, 10);\n    \n    // Reset animation flag after animation completes\n    setTimeout(() => {\n      setIsAnimating(false);\n    }, 400);\n  };\n\n  // Define handleNavigate matching the type signature expected by AppScreenProps\n  const handleNavigate = (target: string, options?: { noteId?: number; eventId?: number }) => {\n    console.log(`Navigating to ${target} with options:`, options);\n    // Set the target screen as active\n    setActiveApp(target);\n    // Potentially handle options like setting initialNoteId/initialEventId state here if needed\n    if (options?.noteId) {\n      // Convert number to string if selectedNoteId expects a string\n      setSelectedNoteId(String(options.noteId)); \n    }\n    // TODO: Add state for selectedEventId if needed and handle options.eventId\n  };\n\n  const ActiveComponent = activeApp ? apps.find(app => app.id === activeApp)?.component : null;\n  \n  // Get the display name for the active app, with a special case for partiful to show as parti-folio\n  const activeAppName = activeApp ? \n    (activeApp === 'partiful' ? 'partifolio ðŸŽ‰' : \n     activeApp === 'notes' ? 'notes ðŸ–‡ï¸' :\n     activeApp === 'socials' ? 'socials âœ¨' :\n     apps.find(app => app.id === activeApp)?.name) \n    : null;\n  \n  // Enhanced iOS app opening animation timing for buttery-smooth transitions\n  const appOpeningTransition = {\n    type: \"spring\",\n    stiffness: 300, // Slightly reduced for smoother motion\n    damping: 30,   // Slightly reduced for more natural bounce\n    mass: 1.0,     // Reduced mass for lighter feel\n    duration: 0.4  // Slightly longer for more luxurious feel\n  };\n\n  // Handle navigation between apps\n  const handleNextWidget = () => {\n    setCurrentWidgetIndex((prevIndex) => {\n      return (prevIndex + 1) % widgets.length;\n    });\n    createWidgetSwipeFeedback();\n  };\n\n  const viewportHeightPx =\n    typeof windowHeight === 'string' && windowHeight.endsWith('px')\n      ? parseInt(windowHeight, 10)\n      : typeof window !== 'undefined'\n        ? window.innerHeight\n        : 0;\n\n  const mobileOpenHeightPx = Math.max(450, Math.min(viewportHeightPx - 220, 620));\n\n  const desktopFrameSizePx = 340;\n  const desktopOpenHeightPx = Math.round(desktopFrameSizePx * (4 / 3));\n  const frameSizePx = isMobileDevice ? 290 : desktopFrameSizePx;\n\n  // Framer Motion variants for the main container frame animation\n  const frameVariants = {\n    closed: { // Square state\n      width: `${frameSizePx}px`,\n      height: `${frameSizePx}px`,\n      aspectRatio: '1/1',\n      transition: { duration: 0.4, ease: [0.4, 0, 0.2, 1] }\n    },\n    open: { // Rectangle state (Note Detail)\n      width: `${frameSizePx}px`,\n      height: isMobileDevice ? `${mobileOpenHeightPx}px` : `${desktopOpenHeightPx}px`,\n      aspectRatio: '3/4',\n      transition: { duration: 0.4, ease: [0.4, 0, 0.2, 1] }\n    }\n  };\n\n  // Sync the showDesktopOverlay when isDesktop changes\n  useEffect(() => {\n    if (isDesktop) {\n      setShowDesktopOverlay(true);\n    }\n  }, [isDesktop]);\n\n  // Close desktop overlay and return to home\n  const handleCloseDesktopOverlay = () => {\n    setShowDesktopOverlay(false);\n    setActiveApp(null); // ensure we land on home, not a note\n    setInitialNoteIdForScreen(null);\n  };\n\n  // Conditional rendering based on desktop view\n  if (isDesktop && showDesktopOverlay) { // Show desktop overlay only if both conditions are true\n    return (\n      <AnimatePresence mode=\"wait\">\n        <motion.div key=\"desktop-overlay\">\n          <DesktopOverlay onClose={handleCloseDesktopOverlay} /> {/* Pass onClose prop */}\n        </motion.div>\n      </AnimatePresence>\n    );\n  }\n\n  return (\n    <div \n      className=\"relative flex items-center justify-center min-h-screen\"\n      style={{ backgroundColor: '#131518' }} \n    >\n      {/* Use the AppBackground component here */}\n      <AppBackground isLoaded={isLoaded} />\n\n      <AnimatePresence>\n        {activeApp && (\n          <motion.div\n            key=\"backdrop\"\n            className=\"absolute inset-0 bg-black/10 z-[5]\" // Position behind content (z-10) but above background (z-0)\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1, transition: { duration: 0.3 } }}\n            exit={{ opacity: 0, transition: { duration: 0.2 } }}\n            onClick={(e) => {\n              console.log('Backdrop clicked.'); // DEBUG\n              // Prevent click-through if already animating\n              if (isAnimating) {\n                e.stopPropagation();\n                return;\n              }\n              handleClose();\n            }}\n          />\n        )}\n      </AnimatePresence>\n\n      <div \n        className=\"absolute flex flex-col items-center will-change-transform z-10\"\n        ref={mainContainerRef}\n        // ADD stopPropagation to prevent clicks here closing the app\n        onClick={(e) => e.stopPropagation()}\n        style={{\n          opacity: isLoaded ? 1 : 0,\n          transform: `translateY(${isLoaded ? '0' : '10px'}) translateZ(0)`,\n          WebkitTransform: `translateY(${isLoaded ? '0' : '10px'}) translateZ(0)`,\n          transition: \"opacity 0.8s cubic-bezier(0.22, 1, 0.36, 1), transform 0.8s cubic-bezier(0.22, 1, 0.36, 1)\",\n          top: '38%', // Moved up from 45% to 38% to shift the entire site upward\n          left: '50%',\n          marginLeft: `-${Math.round(frameSizePx / 2)}px`,\n          marginTop: `-${Math.round(frameSizePx / 2 + 25)}px`,\n        }}\n      >\n        {/* App name above the container - restoring correct parent styles */}\n        <div \n          className=\"absolute top-[-30px] w-full flex justify-center items-center\"\n          style={{\n            opacity: isLoaded ? 1 : 0,\n            transform: `translateY(${isLoaded ? '0' : '-10px'})`,\n            transition: \"opacity 0.9s cubic-bezier(0.25, 0.8, 0.25, 1), transform 0.9s cubic-bezier(0.25, 0.8, 0.25, 1)\",\n            transitionDelay: \"0.1s\",\n            height: \"30px\",\n            pointerEvents: \"none\"\n          }}\n        >\n          {activeApp ? (\n            <motion.h2 \n              className=\"text-[18px] font-semibold text-right fixed\" // Keep this semi-bold\n              initial={{ opacity: 0 }}\n              animate={{ \n                opacity: 1,\n                transition: {\n                  duration: 0.9,\n                  ease: [0.25, 0.8, 0.25, 1] // Enhanced easing for buttery-smooth transitions\n                }\n              }}\n              style={{ \n                top: '10px', // Nudge up\n                right: '22px', // Nudge right\n                zIndex: 10001, // Keep increased zIndex\n                color: '#ffffff',\n                textShadow: '0px 1px 1px rgba(0, 0, 0, 0.3)' // Added subtle iOS-like text shadow\n              }}\n            >\n              <span className=\"flex items-center\">\n                {activeAppName}\n              </span>\n            </motion.h2>\n          ) : (\n            /* Home screen title with enhanced styling */\n            <motion.h2 \n              className=\"text-[18px] font-semibold text-right fixed\" // Keep this semi-bold\n              initial={{ opacity: 0 }}\n              animate={{ \n                opacity: 1,\n                transition: {\n                  duration: 0.9,\n                  ease: [0.25, 0.8, 0.25, 1] // Enhanced easing for buttery-smooth transitions\n                }\n              }}\n              style={{ \n                top: '14px', // Moved down a few pixels\n                right: '22px', // Nudge right\n                zIndex: 10001, // Keep increased zIndex\n                color: '#ffffff',\n                textShadow: '0px 1px 1px rgba(0, 0, 0, 0.3)' // Added subtle iOS-like text shadow\n              }}\n            >\n              <span className=\"flex items-center\">\n                <span\n                  className=\"mr-1.5 text-[12px] font-light italic text-white/50\"\n                  style={{ opacity: (hasSeenHomeSession && !hasShownFirstDisplay) ? 1 : 0, transition: 'opacity 2.5s linear' }}\n                >\n                  shipped by\n                </span>\n                <span>Fareeha</span>\n                {/* Profile picture - always visible */}\n                <a href=\"https://github.com/fareeha-s\" target=\"_blank\" rel=\"noopener noreferrer\" onClick={(e) => { e.stopPropagation(); window.open('https://github.com/fareeha-s', '_blank'); }} style={{ cursor: 'pointer', marginLeft: '6px' }} className=\"github-link inline-block relative group\">\n                  <img \n                    src=\"./icons/hosts/fareeha.jpg\" \n                    alt=\"Fareeha\" \n                    className=\"rounded-full w-6 h-6 object-cover border border-white/20\" \n                    style={{ \n                      zIndex: 99999,\n                      position: 'relative',\n                      boxShadow: '0 1px 2px rgba(0,0,0,0.15), 0 0 1px rgba(255,255,255,0.2) inset',\n                      backgroundImage: 'linear-gradient(180deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 100%)',\n                      transform: 'translateZ(0)',\n                      transition: 'transform 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94), border-color 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)'\n                    }}\n                    onTouchStart={(e) => {\n                      e.currentTarget.style.transform = 'scale(0.97) translateZ(0)';\n                      e.currentTarget.style.boxShadow = '0 0px 1px rgba(0,0,0,0.1), 0 0 1px rgba(255,255,255,0.1) inset';\n                      e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.5)';\n                    }}\n                    onTouchEnd={(e) => {\n                      e.currentTarget.style.transform = 'translateZ(0)';\n                      e.currentTarget.style.boxShadow = '0 1px 2px rgba(0,0,0,0.15), 0 0 1px rgba(255,255,255,0.2) inset';\n                      e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.2)';\n                    }}\n                    onMouseOver={(e) => {\n                      e.currentTarget.style.transform = 'scale(1.05) translateZ(0)';\n                      e.currentTarget.style.boxShadow = '0 2px 4px rgba(0,0,0,0.2), 0 0 1px rgba(255,255,255,0.3) inset';\n                      e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.4)';\n                    }}\n                    onMouseOut={(e) => {\n                      e.currentTarget.style.transform = 'translateZ(0)';\n                      e.currentTarget.style.boxShadow = '0 1px 2px rgba(0,0,0,0.15), 0 0 1px rgba(255,255,255,0.2) inset';\n                      e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.2)';\n                    }}\n                  />\n                  <svg \n                    width=\"10\" \n                    height=\"10\" \n                    viewBox=\"0 0 24 24\" \n                    fill=\"none\" \n                    xmlns=\"http://www.w3.org/2000/svg\" \n                    style={{\n                      stroke: 'white', \n                      strokeWidth: 2.5, \n                      position: 'absolute',\n                      top: '-1px',\n                      right: '-1px',\n                      zIndex: 10003, // Ensure it's above the image but respects parent context\n                      pointerEvents: 'none', // Allow clicks to pass through to the <a> tag\n                      opacity: hasSeenHomeSession && activeApp === null && !arrowDismissed ? 1 : 0,\n                      transition: 'opacity 1s ease-in-out', // Keep original opacity transition\n                    }}\n                  >\n                      <path d=\"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6M15 3h6v6M10 14L21 3\" />\n                    </svg>\n                </a>\n              </span>\n            </motion.h2>\n          )}\n        </div>\n        \n        {/* Main container - with glass solid effect instead of blur */}\n        <motion.div \n          className={`overflow-hidden shadow-xl relative z-20 will-change-transform glass-solid main-container border border-white/10 ${ // Added border classes\n            // Restore shine effect\n            activeApp ? 'glass-solid-shine' : ''\n          } ${isNoteDetailView || isEventDetailView ? 'portrait-container expanded' : ''}`}\n          variants={frameVariants}\n          initial=\"closed\"\n          animate={(isNoteDetailView && activeApp === 'notes') || (activeApp === 'partiful') ? 'open' : 'closed'} // Control animation state - partiful always uses open/tall frame\n          style={{\n            borderRadius: '24px',\n            backgroundColor: 'transparent', // Revert back to transparent\n          }}\n          onClick={(e) => e.stopPropagation()}\n        >\n          {/* Icon in center during expansion */}\n          <motion.div\n            className=\"absolute flex items-center justify-center\"\n            initial={{\n              width: `${frameSizePx}px`,\n              height: `${frameSizePx}px`,\n              x: '50%',\n              y: '50%',\n              opacity: 1,\n              transform: 'translate(-50%, -50%)',\n            }}\n            animate={{\n              opacity: 0,\n              scale: 0.5,\n            }}\n            transition={{ duration: 0.15, delay: 0.1 }}\n          >\n            <div className={`bg-gradient-to-br ${clonedAppIcon?.app?.color || 'from-gray-700 to-gray-900'} h-full w-full rounded-[12px] flex items-center justify-center`}>\n              {clonedAppIcon?.app?.icon === 'Partiful' ? (\n                <img src=\"./icons/apps/partiful.png\" alt=\"Partiful\" className=\"w-6 h-6\" />\n              ) : (\n                <AppIcon\n                  icon={clonedAppIcon?.app?.icon ?? ''}\n                  name=\"\"\n                  color={clonedAppIcon?.app?.color || 'from-gray-700 to-gray-900'}\n                  onClick={() => {}}\n                  showLabel={false}\n                />\n              )}\n            </div>\n          </motion.div>\n          \n          {/* Home Screen Layer - Always present */}\n          <div \n            className={`absolute inset-0 z-10 ${activeApp ? 'pointer-events-none' : ''}`}\n            style={{\n              opacity: activeApp ? 0 : 1,\n              transition: 'opacity 0.35s cubic-bezier(0.25, 0.8, 0.25, 1)',\n            }}\n          >\n            <div className=\"h-full flex flex-col pt-6 px-6 pb-6 will-change-transform\" style={{ opacity: 1.1 }}>\n              {/* App icons */}\n              <div className=\"grid grid-cols-3 gap-y-8 gap-x-6 mb-8 mt-4\">\n                {apps.map((app) => (\n                  <AppIcon\n                    key={app.id}\n                    icon={app.icon}\n                    name={app.name}\n                    color={app.color}\n                    onClick={() => !isAnimating && handleAppClick(app.id)}\n                    ref={(el) => {\n                      if (el) appsRef.current.set(app.id, el);\n                    }}\n                    className={clonedAppIcon?.app?.id === app.id && activeApp ? 'invisible' : ''}\n                  />\n                ))}\n              </div>\n              \n              {/* Empty space to push widget down */}\n              <div className=\"flex-grow\"></div>\n              \n              {/* Rotating Widget */}\n              <AnimatePresence mode=\"wait\">\n              <motion.div \n                  ref={widgetRef}\n                  key={`widget-${currentWidgetIndex}`}\n                  className={`w-full aspect-square mt-auto rounded-2xl overflow-hidden shadow-sm mb-1 will-change-transform ${isLoaded ? 'music-widget-bg-animation' : ''} ${isDesktop ? 'flex flex-col justify-center' : ''}`}\n                  style={{\n                    backgroundColor: 'rgba(255, 255, 255, 0.04)',\n                    backdropFilter: 'none',\n                    WebkitBackdropFilter: 'none',\n                    border: '1px solid rgba(255, 255, 255, 0.15)',\n                    padding: '14px',\n                    transform: 'translateZ(0)',\n                    WebkitTransform: 'translateZ(0)',\n                    boxShadow: '0 4px 12px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.08)',\n                    touchAction: 'none', \n                    cursor: 'pointer',\n                    position: 'relative',\n                    overflow: 'hidden',\n                  }}\n                  initial={{ opacity: 0, x: 20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  exit={{ opacity: 0, x: -20 }}\n                  transition={{ \n                    duration: 0.5, // Slightly longer for smoother feel\n                    ease: [0.25, 0.8, 0.25, 1] // Enhanced cubic-bezier for buttery-smooth transitions\n                  }}\n                  whileHover={{ scale: 1.02 }}\n                  whileTap={{ scale: 0.98 }}\n                  onClick={() => {\n                    if (!widgets[currentWidgetIndex]) return;\n                    \n                    const currentWidget = widgets[currentWidgetIndex]; // Use a variable for clarity\n\n                    if (currentWidget.type === 'notes') {\n                      console.log('Notes widget clicked. Data:', currentWidget);\n                      // Set the ID and then open the app\n                      if (typeof currentWidget.noteId === 'number') {\n                        setInitialNoteIdForScreen(currentWidget.noteId);\n                      }\n                      handleAppClick('notes'); // Open the Notes app screen\n                    } else if (currentWidget.type === 'partiful') {\n                      // Set the ID *before* opening the app\n                      if (typeof currentWidget.eventId === 'number') {\n                        setInitialEventIdForScreen(currentWidget.eventId);\n                      }\n                      // Now open the app (EventScreen)\n                      handleAppClick('partiful');\n                    } else if (currentWidget.type === 'workout') {\n                      // Set Kineship note ID (2) and then open the app\n                      setInitialNoteIdForScreen(2);\n                      handleAppClick('notes'); \n                    }\n                  }}\n                  onMouseEnter={() => setIsWidgetHovered(true)}\n                  onMouseLeave={(e) => {\n                    setIsWidgetHovered(false);\n                    // Also handle swipe-related cleanup\n                    setSwipeStartX(null);\n                    setSwipeDirection(null);\n                  }}\n                  // Implement a direct, simpler swipe detection system for mobile devices only\n                  onTouchStart={(e) => {\n                    if (isMobileDevice) {\n                      setSwipeStartX(e.touches[0].clientX);\n                      setIsSwiping(true);\n                      setSwipeDirection(null);\n                      // Prevent default to avoid scrolling conflicts\n                      e.preventDefault();\n                    }\n                  }}\n                  onTouchMove={(e) => {\n                    if (isMobileDevice && swipeStartX !== null) {\n                      const currentX = e.touches[0].clientX;\n                      const diff = currentX - swipeStartX;\n                      \n                      // Set direction once we have a clear movement\n                      if (Math.abs(diff) > 10) {\n                        const newDirection = diff > 0 ? 'right' : 'left';\n                        if (swipeDirection !== newDirection) {\n                          setSwipeDirection(newDirection);\n                          // Add haptic feedback when direction changes\n                          createSwipeHapticFeedback('light');\n                        }\n                      }\n                      \n                      // Prevent default to avoid scrolling conflicts\n                      e.preventDefault();\n                    }\n                  }}\n                  onTouchEnd={(e) => {\n                    if (isMobileDevice && swipeStartX !== null) {\n                      const endX = e.changedTouches[0].clientX;\n                      const diff = endX - swipeStartX;\n                      \n                      if (Math.abs(diff) > 50) { // Minimum swipe distance\n                        if (swipeDirection === 'right') {\n                          handleWidgetNavigation('prev');\n                          createSwipeHapticFeedback('medium');\n                        } else if (swipeDirection === 'left') {\n                          handleWidgetNavigation('next');\n                          createSwipeHapticFeedback('medium');\n                        }\n                        \n                        // Record the time of manual navigation for swipe\n                        setLastManualNavigation(Date.now());\n                      } else {\n                        // If it's a small swipe (more like a tap), handle as a click\n                        if (Math.abs(diff) < 10) {\n                          const currentWidget = widgets[currentWidgetIndex];\n                          \n                          if (currentWidget.type === 'notes') {\n                            console.log('Notes widget clicked. Data:', currentWidget);\n                            // Set the ID and then open the app\n                            if (typeof currentWidget.noteId === 'number') {\n                              setInitialNoteIdForScreen(currentWidget.noteId);\n                              handleAppClick('notes');\n                            }\n                          } else if (currentWidget.type === 'partiful' && currentWidget.eventId) {\n                            setInitialEventIdForScreen(currentWidget.eventId);\n                            handleAppClick('partiful');\n                          } else if (currentWidget.type === 'workout') {\n                            // Set Kineship note ID (2) and then open the app\n                            setInitialNoteIdForScreen(2);\n                            handleAppClick('notes');\n                            localStorage.setItem('openedKineshipFromWidget', 'true');\n                            setTimeout(() => {\n                              // Use setTimeout to ensure the NotesScreen component is mounted\n                              // before we try to open a specific note\n                            }, 50); // Small delay\n                          }\n                        }\n                      }\n                      \n                      setSwipeStartX(null);\n                      setSwipeDirection(null);\n                      setIsSwiping(false);\n                    }\n                  }}\n                  // Remove mouse-based swipes for desktop completely\n                  onMouseDown={undefined}\n                  onMouseMove={undefined}\n                  onMouseUp={undefined}\n                >\n                  <div className=\"flex items-center mb-3\">\n                    <div className={`w-10 h-10 rounded-md flex items-center justify-center mr-3 shadow-md ${widgets[currentWidgetIndex].iconBgColor} overflow-hidden border border-white/10`}>\n                      {widgets[currentWidgetIndex].type === 'workout' && (\n                        <img \n                          src=\"./icons/apps/kineship.png\" \n                          alt=\"Kineship\" \n                          className=\"w-full h-full object-cover\" \n                          style={{ borderRadius: '0.375rem' }}\n                        />\n                      )}\n                      {widgets[currentWidgetIndex].type === 'notes' && (\n                        <StickyNote size={20} className=\"text-white\" strokeWidth={1.5} />\n                      )}\n                      {widgets[currentWidgetIndex].type === 'partiful' && (\n                        <img \n                          src=\"./icons/apps/partiful.png\" \n                          alt=\"Partiful\" \n                          className=\"w-6 h-6 object-contain\" \n                        />\n                    )}\n                  </div>\n                    <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center justify-between\">\n                        <h3 className=\"text-[15px] font-medium text-white text-sharp truncate mr-2\" style={{ \n                          WebkitFontSmoothing: 'antialiased', \n                          MozOsxFontSmoothing: 'grayscale',\n                          fontWeight: 400,\n                          maxWidth: widgets[currentWidgetIndex].type === 'notes' ? '100%' : 'calc(100% - 45px)'\n                        }}>\n                          {widgets[currentWidgetIndex].title}\n                        </h3>\n                        {/* Show timestamp for all widgets, including notes */}\n                        <p className=\"text-[14px] text-white/70 text-sharp ml-1 flex-shrink-0\" style={{ WebkitFontSmoothing: 'antialiased', MozOsxFontSmoothing: 'grayscale', fontWeight: 350 }}>\n                          {widgets[currentWidgetIndex].type === 'notes' \n                            ? getRelativeDate(widgetNote.date) // Consistently use widgetNote for date display\n                            : widgets[currentWidgetIndex].timestamp}\n                      </p>\n                    </div>\n                      <p className=\"text-[14px] text-white/60 font-normal text-sharp\" style={{ WebkitFontSmoothing: 'antialiased', MozOsxFontSmoothing: 'grayscale', fontWeight: 300 }}>\n                        {widgets[currentWidgetIndex].type === 'notes' ? \n                          'notes' : // Show \"notes\" in the subtitle position\n                          widgets[currentWidgetIndex].timestampLabel}\n                    </p>\n                  </div>\n                </div>\n                <div>\n                    <div className=\"flex items-center justify-between mb-1\">\n                      <div className=\"flex items-center max-w-[80%] min-w-0 overflow-hidden\">\n                        {/* Show title for all widgets in the same format */}\n                        <p className=\"text-[14px] text-white/70 font-medium truncate pr-2 text-sharp leading-tight w-full\" style={{ \n                          WebkitFontSmoothing: 'antialiased', \n                          MozOsxFontSmoothing: 'grayscale', \n                          textShadow: 'none', \n                          fontWeight: 400,\n                          letterSpacing: '0.01em'\n                        }}>\n                          {widgets[currentWidgetIndex].type === 'notes' ? \n                            '' : // Remove duplicate title for notes widget\n                            widgets[currentWidgetIndex].type === 'partiful' ?\n                            `${widgets[currentWidgetIndex].attendees} approved` :\n                            'with megan, sam'}\n                        </p>\n                      </div>\n                      <div className=\"flex items-center flex-shrink-0\">\n                        {/* Workout circles */}\n                        {widgets[currentWidgetIndex].type === 'workout' && (\n                          <div className=\"flex -space-x-1\">\n                            <div className=\"inline-block h-6 w-6 rounded-full ring-1 ring-white/20 bg-gradient-to-br from-[#62BE9C]/60 to-[#62BE9C]/30 shadow-md z-30 relative overflow-hidden\">\n                              <div className=\"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent\"></div>\n                            </div>\n                            <div className=\"inline-block h-6 w-6 rounded-full ring-1 ring-white/20 bg-gradient-to-br from-[#62BE9C]/50 to-[#62BE9C]/20 shadow-md z-20 relative overflow-hidden\">\n                              <div className=\"absolute inset-0 bg-gradient-to-br from-white/15 to-transparent\"></div>\n                            </div>\n                            <div className=\"inline-block h-6 w-6 rounded-full ring-1 ring-white/20 bg-gradient-to-br from-[#62BE9C]/40 to-[#62BE9C]/10 shadow-md z-10 relative overflow-hidden\">\n                              <div className=\"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent\"></div>\n                            </div>\n                          </div>\n                        )}\n                        {/* Partiful attendee circles */}\n                        {widgets[currentWidgetIndex].type === 'partiful' && (\n                          <div className=\"flex -space-x-1\">\n                            <div className=\"inline-block h-6 w-6 rounded-full ring-1 ring-white/20 bg-gradient-to-br from-[#FF4081]/60 to-[#FF4081]/30 shadow-md z-10 relative overflow-hidden\">\n                              <div className=\"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent\"></div>\n                            </div>\n                            <div className=\"inline-block h-6 w-6 rounded-full ring-1 ring-white/20 bg-gradient-to-br from-[#FF4081]/50 to-[#FF4081]/20 shadow-md z-20 relative overflow-hidden\">\n                              <div className=\"absolute inset-0 bg-gradient-to-br from-white/15 to-transparent\"></div>\n                            </div>\n                            <div className=\"inline-block h-6 w-6 rounded-full ring-1 ring-white/20 bg-gradient-to-br from-[#FF4081]/40 to-[#FF4081]/10 shadow-md z-30 relative overflow-hidden\">\n                              <div className=\"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent\"></div>\n                            </div>\n                          </div>\n                        )}\n                        {/* Notes icon - removed circles, using just a single note icon instead */}\n                        {widgets[currentWidgetIndex].type === 'notes' && (\n                          <div className=\"flex items-center\">\n                            {/* Removed the circle with the note icon */}\n                          </div>\n                        )}\n                        {/* Only show subtitle if it exists */}\n                        {widgets[currentWidgetIndex].subtitle && (\n                          <p className=\"text-[14px] text-white/70 font-normal whitespace-nowrap pr-2 text-sharp\" style={{ WebkitFontSmoothing: 'antialiased', MozOsxFontSmoothing: 'grayscale', textShadow: 'none' }}>\n                            {widgets[currentWidgetIndex].subtitle}\n                          </p>\n                        )}\n                  </div>\n                  </div>\n                    \n                    {/* Content preview area - consistent height across all widgets */}\n                    <div className={`${widgets[currentWidgetIndex].type === 'notes' ? 'min-h-[2.8em]' : 'min-h-[2.8em]'} mb-1`}>\n                      {/* Apply consistent styling to all widget content */}\n                      <p className=\"text-white/65 font-normal px-1 text-sharp overflow-hidden\" style={{ \n                        WebkitFontSmoothing: 'antialiased', \n                        MozOsxFontSmoothing: 'grayscale', \n                        textShadow: 'none',\n                        textOverflow: 'ellipsis',\n                        display: '-webkit-box',\n                        WebkitLineClamp: isDesktop && widgets[currentWidgetIndex].type === 'notes' ? '3' : '2',\n                        WebkitBoxOrient: 'vertical',\n                        lineHeight: '1.3',\n                        letterSpacing: '0.01em',\n                        fontWeight: 350,\n                        marginTop: widgets[currentWidgetIndex].type === 'notes' ? '-8px' : '-2px',\n                        marginBottom: widgets[currentWidgetIndex].type === 'notes' ? '6px' : '6px',\n                        paddingBottom: widgets[currentWidgetIndex].type === 'notes' ? '0px' : '0px',\n                        maxWidth: '100%',\n                        fontSize: isDesktop ? '14px' : '12px',\n                        textAlign: 'left'\n                      }}>\n                        {widgets[currentWidgetIndex].type === 'notes'\n                          ? (widgetNote.title.includes(\"hello world\")\n                              ? \"my north star: designing tech that centres human longevity. I'm on the launch team for Symbolic Fusion, a new technology for agent builders. I also built Kineship, a social layer for workouts. In Spring 2026, I'll be directing a fashion show...\"\n                              : widgetNote.title.includes(\"kineship\")\n                                ? \"the kineship app shares your workout calendar with your circles. It feels like much of how we connect today involves adding more: more invites, more plans, more coordination. Kineship is about subtraction. Instead of scheduling, it shows you when your people are already working out...\"\n                                : widgetNote.title.includes(\"projects\")\n                                  ? \"â–¹ systems design for boutique wellness spaces [infra mapping, product integration]\\n\\nâ–¹ social design in health & community (tessel, vfc, h&s gala, dc fashion show)\\n\\nâ–¹ winning team, healthcare innovation (mit bc x harvard med)\"\n                                  : (widgetNote.content && widgetNote.content.length > 250\n                                      ? widgetNote.content.substring(0, 250) + '...'\n                                      : (widgetNote.content || '') + '...'))\n                          : widgets[currentWidgetIndex].type === 'partiful'\n                            ? (isDesktop && widgetEvent.description && widgetEvent.description.length > 200\n                                ? widgetEvent.description.substring(0, 200) + '...'\n                                : isDesktop && widgetEvent.description\n                                  ? widgetEvent.description\n                                  : '')\n                            : '' // Empty content for workout\n                        }\n                      </p>\n                    </div>\n                </div>\n              </motion.div>\n              </AnimatePresence>\n              \n              {/* Indicator Dots */}\n              <div className=\"flex items-center justify-center mt-3 space-x-2\">\n                {widgets.map((_, index) => (\n                  <div\n                    key={`indicator-${index}`}\n                    onClick={() => {\n                      // Record the time of manual navigation\n                      setLastManualNavigation(Date.now());\n                      \n                      // Apply smooth transition between widgets when dots are clicked\n                      const direction = index > currentWidgetIndex ? 1 : -1;\n                      \n                      // Create a smoother transition by animating through each widget\n                      const animateToIndex = () => {\n                        if (currentWidgetIndex !== index) {\n                          setCurrentWidgetIndex(prev => {\n                            const next = prev + direction;\n                            // Handle wrapping around the ends\n                            if (next < 0) return widgets.length - 1;\n                            if (next >= widgets.length) return 0;\n                            return next;\n                          });\n                        }\n                      };\n                      \n                      // Start the transition\n                      animateToIndex();\n                    }}\n                  >\n                    <div \n                      className={`h-[6px] w-[6px] rounded-full ${\n                        currentWidgetIndex === index ? 'bg-white' : 'bg-white/40'\n                      }`}\n                      style={{\n                        transition: 'all 0.3s ease'\n                      }}\n                    />\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n          \n          {/* Expanding App Icon Animation */}\n          {appPosition && clonedAppIcon?.app && !activeApp && (\n            <motion.div\n              className=\"absolute rounded-[12px] bg-black/35 backdrop-blur-2xl z-20 overflow-hidden\"\n              initial={{\n                width: appPosition.width,\n                height: appPosition.height,\n                x: appPosition.x - appPosition.width/2,\n                y: appPosition.y - appPosition.height/2,\n                borderRadius: 12,\n              }}\n              animate={{\n                width: '100%',\n                height: '100%',\n                x: 0,\n                y: 0,\n                borderRadius: 24,\n              }}\n              transition={clonedAppIcon?.app?.id === 'partiful' \n                ? { type: \"spring\", stiffness: 300, damping: 40, mass: 1.3, duration: 0.4 } \n                : appOpeningTransition}\n            >\n              {/* Icon in center during expansion */}\n              <motion.div\n                className=\"absolute flex items-center justify-center\"\n                initial={{\n                  width: appPosition.width,\n                  height: appPosition.height,\n                  x: '50%',\n                  y: '50%',\n                  opacity: 1,\n                  transform: 'translate(-50%, -50%)',\n                }}\n                animate={{\n                  opacity: 0,\n                  scale: 0.5,\n                }}\n                transition={{ duration: 0.15, delay: 0.1 }}\n              >\n                <div className={`bg-gradient-to-br ${clonedAppIcon?.app?.color || 'from-gray-700 to-gray-900'} h-full w-full rounded-[12px] flex items-center justify-center`}>\n                  {clonedAppIcon?.app?.icon === 'Partiful' ? (\n                    <img src=\"./icons/apps/partiful.png\" alt=\"Partiful\" className=\"w-6 h-6\" />\n                  ) : (\n                    <AppIcon\n                      icon={clonedAppIcon?.app?.icon ?? ''}\n                      name=\"\"\n                      color={clonedAppIcon?.app?.color || 'from-gray-700 to-gray-900'}\n                      onClick={() => {}}\n                      showLabel={false}\n                    />\n                  )}\n                </div>\n              </motion.div>\n            </motion.div>\n          )}\n          \n          {/* App Content Layer - For all apps */}\n          {activeApp && ActiveComponent && (\n            <div \n              className=\"absolute inset-0 z-30 overflow-hidden flex items-center justify-center\"\n            >\n              <AnimatePresence mode=\"wait\" onExitComplete={() => setIsAnimating(false)}>\n                {ActiveComponent && (\n                  <ActiveComponent\n                    key={activeApp} // Use activeApp as key\n                    // Pass all possible props defined in the updated AppScreenProps\n                    onClose={handleClose}\n                    onNavigate={handleNavigate} // Use the new dedicated handler\n                    initialNoteId={initialNoteIdForScreen} // Pass state directly\n                    initialEventId={initialEventIdForScreen} // Pass state directly\n                    isNoteDetailView={isNoteDetailView} // NotesScreen will use this\n                    setIsNoteDetailView={setIsNoteDetailView} // NotesScreen will use this\n                    isEventDetailView={isEventDetailView} // EventScreen will use this\n                    setIsEventDetailView={setIsEventDetailView} // EventScreen will use this\n                  />\n                )}\n              </AnimatePresence>\n            </div>\n          )}\n        </motion.div>\n        \n        {/* Navigation arrows - positioned absolutely to not affect container positioning */}\n        {activeApp && (\n          <div \n            className=\"absolute w-full mt-4 px-1\"\n            style={{\n              opacity: isLoaded ? 1 : 0,\n              transition: \"opacity 0.3s ease-in-out\",\n              pointerEvents: \"auto\",\n              bottom: '-50px',\n              right: '0',\n              display: 'flex',\n              justifyContent: 'flex-end'\n            }}\n          >\n            {/* Back button - always goes back to home - moved to right side for thumb navigation */}\n            <motion.div \n              initial={{ opacity: 0, x: -5 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -5 }}\n              transition={{ \n                x: { duration: 0.3, delay: 4.5 },\n                opacity: { \n                  duration: 2.5,\n                  delay: 1.5 \n                }\n              }}\n              onClick={!isAnimating ? handleClose : undefined}\n              whileHover={{ scale: 1.1 }}\n              whileTap={{ scale: 0.9 }}\n            >\n              <ChevronLeft size={28} className=\"text-white\" strokeWidth={1.5} />\n            </motion.div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App.tsx'\nimport './index.css'\n\n// Configure framer-motion for iOS-like rendering\nif (typeof window !== 'undefined') {\n  // Remove 60fps cap for smoother animations on high refresh rate displays\n  // This will use the device's refresh rate for optimal smoothness\n  window.requestAnimationFrame = function() {\n    const originalRAF = window.requestAnimationFrame;\n    return function(callback: FrameRequestCallback) {\n      return originalRAF.call(window, callback);\n    };\n  }();\n}\n\n// Enable concurrent mode rendering for improved performance\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n);\n"],"names":["m","require$$0","defaultAttributes","toKebabCase","string","createLucideIcon","iconName","iconNode","Component","forwardRef","color","size","strokeWidth","absoluteStrokeWidth","className","children","rest","ref","createElement","tag","attrs","AtSign","ChevronLeft","ChevronRight","Lock","PartyPopper","Send","Shirt","StickyNote","Utensils","X","AppIcon","icon","name","onClick","showLabel","prefersReducedMotion","useReducedMotion","iconMap","jsxs","jsx","springTransition","displayName","handleClick","e","createTactileEffect","motion","notes","PinIcon","VideoPlayerOverlay","videoUrl","onClose","videoId","url","regExp","match","embedUrl","ReactDOM","NotesScreen","setIsNoteDetailView","initialNoteId","hasInteracted","setHasInteracted","useState","chevronControls","useAnimation","selectedNote","setSelectedNote","isInitializing","setIsInitializing","isNoteReady","setIsNoteReady","widgetNoteId","setWidgetNoteId","setVideoUrl","isFirstViewOfHelloWorld","setIsFirstViewOfHelloWorld","isFromHelloWorldToKineship","setIsFromHelloWorldToKineship","isViewingDetailRef","useRef","noteContentRef","markNoteAsViewed","noteId","viewedNotes","error","chevronVariants","handleInteraction","containerVariants","itemVariants","useEffect","helloWorldNote","note","setIsViewingDetail","noteToOpen","value","handleVideoLink","getRelativeDate","dateStr","now","today","yesterdayDate","yesterday","month","pinnedNotes","allNotes","a","b","dayA","monthA","yearA","dayB","monthB","yearB","handleNoteClick","closeNote","closeVideoPlayer","hello","n","AnimatePresence","_","text","part","index","SocialsScreen","randomizedSocials","setRandomizedSocials","socials","isFirstRender","setIsFirstRender","socialsCopy","emailApp","app","cornerApp","availableCorners","pos","randomCornerPosition","shuffledPositions","iconShadowStyle","icon3DStyle","social","PartifulEvent","onBack","eventData","onScrollToBottom","hasScrolled","setHasScrolled","isExpanded","setIsExpanded","containerRef","eventTitle","eventDate","eventTime","descriptionText","spotifyLink","spotifyLyrics","eventDateTime","day","year","formattedDate","handleScroll","scrollTop","scrollHeight","clientHeight","currentContainer","toggleExpanded","prev","preventBubbling","preventTouchBubbling","hostPhotos","approvedCount","handleExternalLinkClick","textContainerVariants","line","acc","lineIndex","renderIconWithText","_a","_b","host","Fragment","paragraph","colorSchemes","wildcardColors","eventIdNum","schemeIndex","colors","wildcardIndex","gradientDirections","directionIndex","colorMatches","color1","color2","shouldFlip","shouldAdjustOpacity","opacity","animationDelay","events","EventScreen","setIsEventDetailView","initialEventId","showPartiful","setShowPartiful","selectedEventId","setSelectedEventId","widgetEventId","setWidgetEventId","defaultHighlightEventId","setDefaultHighlightEventId","showSwipeIndicator","setShowSwipeIndicator","hasScrolledToBottom","setHasScrolledToBottom","handleAppBackClick","idFromSource","eventToOpen","event","sortedEvents","firstClickableEvent","handleEventPress","selectedEvent","currentIndex","getNextClickableEvent","startIndex","direction","totalEvents","offset","i","prevEventId","nextEventId","handleDragEnd","info","allEvents","isPastMonth","oneMonthAgo","pastMonthEvents","remainingEvents","shouldShowPulsingDot","eventId","AppBackground","isLoaded","imageSrc","setImageSrc","img","DesktopOverlay","showShippedBy","setShowShippedBy","React","timer","contentBeforeLoveList","contentAfterLoveList","createSwipeHapticFeedback","intensity","element","dateObj","dayOfWeek","App","isDesktop","setIsDesktop","showDesktopOverlay","setShowDesktopOverlay","activeApp","setActiveApp","isOpen","setIsOpen","selectedScreen","setSelectedScreen","selectedNoteId","setSelectedNoteId","appsRef","mainContainerRef","appPosition","setAppPosition","isAnimating","setIsAnimating","currentAppElement","setCurrentAppElement","windowHeight","setWindowHeight","setIsAppleDevice","setIsLoaded","isHighPerformanceDevice","setIsHighPerformanceDevice","isNoteDetailView","isEventDetailView","initialEventIdForScreen","setInitialEventIdForScreen","initialNoteIdForScreen","setInitialNoteIdForScreen","widgetNote","setWidgetNote","checkDesktop","hasHoverFinePointer","fontReady","preloadImage","src","resolve","reject","err","recentTracks","currentWidgetIndex","setCurrentWidgetIndex","isFirstVisit","setIsFirstVisit","isWidgetHovered","setIsWidgetHovered","swipeStartX","setSwipeStartX","swipeDirection","setSwipeDirection","isSwiping","setIsSwiping","handleWidgetNavigation","prevIndex","widgets","widgetRef","hasShownFirstDisplay","setHasShownFirstDisplay","lastManualNavigation","setLastManualNavigation","isMobileDevice","setIsMobileDevice","hasSeenHomeSession","setHasSeenHomeSession","arrowDismissed","setArrowDismissed","checkIfMobile","userAgent","isMobile","handleAppClick","useMemo","unlockNotes","noteIndex","selectRandomNote","availableNotes","randomIndex","interval","widgetEvent","setWidgetEvent","selectEventForWidget","recentEvents","prevActiveAppRef","twoDaysAgo","rotationInterval","isHighPerf","setHeight","vh","isApple","initialTimer","appId","clonedAppIcon","setClonedAppIcon","apps","handleClose","overlay","el","appElement","containerElement","appRect","containerRect","selectedApp","handleNavigate","target","options","ActiveComponent","activeAppName","appOpeningTransition","viewportHeightPx","mobileOpenHeightPx","desktopFrameSizePx","desktopOpenHeightPx","frameSizePx","frameVariants","handleCloseDesktopOverlay","_c","_d","_e","_f","currentWidget","diff","newDirection","next","_g","_h","_i","_j","_k","originalRAF","callback"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12]}